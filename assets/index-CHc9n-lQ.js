var BR=Object.defineProperty;var IA=a=>{throw TypeError(a)};var jR=(a,e,t)=>e in a?BR(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var Le=(a,e,t)=>jR(a,typeof e!="symbol"?e+"":e,t),w0=(a,e,t)=>e.has(a)||IA("Cannot "+t);var u=(a,e,t)=>(w0(a,e,"read from private field"),t?t.call(a):e.get(a)),k=(a,e,t)=>e.has(a)?IA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),E=(a,e,t,n)=>(w0(a,e,"write to private field"),n?n.call(a,t):e.set(a,t),t),R=(a,e,t)=>(w0(a,e,"access private method"),t);var Bn=(a,e,t,n)=>({set _(i){E(a,e,i,t)},get _(){return u(a,e,n)}});function UR(a,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in a)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function A1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var b0={exports:{}},Qh={},S0={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function VR(){if(DA)return Xe;DA=1;var a=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=m&&$[m]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function x($,X,ce){this.props=$,this.context=X,this.refs=A,this.updater=ce||b}x.prototype.isReactComponent={},x.prototype.setState=function($,X){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,X,"setState")},x.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function _(){}_.prototype=x.prototype;function P($,X,ce){this.props=$,this.context=X,this.refs=A,this.updater=ce||b}var M=P.prototype=new _;M.constructor=P,S(M,x.prototype),M.isPureReactComponent=!0;var I=Array.isArray,L=Object.prototype.hasOwnProperty,T={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function G($,X,ce){var ke,Oe={},_e=null,Ce=null;if(X!=null)for(ke in X.ref!==void 0&&(Ce=X.ref),X.key!==void 0&&(_e=""+X.key),X)L.call(X,ke)&&!N.hasOwnProperty(ke)&&(Oe[ke]=X[ke]);var Ge=arguments.length-2;if(Ge===1)Oe.children=ce;else if(1<Ge){for(var lt=Array(Ge),rt=0;rt<Ge;rt++)lt[rt]=arguments[rt+2];Oe.children=lt}if($&&$.defaultProps)for(ke in Ge=$.defaultProps,Ge)Oe[ke]===void 0&&(Oe[ke]=Ge[ke]);return{$$typeof:a,type:$,key:_e,ref:Ce,props:Oe,_owner:T.current}}function q($,X){return{$$typeof:a,type:$.type,key:X,ref:$.ref,props:$.props,_owner:$._owner}}function ae($){return typeof $=="object"&&$!==null&&$.$$typeof===a}function oe($){var X={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ce){return X[ce]})}var $e=/\/+/g;function Ue($,X){return typeof $=="object"&&$!==null&&$.key!=null?oe(""+$.key):X.toString(36)}function Ie($,X,ce,ke,Oe){var _e=typeof $;(_e==="undefined"||_e==="boolean")&&($=null);var Ce=!1;if($===null)Ce=!0;else switch(_e){case"string":case"number":Ce=!0;break;case"object":switch($.$$typeof){case a:case e:Ce=!0}}if(Ce)return Ce=$,Oe=Oe(Ce),$=ke===""?"."+Ue(Ce,0):ke,I(Oe)?(ce="",$!=null&&(ce=$.replace($e,"$&/")+"/"),Ie(Oe,X,ce,"",function(rt){return rt})):Oe!=null&&(ae(Oe)&&(Oe=q(Oe,ce+(!Oe.key||Ce&&Ce.key===Oe.key?"":(""+Oe.key).replace($e,"$&/")+"/")+$)),X.push(Oe)),1;if(Ce=0,ke=ke===""?".":ke+":",I($))for(var Ge=0;Ge<$.length;Ge++){_e=$[Ge];var lt=ke+Ue(_e,Ge);Ce+=Ie(_e,X,ce,lt,Oe)}else if(lt=v($),typeof lt=="function")for($=lt.call($),Ge=0;!(_e=$.next()).done;)_e=_e.value,lt=ke+Ue(_e,Ge++),Ce+=Ie(_e,X,ce,lt,Oe);else if(_e==="object")throw X=String($),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ce}function nt($,X,ce){if($==null)return $;var ke=[],Oe=0;return Ie($,ke,"","",function(_e){return X.call(ce,_e,Oe++)}),ke}function J($){if($._status===-1){var X=$._result;X=X(),X.then(function(ce){($._status===0||$._status===-1)&&($._status=1,$._result=ce)},function(ce){($._status===0||$._status===-1)&&($._status=2,$._result=ce)}),$._status===-1&&($._status=0,$._result=X)}if($._status===1)return $._result.default;throw $._result}var ie={current:null},ee={transition:null},fe={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:ee,ReactCurrentOwner:T};function re(){throw Error("act(...) is not supported in production builds of React.")}return Xe.Children={map:nt,forEach:function($,X,ce){nt($,function(){X.apply(this,arguments)},ce)},count:function($){var X=0;return nt($,function(){X++}),X},toArray:function($){return nt($,function(X){return X})||[]},only:function($){if(!ae($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Xe.Component=x,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=P,Xe.StrictMode=n,Xe.Suspense=d,Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Xe.act=re,Xe.cloneElement=function($,X,ce){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ke=S({},$.props),Oe=$.key,_e=$.ref,Ce=$._owner;if(X!=null){if(X.ref!==void 0&&(_e=X.ref,Ce=T.current),X.key!==void 0&&(Oe=""+X.key),$.type&&$.type.defaultProps)var Ge=$.type.defaultProps;for(lt in X)L.call(X,lt)&&!N.hasOwnProperty(lt)&&(ke[lt]=X[lt]===void 0&&Ge!==void 0?Ge[lt]:X[lt])}var lt=arguments.length-2;if(lt===1)ke.children=ce;else if(1<lt){Ge=Array(lt);for(var rt=0;rt<lt;rt++)Ge[rt]=arguments[rt+2];ke.children=Ge}return{$$typeof:a,type:$.type,key:Oe,ref:_e,props:ke,_owner:Ce}},Xe.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Xe.createElement=G,Xe.createFactory=function($){var X=G.bind(null,$);return X.type=$,X},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function($){return{$$typeof:h,render:$}},Xe.isValidElement=ae,Xe.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:J}},Xe.memo=function($,X){return{$$typeof:p,type:$,compare:X===void 0?null:X}},Xe.startTransition=function($){var X=ee.transition;ee.transition={};try{$()}finally{ee.transition=X}},Xe.unstable_act=re,Xe.useCallback=function($,X){return ie.current.useCallback($,X)},Xe.useContext=function($){return ie.current.useContext($)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function($){return ie.current.useDeferredValue($)},Xe.useEffect=function($,X){return ie.current.useEffect($,X)},Xe.useId=function(){return ie.current.useId()},Xe.useImperativeHandle=function($,X,ce){return ie.current.useImperativeHandle($,X,ce)},Xe.useInsertionEffect=function($,X){return ie.current.useInsertionEffect($,X)},Xe.useLayoutEffect=function($,X){return ie.current.useLayoutEffect($,X)},Xe.useMemo=function($,X){return ie.current.useMemo($,X)},Xe.useReducer=function($,X,ce){return ie.current.useReducer($,X,ce)},Xe.useRef=function($){return ie.current.useRef($)},Xe.useState=function($){return ie.current.useState($)},Xe.useSyncExternalStore=function($,X,ce){return ie.current.useSyncExternalStore($,X,ce)},Xe.useTransition=function(){return ie.current.useTransition()},Xe.version="18.3.1",Xe}var NA;function dp(){return NA||(NA=1,S0.exports=VR()),S0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA;function WR(){if(FA)return Qh;FA=1;var a=dp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(h,d,p){var g,m={},v=null,b=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(b=d.ref);for(g in d)n.call(d,g)&&!o.hasOwnProperty(g)&&(m[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)m[g]===void 0&&(m[g]=d[g]);return{$$typeof:e,type:h,key:v,ref:b,props:m,_owner:i.current}}return Qh.Fragment=t,Qh.jsx=l,Qh.jsxs=l,Qh}var OA;function GR(){return OA||(OA=1,b0.exports=WR()),b0.exports}var Rd=GR(),B=dp();const ss=A1(B),zA=UR({__proto__:null,default:ss},[B]);function XR(a){if(a.sheet)return a.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===a)return document.styleSheets[e]}function qR(a){var e=document.createElement("style");return e.setAttribute("data-emotion",a.key),a.nonce!==void 0&&e.setAttribute("nonce",a.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var YR=function(){function a(t){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=a.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(qR(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=XR(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},a}(),Tn="-ms-",Im="-moz-",it="-webkit-",ox="comm",E1="rule",x1="decl",KR="@import",lx="@keyframes",QR="@layer",JR=Math.abs,yy=String.fromCharCode,ZR=Object.assign;function eT(a,e){return En(a,0)^45?(((e<<2^En(a,0))<<2^En(a,1))<<2^En(a,2))<<2^En(a,3):0}function ux(a){return a.trim()}function tT(a,e){return(a=e.exec(a))?a[0]:a}function at(a,e,t){return a.replace(e,t)}function Q0(a,e){return a.indexOf(e)}function En(a,e){return a.charCodeAt(e)|0}function Td(a,e,t){return a.slice(e,t)}function rs(a){return a.length}function _1(a){return a.length}function Ig(a,e){return e.push(a),a}function nT(a,e){return a.map(e).join("")}var vy=1,sh=1,cx=0,cr=0,qt=0,oh="";function wy(a,e,t,n,i,o,l){return{value:a,root:e,parent:t,type:n,props:i,children:o,line:vy,column:sh,length:l,return:""}}function Jh(a,e){return ZR(wy("",null,null,"",null,null,0),a,{length:-a.length},e)}function rT(){return qt}function iT(){return qt=cr>0?En(oh,--cr):0,sh--,qt===10&&(sh=1,vy--),qt}function Dr(){return qt=cr<cx?En(oh,cr++):0,sh++,qt===10&&(sh=1,vy++),qt}function as(){return En(oh,cr)}function Xg(){return cr}function fp(a,e){return Td(oh,a,e)}function Pd(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hx(a){return vy=sh=1,cx=rs(oh=a),cr=0,[]}function dx(a){return oh="",a}function qg(a){return ux(fp(cr-1,J0(a===91?a+2:a===40?a+1:a)))}function sT(a){for(;(qt=as())&&qt<33;)Dr();return Pd(a)>2||Pd(qt)>3?"":" "}function aT(a,e){for(;--e&&Dr()&&!(qt<48||qt>102||qt>57&&qt<65||qt>70&&qt<97););return fp(a,Xg()+(e<6&&as()==32&&Dr()==32))}function J0(a){for(;Dr();)switch(qt){case a:return cr;case 34:case 39:a!==34&&a!==39&&J0(qt);break;case 40:a===41&&J0(a);break;case 92:Dr();break}return cr}function oT(a,e){for(;Dr()&&a+qt!==57;)if(a+qt===84&&as()===47)break;return"/*"+fp(e,cr-1)+"*"+yy(a===47?a:Dr())}function lT(a){for(;!Pd(as());)Dr();return fp(a,cr)}function uT(a){return dx(Yg("",null,null,null,[""],a=hx(a),0,[0],a))}function Yg(a,e,t,n,i,o,l,h,d){for(var p=0,g=0,m=l,v=0,b=0,S=0,A=1,x=1,_=1,P=0,M="",I=i,L=o,T=n,N=M;x;)switch(S=P,P=Dr()){case 40:if(S!=108&&En(N,m-1)==58){Q0(N+=at(qg(P),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:N+=qg(P);break;case 9:case 10:case 13:case 32:N+=sT(S);break;case 92:N+=aT(Xg()-1,7);continue;case 47:switch(as()){case 42:case 47:Ig(cT(oT(Dr(),Xg()),e,t),d);break;default:N+="/"}break;case 123*A:h[p++]=rs(N)*_;case 125*A:case 59:case 0:switch(P){case 0:case 125:x=0;case 59+g:_==-1&&(N=at(N,/\f/g,"")),b>0&&rs(N)-m&&Ig(b>32?HA(N+";",n,t,m-1):HA(at(N," ","")+";",n,t,m-2),d);break;case 59:N+=";";default:if(Ig(T=$A(N,e,t,p,g,i,h,M,I=[],L=[],m),o),P===123)if(g===0)Yg(N,e,T,T,I,o,m,h,L);else switch(v===99&&En(N,3)===110?100:v){case 100:case 108:case 109:case 115:Yg(a,T,T,n&&Ig($A(a,T,T,0,0,i,h,M,i,I=[],m),L),i,L,m,h,n?I:L);break;default:Yg(N,T,T,T,[""],L,0,h,L)}}p=g=b=0,A=_=1,M=N="",m=l;break;case 58:m=1+rs(N),b=S;default:if(A<1){if(P==123)--A;else if(P==125&&A++==0&&iT()==125)continue}switch(N+=yy(P),P*A){case 38:_=g>0?1:(N+="\f",-1);break;case 44:h[p++]=(rs(N)-1)*_,_=1;break;case 64:as()===45&&(N+=qg(Dr())),v=as(),g=m=rs(M=N+=lT(Xg())),P++;break;case 45:S===45&&rs(N)==2&&(A=0)}}return o}function $A(a,e,t,n,i,o,l,h,d,p,g){for(var m=i-1,v=i===0?o:[""],b=_1(v),S=0,A=0,x=0;S<n;++S)for(var _=0,P=Td(a,m+1,m=JR(A=l[S])),M=a;_<b;++_)(M=ux(A>0?v[_]+" "+P:at(P,/&\f/g,v[_])))&&(d[x++]=M);return wy(a,e,t,i===0?E1:h,d,p,g)}function cT(a,e,t){return wy(a,e,t,ox,yy(rT()),Td(a,2,-2),0)}function HA(a,e,t,n){return wy(a,e,t,x1,Td(a,0,n),Td(a,n+1,-1),n)}function Yu(a,e){for(var t="",n=_1(a),i=0;i<n;i++)t+=e(a[i],i,a,e)||"";return t}function hT(a,e,t,n){switch(a.type){case QR:if(a.children.length)break;case KR:case x1:return a.return=a.return||a.value;case ox:return"";case lx:return a.return=a.value+"{"+Yu(a.children,n)+"}";case E1:a.value=a.props.join(",")}return rs(t=Yu(a.children,n))?a.return=a.value+"{"+t+"}":""}function dT(a){var e=_1(a);return function(t,n,i,o){for(var l="",h=0;h<e;h++)l+=a[h](t,n,i,o)||"";return l}}function fT(a){return function(e){e.root||(e=e.return)&&a(e)}}function fx(a){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=a(t)),e[t]}}var pT=function(e,t,n){for(var i=0,o=0;i=o,o=as(),i===38&&o===12&&(t[n]=1),!Pd(o);)Dr();return fp(e,cr)},gT=function(e,t){var n=-1,i=44;do switch(Pd(i)){case 0:i===38&&as()===12&&(t[n]=1),e[n]+=pT(cr-1,t,n);break;case 2:e[n]+=qg(i);break;case 4:if(i===44){e[++n]=as()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=yy(i)}while(i=Dr());return e},mT=function(e,t){return dx(gT(hx(e),t))},BA=new WeakMap,yT=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!BA.get(n))&&!i){BA.set(e,!0);for(var o=[],l=mT(t,o),h=n.props,d=0,p=0;d<l.length;d++)for(var g=0;g<h.length;g++,p++)e.props[p]=o[d]?l[d].replace(/&\f/g,h[g]):h[g]+" "+l[d]}}},vT=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function px(a,e){switch(eT(a,e)){case 5103:return it+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return it+a+Im+a+Tn+a+a;case 6828:case 4268:return it+a+Tn+a+a;case 6165:return it+a+Tn+"flex-"+a+a;case 5187:return it+a+at(a,/(\w+).+(:[^]+)/,it+"box-$1$2"+Tn+"flex-$1$2")+a;case 5443:return it+a+Tn+"flex-item-"+at(a,/flex-|-self/,"")+a;case 4675:return it+a+Tn+"flex-line-pack"+at(a,/align-content|flex-|-self/,"")+a;case 5548:return it+a+Tn+at(a,"shrink","negative")+a;case 5292:return it+a+Tn+at(a,"basis","preferred-size")+a;case 6060:return it+"box-"+at(a,"-grow","")+it+a+Tn+at(a,"grow","positive")+a;case 4554:return it+at(a,/([^-])(transform)/g,"$1"+it+"$2")+a;case 6187:return at(at(at(a,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),a,"")+a;case 5495:case 3959:return at(a,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return at(at(a,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+Tn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+a+a;case 4095:case 3583:case 4068:case 2532:return at(a,/(.+)-inline(.+)/,it+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rs(a)-1-e>6)switch(En(a,e+1)){case 109:if(En(a,e+4)!==45)break;case 102:return at(a,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+Im+(En(a,e+3)==108?"$3":"$2-$3"))+a;case 115:return~Q0(a,"stretch")?px(at(a,"stretch","fill-available"),e)+a:a}break;case 4949:if(En(a,e+1)!==115)break;case 6444:switch(En(a,rs(a)-3-(~Q0(a,"!important")&&10))){case 107:return at(a,":",":"+it)+a;case 101:return at(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(En(a,14)===45?"inline-":"")+"box$3$1"+it+"$2$3$1"+Tn+"$2box$3")+a}break;case 5936:switch(En(a,e+11)){case 114:return it+a+Tn+at(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return it+a+Tn+at(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return it+a+Tn+at(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return it+a+Tn+a+a}return a}var wT=function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case x1:e.return=px(e.value,e.length);break;case lx:return Yu([Jh(e,{value:at(e.value,"@","@"+it)})],i);case E1:if(e.length)return nT(e.props,function(o){switch(tT(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yu([Jh(e,{props:[at(o,/:(read-\w+)/,":"+Im+"$1")]})],i);case"::placeholder":return Yu([Jh(e,{props:[at(o,/:(plac\w+)/,":"+it+"input-$1")]}),Jh(e,{props:[at(o,/:(plac\w+)/,":"+Im+"$1")]}),Jh(e,{props:[at(o,/:(plac\w+)/,Tn+"input-$1")]})],i)}return""})}},bT=[wT],ST=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(A){var x=A.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var i=e.stylisPlugins||bT,o={},l,h=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(A){for(var x=A.getAttribute("data-emotion").split(" "),_=1;_<x.length;_++)o[x[_]]=!0;h.push(A)});var d,p=[yT,vT];{var g,m=[hT,fT(function(A){g.insert(A)})],v=dT(p.concat(i,m)),b=function(x){return Yu(uT(x),v)};d=function(x,_,P,M){g=P,b(x?x+"{"+_.styles+"}":_.styles),M&&(S.inserted[_.name]=!0)}}var S={key:t,sheet:new YR({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:d};return S.sheet.hydrate(h),S};function Z0(){return Z0=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},Z0.apply(null,arguments)}var A0={exports:{}},ot={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jA;function AT(){if(jA)return ot;jA=1;var a=typeof Symbol=="function"&&Symbol.for,e=a?Symbol.for("react.element"):60103,t=a?Symbol.for("react.portal"):60106,n=a?Symbol.for("react.fragment"):60107,i=a?Symbol.for("react.strict_mode"):60108,o=a?Symbol.for("react.profiler"):60114,l=a?Symbol.for("react.provider"):60109,h=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.async_mode"):60111,p=a?Symbol.for("react.concurrent_mode"):60111,g=a?Symbol.for("react.forward_ref"):60112,m=a?Symbol.for("react.suspense"):60113,v=a?Symbol.for("react.suspense_list"):60120,b=a?Symbol.for("react.memo"):60115,S=a?Symbol.for("react.lazy"):60116,A=a?Symbol.for("react.block"):60121,x=a?Symbol.for("react.fundamental"):60117,_=a?Symbol.for("react.responder"):60118,P=a?Symbol.for("react.scope"):60119;function M(L){if(typeof L=="object"&&L!==null){var T=L.$$typeof;switch(T){case e:switch(L=L.type,L){case d:case p:case n:case o:case i:case m:return L;default:switch(L=L&&L.$$typeof,L){case h:case g:case S:case b:case l:return L;default:return T}}case t:return T}}}function I(L){return M(L)===p}return ot.AsyncMode=d,ot.ConcurrentMode=p,ot.ContextConsumer=h,ot.ContextProvider=l,ot.Element=e,ot.ForwardRef=g,ot.Fragment=n,ot.Lazy=S,ot.Memo=b,ot.Portal=t,ot.Profiler=o,ot.StrictMode=i,ot.Suspense=m,ot.isAsyncMode=function(L){return I(L)||M(L)===d},ot.isConcurrentMode=I,ot.isContextConsumer=function(L){return M(L)===h},ot.isContextProvider=function(L){return M(L)===l},ot.isElement=function(L){return typeof L=="object"&&L!==null&&L.$$typeof===e},ot.isForwardRef=function(L){return M(L)===g},ot.isFragment=function(L){return M(L)===n},ot.isLazy=function(L){return M(L)===S},ot.isMemo=function(L){return M(L)===b},ot.isPortal=function(L){return M(L)===t},ot.isProfiler=function(L){return M(L)===o},ot.isStrictMode=function(L){return M(L)===i},ot.isSuspense=function(L){return M(L)===m},ot.isValidElementType=function(L){return typeof L=="string"||typeof L=="function"||L===n||L===p||L===o||L===i||L===m||L===v||typeof L=="object"&&L!==null&&(L.$$typeof===S||L.$$typeof===b||L.$$typeof===l||L.$$typeof===h||L.$$typeof===g||L.$$typeof===x||L.$$typeof===_||L.$$typeof===P||L.$$typeof===A)},ot.typeOf=M,ot}var UA;function ET(){return UA||(UA=1,A0.exports=AT()),A0.exports}var E0,VA;function xT(){if(VA)return E0;VA=1;var a=ET(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[a.ForwardRef]=n,o[a.Memo]=i;function l(S){return a.isMemo(S)?i:o[S.$$typeof]||e}var h=Object.defineProperty,d=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,v=Object.prototype;function b(S,A,x){if(typeof A!="string"){if(v){var _=m(A);_&&_!==v&&b(S,_,x)}var P=d(A);p&&(P=P.concat(p(A)));for(var M=l(S),I=l(A),L=0;L<P.length;++L){var T=P[L];if(!t[T]&&!(x&&x[T])&&!(I&&I[T])&&!(M&&M[T])){var N=g(A,T);try{h(S,T,N)}catch{}}}}return S}return E0=b,E0}xT();var _T=!0;function gx(a,e,t){var n="";return t.split(" ").forEach(function(i){a[i]!==void 0?e.push(a[i]+";"):i&&(n+=i+" ")}),n}var C1=function(e,t,n){var i=e.key+"-"+t.name;(n===!1||_T===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},k1=function(e,t,n){C1(e,t,n);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function CT(a){for(var e=0,t,n=0,i=a.length;i>=4;++n,i-=4)t=a.charCodeAt(n)&255|(a.charCodeAt(++n)&255)<<8|(a.charCodeAt(++n)&255)<<16|(a.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(a.charCodeAt(n+2)&255)<<16;case 2:e^=(a.charCodeAt(n+1)&255)<<8;case 1:e^=a.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var kT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},RT=/[A-Z]|^ms/g,TT=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mx=function(e){return e.charCodeAt(1)===45},WA=function(e){return e!=null&&typeof e!="boolean"},x0=fx(function(a){return mx(a)?a:a.replace(RT,"-$&").toLowerCase()}),GA=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(TT,function(n,i,o){return is={name:i,styles:o,next:is},i})}return kT[e]!==1&&!mx(e)&&typeof t=="number"&&t!==0?t+"px":t};function Ld(a,e,t){if(t==null)return"";var n=t;if(n.__emotion_styles!==void 0)return n;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return is={name:i.name,styles:i.styles,next:is},i.name;var o=t;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)is={name:l.name,styles:l.styles,next:is},l=l.next;var h=o.styles+";";return h}return PT(a,e,t)}case"function":{if(a!==void 0){var d=is,p=t(a);return is=d,Ld(a,e,p)}break}}var g=t;if(e==null)return g;var m=e[g];return m!==void 0?m:g}function PT(a,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=Ld(a,e,t[i])+";";else for(var o in t){var l=t[o];if(typeof l!="object"){var h=l;e!=null&&e[h]!==void 0?n+=o+"{"+e[h]+"}":WA(h)&&(n+=x0(o)+":"+GA(o,h)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var d=0;d<l.length;d++)WA(l[d])&&(n+=x0(o)+":"+GA(o,l[d])+";");else{var p=Ld(a,e,l);switch(o){case"animation":case"animationName":{n+=x0(o)+":"+p+";";break}default:n+=o+"{"+p+"}"}}}return n}var XA=/label:\s*([^\s;{]+)\s*(;|$)/g,is;function by(a,e,t){if(a.length===1&&typeof a[0]=="object"&&a[0]!==null&&a[0].styles!==void 0)return a[0];var n=!0,i="";is=void 0;var o=a[0];if(o==null||o.raw===void 0)n=!1,i+=Ld(t,e,o);else{var l=o;i+=l[0]}for(var h=1;h<a.length;h++)if(i+=Ld(t,e,a[h]),n){var d=o;i+=d[h]}XA.lastIndex=0;for(var p="",g;(g=XA.exec(i))!==null;)p+="-"+g[1];var m=CT(i)+p;return{name:m,styles:i,next:is}}var LT=function(e){return e()},yx=zA.useInsertionEffect?zA.useInsertionEffect:!1,vx=yx||LT,qA=yx||B.useLayoutEffect,wx=B.createContext(typeof HTMLElement<"u"?ST({key:"css"}):null);wx.Provider;var R1=function(e){return B.forwardRef(function(t,n){var i=B.useContext(wx);return e(t,i,n)})},T1=B.createContext({}),pp={}.hasOwnProperty,ew="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",P1=function(e,t){var n={};for(var i in t)pp.call(t,i)&&(n[i]=t[i]);return n[ew]=e,n},MT=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return C1(t,n,i),vx(function(){return k1(t,n,i)}),null},IT=R1(function(a,e,t){var n=a.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=a[ew],o=[n],l="";typeof a.className=="string"?l=gx(e.registered,o,a.className):a.className!=null&&(l=a.className+" ");var h=by(o,void 0,B.useContext(T1));l+=e.key+"-"+h.name;var d={};for(var p in a)pp.call(a,p)&&p!=="css"&&p!==ew&&(d[p]=a[p]);return d.className=l,t&&(d.ref=t),B.createElement(B.Fragment,null,B.createElement(MT,{cache:e,serialized:h,isStringTag:typeof i=="string"}),B.createElement(i,d))}),L1=IT,Sy=Rd.Fragment,ne=function(e,t,n){return pp.call(t,"css")?Rd.jsx(L1,P1(e,t),n):Rd.jsx(e,t,n)},Ot=function(e,t,n){return pp.call(t,"css")?Rd.jsxs(L1,P1(e,t),n):Rd.jsxs(e,t,n)},Dg={},_0={exports:{}},nr={},C0={exports:{}},k0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA;function DT(){return YA||(YA=1,function(a){function e(ee,fe){var re=ee.length;ee.push(fe);e:for(;0<re;){var $=re-1>>>1,X=ee[$];if(0<i(X,fe))ee[$]=fe,ee[re]=X,re=$;else break e}}function t(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var fe=ee[0],re=ee.pop();if(re!==fe){ee[0]=re;e:for(var $=0,X=ee.length,ce=X>>>1;$<ce;){var ke=2*($+1)-1,Oe=ee[ke],_e=ke+1,Ce=ee[_e];if(0>i(Oe,re))_e<X&&0>i(Ce,Oe)?(ee[$]=Ce,ee[_e]=re,$=_e):(ee[$]=Oe,ee[ke]=re,$=ke);else if(_e<X&&0>i(Ce,re))ee[$]=Ce,ee[_e]=re,$=_e;else break e}}return fe}function i(ee,fe){var re=ee.sortIndex-fe.sortIndex;return re!==0?re:ee.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();a.unstable_now=function(){return l.now()-h}}var d=[],p=[],g=1,m=null,v=3,b=!1,S=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ee){for(var fe=t(p);fe!==null;){if(fe.callback===null)n(p);else if(fe.startTime<=ee)n(p),fe.sortIndex=fe.expirationTime,e(d,fe);else break;fe=t(p)}}function I(ee){if(A=!1,M(ee),!S)if(t(d)!==null)S=!0,J(L);else{var fe=t(p);fe!==null&&ie(I,fe.startTime-ee)}}function L(ee,fe){S=!1,A&&(A=!1,_(G),G=-1),b=!0;var re=v;try{for(M(fe),m=t(d);m!==null&&(!(m.expirationTime>fe)||ee&&!oe());){var $=m.callback;if(typeof $=="function"){m.callback=null,v=m.priorityLevel;var X=$(m.expirationTime<=fe);fe=a.unstable_now(),typeof X=="function"?m.callback=X:m===t(d)&&n(d),M(fe)}else n(d);m=t(d)}if(m!==null)var ce=!0;else{var ke=t(p);ke!==null&&ie(I,ke.startTime-fe),ce=!1}return ce}finally{m=null,v=re,b=!1}}var T=!1,N=null,G=-1,q=5,ae=-1;function oe(){return!(a.unstable_now()-ae<q)}function $e(){if(N!==null){var ee=a.unstable_now();ae=ee;var fe=!0;try{fe=N(!0,ee)}finally{fe?Ue():(T=!1,N=null)}}else T=!1}var Ue;if(typeof P=="function")Ue=function(){P($e)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,nt=Ie.port2;Ie.port1.onmessage=$e,Ue=function(){nt.postMessage(null)}}else Ue=function(){x($e,0)};function J(ee){N=ee,T||(T=!0,Ue())}function ie(ee,fe){G=x(function(){ee(a.unstable_now())},fe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ee){ee.callback=null},a.unstable_continueExecution=function(){S||b||(S=!0,J(L))},a.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ee?Math.floor(1e3/ee):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_getFirstCallbackNode=function(){return t(d)},a.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var fe=3;break;default:fe=v}var re=v;v=fe;try{return ee()}finally{v=re}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var re=v;v=ee;try{return fe()}finally{v=re}},a.unstable_scheduleCallback=function(ee,fe,re){var $=a.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?$+re:$):re=$,ee){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=re+X,ee={id:g++,callback:fe,priorityLevel:ee,startTime:re,expirationTime:X,sortIndex:-1},re>$?(ee.sortIndex=re,e(p,ee),t(d)===null&&ee===t(p)&&(A?(_(G),G=-1):A=!0,ie(I,re-$))):(ee.sortIndex=X,e(d,ee),S||b||(S=!0,J(L))),ee},a.unstable_shouldYield=oe,a.unstable_wrapCallback=function(ee){var fe=v;return function(){var re=v;v=fe;try{return ee.apply(this,arguments)}finally{v=re}}}}(k0)),k0}var KA;function NT(){return KA||(KA=1,C0.exports=DT()),C0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function FT(){if(QA)return nr;QA=1;var a=dp(),e=NT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(r,s){l(r,s),l(r+"Capture",s)}function l(r,s){for(i[r]=s,r=0;r<s.length;r++)n.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function v(r){return d.call(m,r)?!0:d.call(g,r)?!1:p.test(r)?m[r]=!0:(g[r]=!0,!1)}function b(r,s,c,f){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function S(r,s,c,f){if(s===null||typeof s>"u"||b(r,s,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function A(r,s,c,f,y,w,C){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=r,this.type=s,this.sanitizeURL=w,this.removeEmptyString=C}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){x[r]=new A(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];x[s]=new A(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){x[r]=new A(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){x[r]=new A(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){x[r]=new A(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){x[r]=new A(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){x[r]=new A(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){x[r]=new A(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){x[r]=new A(r,5,!1,r.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function P(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(_,P);x[s]=new A(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(_,P);x[s]=new A(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(_,P);x[s]=new A(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){x[r]=new A(r,1,!1,r.toLowerCase(),null,!1,!1)}),x.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){x[r]=new A(r,1,!1,r.toLowerCase(),null,!0,!0)});function M(r,s,c,f){var y=x.hasOwnProperty(s)?x[s]:null;(y!==null?y.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,c,y,f)&&(c=null),f||y===null?v(s)&&(c===null?r.removeAttribute(s):r.setAttribute(s,""+c)):y.mustUseProperty?r[y.propertyName]=c===null?y.type===3?!1:"":c:(s=y.attributeName,f=y.attributeNamespace,c===null?r.removeAttribute(s):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,f?r.setAttributeNS(f,s,c):r.setAttribute(s,c))))}var I=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),T=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),oe=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),ee=Symbol.iterator;function fe(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var re=Object.assign,$;function X(r){if($===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);$=s&&s[1]||""}return`
`+$+r}var ce=!1;function ke(r,s){if(!r||ce)return"";ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(V){var f=V}Reflect.construct(r,[],s)}else{try{s.call()}catch(V){f=V}r.call(s.prototype)}else{try{throw Error()}catch(V){f=V}r()}}catch(V){if(V&&f&&typeof V.stack=="string"){for(var y=V.stack.split(`
`),w=f.stack.split(`
`),C=y.length-1,D=w.length-1;1<=C&&0<=D&&y[C]!==w[D];)D--;for(;1<=C&&0<=D;C--,D--)if(y[C]!==w[D]){if(C!==1||D!==1)do if(C--,D--,0>D||y[C]!==w[D]){var F=`
`+y[C].replace(" at new "," at ");return r.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",r.displayName)),F}while(1<=C&&0<=D);break}}}finally{ce=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?X(r):""}function Oe(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=ke(r.type,!1),r;case 11:return r=ke(r.type.render,!1),r;case 1:return r=ke(r.type,!0),r;default:return""}}function _e(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case T:return"Portal";case q:return"Profiler";case G:return"StrictMode";case Ue:return"Suspense";case Ie:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case oe:return(r.displayName||"Context")+".Consumer";case ae:return(r._context.displayName||"Context")+".Provider";case $e:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case nt:return s=r.displayName||null,s!==null?s:_e(r.type)||"Memo";case J:s=r._payload,r=r._init;try{return _e(r(s))}catch{}}return null}function Ce(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(s);case 8:return s===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ge(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lt(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function rt(r){var s=lt(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),f=""+r[s];if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return y.call(this)},set:function(C){f=""+C,w.call(this,C)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ri(r){r._valueTracker||(r._valueTracker=rt(r))}function ch(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return r&&(f=lt(r)?r.checked?"true":"false":r.value),r=f,r!==c?(s.setValue(r),!0):!1}function au(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ii(r,s){var c=s.checked;return re({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function Ep(r,s){var c=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;c=Ge(s.value!=null?s.value:c),r._wrapperState={initialChecked:f,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function xp(r,s){s=s.checked,s!=null&&M(r,"checked",s,!1)}function ou(r,s){xp(r,s);var c=Ge(s.value),f=s.type;if(c!=null)f==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?hh(r,s.type,c):s.hasOwnProperty("defaultValue")&&hh(r,s.type,Ge(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function _p(r,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,c||s===r.value||(r.value=s),r.defaultValue=s}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function hh(r,s,c){(s!=="number"||au(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var vo=Array.isArray;function ra(r,s,c,f){if(r=r.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<r.length;c++)y=s.hasOwnProperty("$"+r[c].value),r[c].selected!==y&&(r[c].selected=y),y&&f&&(r[c].defaultSelected=!0)}else{for(c=""+Ge(c),s=null,y=0;y<r.length;y++){if(r[y].value===c){r[y].selected=!0,f&&(r[y].defaultSelected=!0);return}s!==null||r[y].disabled||(s=r[y])}s!==null&&(s.selected=!0)}}function si(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ia(r,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(t(92));if(vo(c)){if(1<c.length)throw Error(t(93));c=c[0]}s=c}s==null&&(s=""),c=s}r._wrapperState={initialValue:Ge(c)}}function dh(r,s){var c=Ge(s.value),f=Ge(s.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),s.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),f!=null&&(r.defaultValue=""+f)}function lu(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function ai(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hr(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?ai(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var wo,uu=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,f,y){MSApp.execUnsafeLocalFunction(function(){return r(s,c,f,y)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(wo=wo||document.createElement("div"),wo.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=wo.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function bo(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var Kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cp=["Webkit","ms","Moz","O"];Object.keys(Kn).forEach(function(r){Cp.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Kn[s]=Kn[r]})});function fh(r,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||Kn.hasOwnProperty(r)&&Kn[r]?(""+s).trim():s+"px"}function ph(r,s){r=r.style;for(var c in s)if(s.hasOwnProperty(c)){var f=c.indexOf("--")===0,y=fh(c,s[c],f);c==="float"&&(c="cssFloat"),f?r.setProperty(c,y):r[c]=y}}var $y=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cu(r,s){if(s){if($y[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function sa(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hu=null;function So(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var gh=null,hs=null,aa=null;function mh(r){if(r=Fh(r)){if(typeof gh!="function")throw Error(t(280));var s=r.stateNode;s&&(s=qp(s),gh(r.stateNode,r.type,s))}}function Ao(r){hs?aa?aa.push(r):aa=[r]:hs=r}function Eo(){if(hs){var r=hs,s=aa;if(aa=hs=null,mh(r),s)for(r=0;r<s.length;r++)mh(s[r])}}function kp(r,s){return r(s)}function Rp(){}var O=!1;function H(r,s,c){if(O)return r(s,c);O=!0;try{return kp(r,s,c)}finally{O=!1,(hs!==null||aa!==null)&&(Rp(),Eo())}}function W(r,s){var c=r.stateNode;if(c===null)return null;var f=qp(c);if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(t(231,s,typeof c));return c}var Q=!1;if(h)try{var ue={};Object.defineProperty(ue,"passive",{get:function(){Q=!0}}),window.addEventListener("test",ue,ue),window.removeEventListener("test",ue,ue)}catch{Q=!1}function xe(r,s,c,f,y,w,C,D,F){var V=Array.prototype.slice.call(arguments,3);try{s.apply(c,V)}catch(K){this.onError(K)}}var Pe=!1,pe=null,we=!1,le=null,Fe={onError:function(r){Pe=!0,pe=r}};function Ve(r,s,c,f,y,w,C,D,F){Pe=!1,pe=null,xe.apply(Fe,arguments)}function vt(r,s,c,f,y,w,C,D,F){if(Ve.apply(this,arguments),Pe){if(Pe){var V=pe;Pe=!1,pe=null}else throw Error(t(198));we||(we=!0,le=V)}}function At(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function wt(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function pt(r){if(At(r)!==r)throw Error(t(188))}function Ht(r){var s=r.alternate;if(!s){if(s=At(r),s===null)throw Error(t(188));return s!==r?null:r}for(var c=r,f=s;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return pt(y),r;if(w===f)return pt(y),s;w=w.sibling}throw Error(t(188))}if(c.return!==f.return)c=y,f=w;else{for(var C=!1,D=y.child;D;){if(D===c){C=!0,c=y,f=w;break}if(D===f){C=!0,f=y,c=w;break}D=D.sibling}if(!C){for(D=w.child;D;){if(D===c){C=!0,c=w,f=y;break}if(D===f){C=!0,f=w,c=y;break}D=D.sibling}if(!C)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?r:s}function ds(r){return r=Ht(r),r!==null?oa(r):null}function oa(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=oa(r);if(s!==null)return s;r=r.sibling}return null}var Fr=e.unstable_scheduleCallback,dr=e.unstable_cancelCallback,yh=e.unstable_shouldYield,xo=e.unstable_requestPaint,ut=e.unstable_now,du=e.unstable_getCurrentPriorityLevel,la=e.unstable_ImmediatePriority,ct=e.unstable_UserBlockingPriority,Bt=e.unstable_NormalPriority,fu=e.unstable_LowPriority,ua=e.unstable_IdlePriority,Et=null,pn=null;function Tp(r){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Et,r,void 0,(r.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:sk,rk=Math.log,ik=Math.LN2;function sk(r){return r>>>=0,r===0?32:31-(rk(r)/ik|0)|0}var Pp=64,Lp=4194304;function vh(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Mp(r,s){var c=r.pendingLanes;if(c===0)return 0;var f=0,y=r.suspendedLanes,w=r.pingedLanes,C=c&268435455;if(C!==0){var D=C&~y;D!==0?f=vh(D):(w&=C,w!==0&&(f=vh(w)))}else C=c&~y,C!==0?f=vh(C):w!==0&&(f=vh(w));if(f===0)return 0;if(s!==0&&s!==f&&!(s&y)&&(y=f&-f,w=s&-s,y>=w||y===16&&(w&4194240)!==0))return s;if(f&4&&(f|=c&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=f;0<s;)c=31-fr(s),y=1<<c,f|=r[c],s&=~y;return f}function ak(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ok(r,s){for(var c=r.suspendedLanes,f=r.pingedLanes,y=r.expirationTimes,w=r.pendingLanes;0<w;){var C=31-fr(w),D=1<<C,F=y[C];F===-1?(!(D&c)||D&f)&&(y[C]=ak(D,s)):F<=s&&(r.expiredLanes|=D),w&=~D}}function Hy(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function cb(){var r=Pp;return Pp<<=1,!(Pp&4194240)&&(Pp=64),r}function By(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function wh(r,s,c){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-fr(s),r[s]=c}function lk(r,s){var c=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<c;){var y=31-fr(c),w=1<<y;s[y]=0,f[y]=-1,r[y]=-1,c&=~w}}function jy(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var f=31-fr(c),y=1<<f;y&s|r[f]&s&&(r[f]|=s),c&=~y}}var ht=0;function hb(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var db,Uy,fb,pb,gb,Vy=!1,Ip=[],ca=null,ha=null,da=null,bh=new Map,Sh=new Map,fa=[],uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mb(r,s){switch(r){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":bh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sh.delete(s.pointerId)}}function Ah(r,s,c,f,y,w){return r===null||r.nativeEvent!==w?(r={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[y]},s!==null&&(s=Fh(s),s!==null&&Uy(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),r)}function ck(r,s,c,f,y){switch(s){case"focusin":return ca=Ah(ca,r,s,c,f,y),!0;case"dragenter":return ha=Ah(ha,r,s,c,f,y),!0;case"mouseover":return da=Ah(da,r,s,c,f,y),!0;case"pointerover":var w=y.pointerId;return bh.set(w,Ah(bh.get(w)||null,r,s,c,f,y)),!0;case"gotpointercapture":return w=y.pointerId,Sh.set(w,Ah(Sh.get(w)||null,r,s,c,f,y)),!0}return!1}function yb(r){var s=_o(r.target);if(s!==null){var c=At(s);if(c!==null){if(s=c.tag,s===13){if(s=wt(c),s!==null){r.blockedOn=s,gb(r.priority,function(){fb(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Dp(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=Gy(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var f=new c.constructor(c.type,c);hu=f,c.target.dispatchEvent(f),hu=null}else return s=Fh(c),s!==null&&Uy(s),r.blockedOn=c,!1;s.shift()}return!0}function vb(r,s,c){Dp(r)&&c.delete(s)}function hk(){Vy=!1,ca!==null&&Dp(ca)&&(ca=null),ha!==null&&Dp(ha)&&(ha=null),da!==null&&Dp(da)&&(da=null),bh.forEach(vb),Sh.forEach(vb)}function Eh(r,s){r.blockedOn===s&&(r.blockedOn=null,Vy||(Vy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hk)))}function xh(r){function s(y){return Eh(y,r)}if(0<Ip.length){Eh(Ip[0],r);for(var c=1;c<Ip.length;c++){var f=Ip[c];f.blockedOn===r&&(f.blockedOn=null)}}for(ca!==null&&Eh(ca,r),ha!==null&&Eh(ha,r),da!==null&&Eh(da,r),bh.forEach(s),Sh.forEach(s),c=0;c<fa.length;c++)f=fa[c],f.blockedOn===r&&(f.blockedOn=null);for(;0<fa.length&&(c=fa[0],c.blockedOn===null);)yb(c),c.blockedOn===null&&fa.shift()}var pu=I.ReactCurrentBatchConfig,Np=!0;function dk(r,s,c,f){var y=ht,w=pu.transition;pu.transition=null;try{ht=1,Wy(r,s,c,f)}finally{ht=y,pu.transition=w}}function fk(r,s,c,f){var y=ht,w=pu.transition;pu.transition=null;try{ht=4,Wy(r,s,c,f)}finally{ht=y,pu.transition=w}}function Wy(r,s,c,f){if(Np){var y=Gy(r,s,c,f);if(y===null)uv(r,s,f,Fp,c),mb(r,f);else if(ck(y,r,s,c,f))f.stopPropagation();else if(mb(r,f),s&4&&-1<uk.indexOf(r)){for(;y!==null;){var w=Fh(y);if(w!==null&&db(w),w=Gy(r,s,c,f),w===null&&uv(r,s,f,Fp,c),w===y)break;y=w}y!==null&&f.stopPropagation()}else uv(r,s,f,null,c)}}var Fp=null;function Gy(r,s,c,f){if(Fp=null,r=So(f),r=_o(r),r!==null)if(s=At(r),s===null)r=null;else if(c=s.tag,c===13){if(r=wt(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Fp=r,null}function wb(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(du()){case la:return 1;case ct:return 4;case Bt:case fu:return 16;case ua:return 536870912;default:return 16}default:return 16}}var pa=null,Xy=null,Op=null;function bb(){if(Op)return Op;var r,s=Xy,c=s.length,f,y="value"in pa?pa.value:pa.textContent,w=y.length;for(r=0;r<c&&s[r]===y[r];r++);var C=c-r;for(f=1;f<=C&&s[c-f]===y[w-f];f++);return Op=y.slice(r,1<f?1-f:void 0)}function zp(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function $p(){return!0}function Sb(){return!1}function pr(r){function s(c,f,y,w,C){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(c=r[D],this[D]=c?c(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?$p:Sb,this.isPropagationStopped=Sb,this}return re(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=$p)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=$p)},persist:function(){},isPersistent:$p}),s}var gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qy=pr(gu),_h=re({},gu,{view:0,detail:0}),pk=pr(_h),Yy,Ky,Ch,Hp=re({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jy,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ch&&(Ch&&r.type==="mousemove"?(Yy=r.screenX-Ch.screenX,Ky=r.screenY-Ch.screenY):Ky=Yy=0,Ch=r),Yy)},movementY:function(r){return"movementY"in r?r.movementY:Ky}}),Ab=pr(Hp),gk=re({},Hp,{dataTransfer:0}),mk=pr(gk),yk=re({},_h,{relatedTarget:0}),Qy=pr(yk),vk=re({},gu,{animationName:0,elapsedTime:0,pseudoElement:0}),wk=pr(vk),bk=re({},gu,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Sk=pr(bk),Ak=re({},gu,{data:0}),Eb=pr(Ak),Ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ck(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=_k[r])?!!s[r]:!1}function Jy(){return Ck}var kk=re({},_h,{key:function(r){if(r.key){var s=Ek[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=zp(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jy,charCode:function(r){return r.type==="keypress"?zp(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?zp(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Rk=pr(kk),Tk=re({},Hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xb=pr(Tk),Pk=re({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jy}),Lk=pr(Pk),Mk=re({},gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ik=pr(Mk),Dk=re({},Hp,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Nk=pr(Dk),Fk=[9,13,27,32],Zy=h&&"CompositionEvent"in window,kh=null;h&&"documentMode"in document&&(kh=document.documentMode);var Ok=h&&"TextEvent"in window&&!kh,_b=h&&(!Zy||kh&&8<kh&&11>=kh),Cb=" ",kb=!1;function Rb(r,s){switch(r){case"keyup":return Fk.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tb(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mu=!1;function zk(r,s){switch(r){case"compositionend":return Tb(s);case"keypress":return s.which!==32?null:(kb=!0,Cb);case"textInput":return r=s.data,r===Cb&&kb?null:r;default:return null}}function $k(r,s){if(mu)return r==="compositionend"||!Zy&&Rb(r,s)?(r=bb(),Op=Xy=pa=null,mu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _b&&s.locale!=="ko"?null:s.data;default:return null}}var Hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pb(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Hk[r.type]:s==="textarea"}function Lb(r,s,c,f){Ao(f),s=Wp(s,"onChange"),0<s.length&&(c=new qy("onChange","change",null,c,f),r.push({event:c,listeners:s}))}var Rh=null,Th=null;function Bk(r){Yb(r,0)}function Bp(r){var s=Su(r);if(ch(s))return r}function jk(r,s){if(r==="change")return s}var Mb=!1;if(h){var ev;if(h){var tv="oninput"in document;if(!tv){var Ib=document.createElement("div");Ib.setAttribute("oninput","return;"),tv=typeof Ib.oninput=="function"}ev=tv}else ev=!1;Mb=ev&&(!document.documentMode||9<document.documentMode)}function Db(){Rh&&(Rh.detachEvent("onpropertychange",Nb),Th=Rh=null)}function Nb(r){if(r.propertyName==="value"&&Bp(Th)){var s=[];Lb(s,Th,r,So(r)),H(Bk,s)}}function Uk(r,s,c){r==="focusin"?(Db(),Rh=s,Th=c,Rh.attachEvent("onpropertychange",Nb)):r==="focusout"&&Db()}function Vk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bp(Th)}function Wk(r,s){if(r==="click")return Bp(s)}function Gk(r,s){if(r==="input"||r==="change")return Bp(s)}function Xk(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var oi=typeof Object.is=="function"?Object.is:Xk;function Ph(r,s){if(oi(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!d.call(s,y)||!oi(r[y],s[y]))return!1}return!0}function Fb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ob(r,s){var c=Fb(r);r=0;for(var f;c;){if(c.nodeType===3){if(f=r+c.textContent.length,r<=s&&f>=s)return{node:c,offset:s-r};r=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Fb(c)}}function zb(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?zb(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function $b(){for(var r=window,s=au();s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=au(r.document)}return s}function nv(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function qk(r){var s=$b(),c=r.focusedElem,f=r.selectionRange;if(s!==c&&c&&c.ownerDocument&&zb(c.ownerDocument.documentElement,c)){if(f!==null&&nv(c)){if(s=f.start,r=f.end,r===void 0&&(r=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(r,c.value.length);else if(r=(s=c.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var y=c.textContent.length,w=Math.min(f.start,y);f=f.end===void 0?w:Math.min(f.end,y),!r.extend&&w>f&&(y=f,f=w,w=y),y=Ob(c,w);var C=Ob(c,f);y&&C&&(r.rangeCount!==1||r.anchorNode!==y.node||r.anchorOffset!==y.offset||r.focusNode!==C.node||r.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(y.node,y.offset),r.removeAllRanges(),w>f?(r.addRange(s),r.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),r.addRange(s)))}}for(s=[],r=c;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)r=s[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Yk=h&&"documentMode"in document&&11>=document.documentMode,yu=null,rv=null,Lh=null,iv=!1;function Hb(r,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;iv||yu==null||yu!==au(f)||(f=yu,"selectionStart"in f&&nv(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Lh&&Ph(Lh,f)||(Lh=f,f=Wp(rv,"onSelect"),0<f.length&&(s=new qy("onSelect","select",null,s,c),r.push({event:s,listeners:f}),s.target=yu)))}function jp(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var vu={animationend:jp("Animation","AnimationEnd"),animationiteration:jp("Animation","AnimationIteration"),animationstart:jp("Animation","AnimationStart"),transitionend:jp("Transition","TransitionEnd")},sv={},Bb={};h&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function Up(r){if(sv[r])return sv[r];if(!vu[r])return r;var s=vu[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in Bb)return sv[r]=s[c];return r}var jb=Up("animationend"),Ub=Up("animationiteration"),Vb=Up("animationstart"),Wb=Up("transitionend"),Gb=new Map,Xb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(r,s){Gb.set(r,s),o(s,[r])}for(var av=0;av<Xb.length;av++){var ov=Xb[av],Kk=ov.toLowerCase(),Qk=ov[0].toUpperCase()+ov.slice(1);ga(Kk,"on"+Qk)}ga(jb,"onAnimationEnd"),ga(Ub,"onAnimationIteration"),ga(Vb,"onAnimationStart"),ga("dblclick","onDoubleClick"),ga("focusin","onFocus"),ga("focusout","onBlur"),ga(Wb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mh));function qb(r,s,c){var f=r.type||"unknown-event";r.currentTarget=c,vt(f,s,void 0,r),r.currentTarget=null}function Yb(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var f=r[c],y=f.event;f=f.listeners;e:{var w=void 0;if(s)for(var C=f.length-1;0<=C;C--){var D=f[C],F=D.instance,V=D.currentTarget;if(D=D.listener,F!==w&&y.isPropagationStopped())break e;qb(y,D,V),w=F}else for(C=0;C<f.length;C++){if(D=f[C],F=D.instance,V=D.currentTarget,D=D.listener,F!==w&&y.isPropagationStopped())break e;qb(y,D,V),w=F}}}if(we)throw r=le,we=!1,le=null,r}function xt(r,s){var c=s[gv];c===void 0&&(c=s[gv]=new Set);var f=r+"__bubble";c.has(f)||(Kb(s,r,2,!1),c.add(f))}function lv(r,s,c){var f=0;s&&(f|=4),Kb(c,r,f,s)}var Vp="_reactListening"+Math.random().toString(36).slice(2);function Ih(r){if(!r[Vp]){r[Vp]=!0,n.forEach(function(c){c!=="selectionchange"&&(Jk.has(c)||lv(c,!1,r),lv(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Vp]||(s[Vp]=!0,lv("selectionchange",!1,s))}}function Kb(r,s,c,f){switch(wb(s)){case 1:var y=dk;break;case 4:y=fk;break;default:y=Wy}c=y.bind(null,s,c,r),y=void 0,!Q||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),f?y!==void 0?r.addEventListener(s,c,{capture:!0,passive:y}):r.addEventListener(s,c,!0):y!==void 0?r.addEventListener(s,c,{passive:y}):r.addEventListener(s,c,!1)}function uv(r,s,c,f,y){var w=f;if(!(s&1)&&!(s&2)&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var D=f.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(C===4)for(C=f.return;C!==null;){var F=C.tag;if((F===3||F===4)&&(F=C.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;C=C.return}for(;D!==null;){if(C=_o(D),C===null)return;if(F=C.tag,F===5||F===6){f=w=C;continue e}D=D.parentNode}}f=f.return}H(function(){var V=w,K=So(c),Z=[];e:{var Y=Gb.get(r);if(Y!==void 0){var he=qy,ve=r;switch(r){case"keypress":if(zp(c)===0)break e;case"keydown":case"keyup":he=Rk;break;case"focusin":ve="focus",he=Qy;break;case"focusout":ve="blur",he=Qy;break;case"beforeblur":case"afterblur":he=Qy;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Ab;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=mk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Lk;break;case jb:case Ub:case Vb:he=wk;break;case Wb:he=Ik;break;case"scroll":he=pk;break;case"wheel":he=Nk;break;case"copy":case"cut":case"paste":he=Sk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=xb}var be=(s&4)!==0,jt=!be&&r==="scroll",j=be?Y!==null?Y+"Capture":null:Y;be=[];for(var z=V,U;z!==null;){U=z;var te=U.stateNode;if(U.tag===5&&te!==null&&(U=te,j!==null&&(te=W(z,j),te!=null&&be.push(Dh(z,te,U)))),jt)break;z=z.return}0<be.length&&(Y=new he(Y,ve,null,c,K),Z.push({event:Y,listeners:be}))}}if(!(s&7)){e:{if(Y=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",Y&&c!==hu&&(ve=c.relatedTarget||c.fromElement)&&(_o(ve)||ve[fs]))break e;if((he||Y)&&(Y=K.window===K?K:(Y=K.ownerDocument)?Y.defaultView||Y.parentWindow:window,he?(ve=c.relatedTarget||c.toElement,he=V,ve=ve?_o(ve):null,ve!==null&&(jt=At(ve),ve!==jt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(he=null,ve=V),he!==ve)){if(be=Ab,te="onMouseLeave",j="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(be=xb,te="onPointerLeave",j="onPointerEnter",z="pointer"),jt=he==null?Y:Su(he),U=ve==null?Y:Su(ve),Y=new be(te,z+"leave",he,c,K),Y.target=jt,Y.relatedTarget=U,te=null,_o(K)===V&&(be=new be(j,z+"enter",ve,c,K),be.target=U,be.relatedTarget=jt,te=be),jt=te,he&&ve)t:{for(be=he,j=ve,z=0,U=be;U;U=wu(U))z++;for(U=0,te=j;te;te=wu(te))U++;for(;0<z-U;)be=wu(be),z--;for(;0<U-z;)j=wu(j),U--;for(;z--;){if(be===j||j!==null&&be===j.alternate)break t;be=wu(be),j=wu(j)}be=null}else be=null;he!==null&&Qb(Z,Y,he,be,!1),ve!==null&&jt!==null&&Qb(Z,jt,ve,be,!0)}}e:{if(Y=V?Su(V):window,he=Y.nodeName&&Y.nodeName.toLowerCase(),he==="select"||he==="input"&&Y.type==="file")var Se=jk;else if(Pb(Y))if(Mb)Se=Gk;else{Se=Vk;var Re=Uk}else(he=Y.nodeName)&&he.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(Se=Wk);if(Se&&(Se=Se(r,V))){Lb(Z,Se,c,K);break e}Re&&Re(r,Y,V),r==="focusout"&&(Re=Y._wrapperState)&&Re.controlled&&Y.type==="number"&&hh(Y,"number",Y.value)}switch(Re=V?Su(V):window,r){case"focusin":(Pb(Re)||Re.contentEditable==="true")&&(yu=Re,rv=V,Lh=null);break;case"focusout":Lh=rv=yu=null;break;case"mousedown":iv=!0;break;case"contextmenu":case"mouseup":case"dragend":iv=!1,Hb(Z,c,K);break;case"selectionchange":if(Yk)break;case"keydown":case"keyup":Hb(Z,c,K)}var Te;if(Zy)e:{switch(r){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else mu?Rb(r,c)&&(De="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(De="onCompositionStart");De&&(_b&&c.locale!=="ko"&&(mu||De!=="onCompositionStart"?De==="onCompositionEnd"&&mu&&(Te=bb()):(pa=K,Xy="value"in pa?pa.value:pa.textContent,mu=!0)),Re=Wp(V,De),0<Re.length&&(De=new Eb(De,r,null,c,K),Z.push({event:De,listeners:Re}),Te?De.data=Te:(Te=Tb(c),Te!==null&&(De.data=Te)))),(Te=Ok?zk(r,c):$k(r,c))&&(V=Wp(V,"onBeforeInput"),0<V.length&&(K=new Eb("onBeforeInput","beforeinput",null,c,K),Z.push({event:K,listeners:V}),K.data=Te))}Yb(Z,s)})}function Dh(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Wp(r,s){for(var c=s+"Capture",f=[];r!==null;){var y=r,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=W(r,c),w!=null&&f.unshift(Dh(r,w,y)),w=W(r,s),w!=null&&f.push(Dh(r,w,y))),r=r.return}return f}function wu(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Qb(r,s,c,f,y){for(var w=s._reactName,C=[];c!==null&&c!==f;){var D=c,F=D.alternate,V=D.stateNode;if(F!==null&&F===f)break;D.tag===5&&V!==null&&(D=V,y?(F=W(c,w),F!=null&&C.unshift(Dh(c,F,D))):y||(F=W(c,w),F!=null&&C.push(Dh(c,F,D)))),c=c.return}C.length!==0&&r.push({event:s,listeners:C})}var Zk=/\r\n?/g,eR=/\u0000|\uFFFD/g;function Jb(r){return(typeof r=="string"?r:""+r).replace(Zk,`
`).replace(eR,"")}function Gp(r,s,c){if(s=Jb(s),Jb(r)!==s&&c)throw Error(t(425))}function Xp(){}var cv=null,hv=null;function dv(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fv=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,Zb=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof Zb<"u"?function(r){return Zb.resolve(null).then(r).catch(rR)}:fv;function rR(r){setTimeout(function(){throw r})}function pv(r,s){var c=s,f=0;do{var y=c.nextSibling;if(r.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(f===0){r.removeChild(y),xh(s);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=y}while(c);xh(s)}function ma(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function eS(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return r;s--}else c==="/$"&&s++}r=r.previousSibling}return null}var bu=Math.random().toString(36).slice(2),Ii="__reactFiber$"+bu,Nh="__reactProps$"+bu,fs="__reactContainer$"+bu,gv="__reactEvents$"+bu,iR="__reactListeners$"+bu,sR="__reactHandles$"+bu;function _o(r){var s=r[Ii];if(s)return s;for(var c=r.parentNode;c;){if(s=c[fs]||c[Ii]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=eS(r);r!==null;){if(c=r[Ii])return c;r=eS(r)}return s}r=c,c=r.parentNode}return null}function Fh(r){return r=r[Ii]||r[fs],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Su(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function qp(r){return r[Nh]||null}var mv=[],Au=-1;function ya(r){return{current:r}}function _t(r){0>Au||(r.current=mv[Au],mv[Au]=null,Au--)}function bt(r,s){Au++,mv[Au]=r.current,r.current=s}var va={},_n=ya(va),Qn=ya(!1),Co=va;function Eu(r,s){var c=r.type.contextTypes;if(!c)return va;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=s[w];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=y),y}function Jn(r){return r=r.childContextTypes,r!=null}function Yp(){_t(Qn),_t(_n)}function tS(r,s,c){if(_n.current!==va)throw Error(t(168));bt(_n,s),bt(Qn,c)}function nS(r,s,c){var f=r.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var y in f)if(!(y in s))throw Error(t(108,Ce(r)||"Unknown",y));return re({},c,f)}function Kp(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||va,Co=_n.current,bt(_n,r),bt(Qn,Qn.current),!0}function rS(r,s,c){var f=r.stateNode;if(!f)throw Error(t(169));c?(r=nS(r,s,Co),f.__reactInternalMemoizedMergedChildContext=r,_t(Qn),_t(_n),bt(_n,r)):_t(Qn),bt(Qn,c)}var ps=null,Qp=!1,yv=!1;function iS(r){ps===null?ps=[r]:ps.push(r)}function aR(r){Qp=!0,iS(r)}function wa(){if(!yv&&ps!==null){yv=!0;var r=0,s=ht;try{var c=ps;for(ht=1;r<c.length;r++){var f=c[r];do f=f(!0);while(f!==null)}ps=null,Qp=!1}catch(y){throw ps!==null&&(ps=ps.slice(r+1)),Fr(la,wa),y}finally{ht=s,yv=!1}}return null}var xu=[],_u=0,Jp=null,Zp=0,Or=[],zr=0,ko=null,gs=1,ms="";function Ro(r,s){xu[_u++]=Zp,xu[_u++]=Jp,Jp=r,Zp=s}function sS(r,s,c){Or[zr++]=gs,Or[zr++]=ms,Or[zr++]=ko,ko=r;var f=gs;r=ms;var y=32-fr(f)-1;f&=~(1<<y),c+=1;var w=32-fr(s)+y;if(30<w){var C=y-y%5;w=(f&(1<<C)-1).toString(32),f>>=C,y-=C,gs=1<<32-fr(s)+y|c<<y|f,ms=w+r}else gs=1<<w|c<<y|f,ms=r}function vv(r){r.return!==null&&(Ro(r,1),sS(r,1,0))}function wv(r){for(;r===Jp;)Jp=xu[--_u],xu[_u]=null,Zp=xu[--_u],xu[_u]=null;for(;r===ko;)ko=Or[--zr],Or[zr]=null,ms=Or[--zr],Or[zr]=null,gs=Or[--zr],Or[zr]=null}var gr=null,mr=null,kt=!1,li=null;function aS(r,s){var c=jr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=r,s=r.deletions,s===null?(r.deletions=[c],r.flags|=16):s.push(c)}function oS(r,s){switch(r.tag){case 5:var c=r.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,gr=r,mr=ma(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,gr=r,mr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=ko!==null?{id:gs,overflow:ms}:null,r.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=jr(18,null,null,0),c.stateNode=s,c.return=r,r.child=c,gr=r,mr=null,!0):!1;default:return!1}}function bv(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Sv(r){if(kt){var s=mr;if(s){var c=s;if(!oS(r,s)){if(bv(r))throw Error(t(418));s=ma(c.nextSibling);var f=gr;s&&oS(r,s)?aS(f,c):(r.flags=r.flags&-4097|2,kt=!1,gr=r)}}else{if(bv(r))throw Error(t(418));r.flags=r.flags&-4097|2,kt=!1,gr=r}}}function lS(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;gr=r}function eg(r){if(r!==gr)return!1;if(!kt)return lS(r),kt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!dv(r.type,r.memoizedProps)),s&&(s=mr)){if(bv(r))throw uS(),Error(t(418));for(;s;)aS(r,s),s=ma(s.nextSibling)}if(lS(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(s===0){mr=ma(r.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}r=r.nextSibling}mr=null}}else mr=gr?ma(r.stateNode.nextSibling):null;return!0}function uS(){for(var r=mr;r;)r=ma(r.nextSibling)}function Cu(){mr=gr=null,kt=!1}function Av(r){li===null?li=[r]:li.push(r)}var oR=I.ReactCurrentBatchConfig;function Oh(r,s,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,r));var y=f,w=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===w?s.ref:(s=function(C){var D=y.refs;C===null?delete D[w]:D[w]=C},s._stringRef=w,s)}if(typeof r!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,r))}return r}function tg(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function cS(r){var s=r._init;return s(r._payload)}function hS(r){function s(j,z){if(r){var U=j.deletions;U===null?(j.deletions=[z],j.flags|=16):U.push(z)}}function c(j,z){if(!r)return null;for(;z!==null;)s(j,z),z=z.sibling;return null}function f(j,z){for(j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function y(j,z){return j=ka(j,z),j.index=0,j.sibling=null,j}function w(j,z,U){return j.index=U,r?(U=j.alternate,U!==null?(U=U.index,U<z?(j.flags|=2,z):U):(j.flags|=2,z)):(j.flags|=1048576,z)}function C(j){return r&&j.alternate===null&&(j.flags|=2),j}function D(j,z,U,te){return z===null||z.tag!==6?(z=f0(U,j.mode,te),z.return=j,z):(z=y(z,U),z.return=j,z)}function F(j,z,U,te){var Se=U.type;return Se===N?K(j,z,U.props.children,te,U.key):z!==null&&(z.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===J&&cS(Se)===z.type)?(te=y(z,U.props),te.ref=Oh(j,z,U),te.return=j,te):(te=_g(U.type,U.key,U.props,null,j.mode,te),te.ref=Oh(j,z,U),te.return=j,te)}function V(j,z,U,te){return z===null||z.tag!==4||z.stateNode.containerInfo!==U.containerInfo||z.stateNode.implementation!==U.implementation?(z=p0(U,j.mode,te),z.return=j,z):(z=y(z,U.children||[]),z.return=j,z)}function K(j,z,U,te,Se){return z===null||z.tag!==7?(z=Fo(U,j.mode,te,Se),z.return=j,z):(z=y(z,U),z.return=j,z)}function Z(j,z,U){if(typeof z=="string"&&z!==""||typeof z=="number")return z=f0(""+z,j.mode,U),z.return=j,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return U=_g(z.type,z.key,z.props,null,j.mode,U),U.ref=Oh(j,null,z),U.return=j,U;case T:return z=p0(z,j.mode,U),z.return=j,z;case J:var te=z._init;return Z(j,te(z._payload),U)}if(vo(z)||fe(z))return z=Fo(z,j.mode,U,null),z.return=j,z;tg(j,z)}return null}function Y(j,z,U,te){var Se=z!==null?z.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return Se!==null?null:D(j,z,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case L:return U.key===Se?F(j,z,U,te):null;case T:return U.key===Se?V(j,z,U,te):null;case J:return Se=U._init,Y(j,z,Se(U._payload),te)}if(vo(U)||fe(U))return Se!==null?null:K(j,z,U,te,null);tg(j,U)}return null}function he(j,z,U,te,Se){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(U)||null,D(z,j,""+te,Se);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return j=j.get(te.key===null?U:te.key)||null,F(z,j,te,Se);case T:return j=j.get(te.key===null?U:te.key)||null,V(z,j,te,Se);case J:var Re=te._init;return he(j,z,U,Re(te._payload),Se)}if(vo(te)||fe(te))return j=j.get(U)||null,K(z,j,te,Se,null);tg(z,te)}return null}function ve(j,z,U,te){for(var Se=null,Re=null,Te=z,De=z=0,on=null;Te!==null&&De<U.length;De++){Te.index>De?(on=Te,Te=null):on=Te.sibling;var et=Y(j,Te,U[De],te);if(et===null){Te===null&&(Te=on);break}r&&Te&&et.alternate===null&&s(j,Te),z=w(et,z,De),Re===null?Se=et:Re.sibling=et,Re=et,Te=on}if(De===U.length)return c(j,Te),kt&&Ro(j,De),Se;if(Te===null){for(;De<U.length;De++)Te=Z(j,U[De],te),Te!==null&&(z=w(Te,z,De),Re===null?Se=Te:Re.sibling=Te,Re=Te);return kt&&Ro(j,De),Se}for(Te=f(j,Te);De<U.length;De++)on=he(Te,j,De,U[De],te),on!==null&&(r&&on.alternate!==null&&Te.delete(on.key===null?De:on.key),z=w(on,z,De),Re===null?Se=on:Re.sibling=on,Re=on);return r&&Te.forEach(function(Ra){return s(j,Ra)}),kt&&Ro(j,De),Se}function be(j,z,U,te){var Se=fe(U);if(typeof Se!="function")throw Error(t(150));if(U=Se.call(U),U==null)throw Error(t(151));for(var Re=Se=null,Te=z,De=z=0,on=null,et=U.next();Te!==null&&!et.done;De++,et=U.next()){Te.index>De?(on=Te,Te=null):on=Te.sibling;var Ra=Y(j,Te,et.value,te);if(Ra===null){Te===null&&(Te=on);break}r&&Te&&Ra.alternate===null&&s(j,Te),z=w(Ra,z,De),Re===null?Se=Ra:Re.sibling=Ra,Re=Ra,Te=on}if(et.done)return c(j,Te),kt&&Ro(j,De),Se;if(Te===null){for(;!et.done;De++,et=U.next())et=Z(j,et.value,te),et!==null&&(z=w(et,z,De),Re===null?Se=et:Re.sibling=et,Re=et);return kt&&Ro(j,De),Se}for(Te=f(j,Te);!et.done;De++,et=U.next())et=he(Te,j,De,et.value,te),et!==null&&(r&&et.alternate!==null&&Te.delete(et.key===null?De:et.key),z=w(et,z,De),Re===null?Se=et:Re.sibling=et,Re=et);return r&&Te.forEach(function(HR){return s(j,HR)}),kt&&Ro(j,De),Se}function jt(j,z,U,te){if(typeof U=="object"&&U!==null&&U.type===N&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case L:e:{for(var Se=U.key,Re=z;Re!==null;){if(Re.key===Se){if(Se=U.type,Se===N){if(Re.tag===7){c(j,Re.sibling),z=y(Re,U.props.children),z.return=j,j=z;break e}}else if(Re.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===J&&cS(Se)===Re.type){c(j,Re.sibling),z=y(Re,U.props),z.ref=Oh(j,Re,U),z.return=j,j=z;break e}c(j,Re);break}else s(j,Re);Re=Re.sibling}U.type===N?(z=Fo(U.props.children,j.mode,te,U.key),z.return=j,j=z):(te=_g(U.type,U.key,U.props,null,j.mode,te),te.ref=Oh(j,z,U),te.return=j,j=te)}return C(j);case T:e:{for(Re=U.key;z!==null;){if(z.key===Re)if(z.tag===4&&z.stateNode.containerInfo===U.containerInfo&&z.stateNode.implementation===U.implementation){c(j,z.sibling),z=y(z,U.children||[]),z.return=j,j=z;break e}else{c(j,z);break}else s(j,z);z=z.sibling}z=p0(U,j.mode,te),z.return=j,j=z}return C(j);case J:return Re=U._init,jt(j,z,Re(U._payload),te)}if(vo(U))return ve(j,z,U,te);if(fe(U))return be(j,z,U,te);tg(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,z!==null&&z.tag===6?(c(j,z.sibling),z=y(z,U),z.return=j,j=z):(c(j,z),z=f0(U,j.mode,te),z.return=j,j=z),C(j)):c(j,z)}return jt}var ku=hS(!0),dS=hS(!1),ng=ya(null),rg=null,Ru=null,Ev=null;function xv(){Ev=Ru=rg=null}function _v(r){var s=ng.current;_t(ng),r._currentValue=s}function Cv(r,s,c){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===c)break;r=r.return}}function Tu(r,s){rg=r,Ev=Ru=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(Zn=!0),r.firstContext=null)}function $r(r){var s=r._currentValue;if(Ev!==r)if(r={context:r,memoizedValue:s,next:null},Ru===null){if(rg===null)throw Error(t(308));Ru=r,rg.dependencies={lanes:0,firstContext:r}}else Ru=Ru.next=r;return s}var To=null;function kv(r){To===null?To=[r]:To.push(r)}function fS(r,s,c,f){var y=s.interleaved;return y===null?(c.next=c,kv(s)):(c.next=y.next,y.next=c),s.interleaved=c,ys(r,f)}function ys(r,s){r.lanes|=s;var c=r.alternate;for(c!==null&&(c.lanes|=s),c=r,r=r.return;r!==null;)r.childLanes|=s,c=r.alternate,c!==null&&(c.childLanes|=s),c=r,r=r.return;return c.tag===3?c.stateNode:null}var ba=!1;function Rv(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pS(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function vs(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Sa(r,s,c){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,Je&2){var y=f.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),f.pending=s,ys(r,c)}return y=f.interleaved,y===null?(s.next=s,kv(f)):(s.next=y.next,y.next=s),f.interleaved=s,ys(r,c)}function ig(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,jy(r,c)}}function gS(r,s){var c=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=C:w=w.next=C,c=c.next}while(c!==null);w===null?y=w=s:w=w.next=s}else y=w=s;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:f.shared,effects:f.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}function sg(r,s,c,f){var y=r.updateQueue;ba=!1;var w=y.firstBaseUpdate,C=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,V=F.next;F.next=null,C===null?w=V:C.next=V,C=F;var K=r.alternate;K!==null&&(K=K.updateQueue,D=K.lastBaseUpdate,D!==C&&(D===null?K.firstBaseUpdate=V:D.next=V,K.lastBaseUpdate=F))}if(w!==null){var Z=y.baseState;C=0,K=V=F=null,D=w;do{var Y=D.lane,he=D.eventTime;if((f&Y)===Y){K!==null&&(K=K.next={eventTime:he,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var ve=r,be=D;switch(Y=s,he=c,be.tag){case 1:if(ve=be.payload,typeof ve=="function"){Z=ve.call(he,Z,Y);break e}Z=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=be.payload,Y=typeof ve=="function"?ve.call(he,Z,Y):ve,Y==null)break e;Z=re({},Z,Y);break e;case 2:ba=!0}}D.callback!==null&&D.lane!==0&&(r.flags|=64,Y=y.effects,Y===null?y.effects=[D]:Y.push(D))}else he={eventTime:he,lane:Y,tag:D.tag,payload:D.payload,callback:D.callback,next:null},K===null?(V=K=he,F=Z):K=K.next=he,C|=Y;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;Y=D,D=Y.next,Y.next=null,y.lastBaseUpdate=Y,y.shared.pending=null}}while(!0);if(K===null&&(F=Z),y.baseState=F,y.firstBaseUpdate=V,y.lastBaseUpdate=K,s=y.shared.interleaved,s!==null){y=s;do C|=y.lane,y=y.next;while(y!==s)}else w===null&&(y.shared.lanes=0);Mo|=C,r.lanes=C,r.memoizedState=Z}}function mS(r,s,c){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var f=r[s],y=f.callback;if(y!==null){if(f.callback=null,f=c,typeof y!="function")throw Error(t(191,y));y.call(f)}}}var zh={},Di=ya(zh),$h=ya(zh),Hh=ya(zh);function Po(r){if(r===zh)throw Error(t(174));return r}function Tv(r,s){switch(bt(Hh,s),bt($h,r),bt(Di,zh),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:hr(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=hr(s,r)}_t(Di),bt(Di,s)}function Pu(){_t(Di),_t($h),_t(Hh)}function yS(r){Po(Hh.current);var s=Po(Di.current),c=hr(s,r.type);s!==c&&(bt($h,r),bt(Di,c))}function Pv(r){$h.current===r&&(_t(Di),_t($h))}var Lt=ya(0);function ag(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Lv=[];function Mv(){for(var r=0;r<Lv.length;r++)Lv[r]._workInProgressVersionPrimary=null;Lv.length=0}var og=I.ReactCurrentDispatcher,Iv=I.ReactCurrentBatchConfig,Lo=0,Mt=null,Qt=null,sn=null,lg=!1,Bh=!1,jh=0,lR=0;function Cn(){throw Error(t(321))}function Dv(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!oi(r[c],s[c]))return!1;return!0}function Nv(r,s,c,f,y,w){if(Lo=w,Mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,og.current=r===null||r.memoizedState===null?dR:fR,r=c(f,y),Bh){w=0;do{if(Bh=!1,jh=0,25<=w)throw Error(t(301));w+=1,sn=Qt=null,s.updateQueue=null,og.current=pR,r=c(f,y)}while(Bh)}if(og.current=hg,s=Qt!==null&&Qt.next!==null,Lo=0,sn=Qt=Mt=null,lg=!1,s)throw Error(t(300));return r}function Fv(){var r=jh!==0;return jh=0,r}function Ni(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Mt.memoizedState=sn=r:sn=sn.next=r,sn}function Hr(){if(Qt===null){var r=Mt.alternate;r=r!==null?r.memoizedState:null}else r=Qt.next;var s=sn===null?Mt.memoizedState:sn.next;if(s!==null)sn=s,Qt=r;else{if(r===null)throw Error(t(310));Qt=r,r={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},sn===null?Mt.memoizedState=sn=r:sn=sn.next=r}return sn}function Uh(r,s){return typeof s=="function"?s(r):s}function Ov(r){var s=Hr(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var f=Qt,y=f.baseQueue,w=c.pending;if(w!==null){if(y!==null){var C=y.next;y.next=w.next,w.next=C}f.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,f=f.baseState;var D=C=null,F=null,V=w;do{var K=V.lane;if((Lo&K)===K)F!==null&&(F=F.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),f=V.hasEagerState?V.eagerState:r(f,V.action);else{var Z={lane:K,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};F===null?(D=F=Z,C=f):F=F.next=Z,Mt.lanes|=K,Mo|=K}V=V.next}while(V!==null&&V!==w);F===null?C=f:F.next=D,oi(f,s.memoizedState)||(Zn=!0),s.memoizedState=f,s.baseState=C,s.baseQueue=F,c.lastRenderedState=f}if(r=c.interleaved,r!==null){y=r;do w=y.lane,Mt.lanes|=w,Mo|=w,y=y.next;while(y!==r)}else y===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function zv(r){var s=Hr(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=r;var f=c.dispatch,y=c.pending,w=s.memoizedState;if(y!==null){c.pending=null;var C=y=y.next;do w=r(w,C.action),C=C.next;while(C!==y);oi(w,s.memoizedState)||(Zn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,f]}function vS(){}function wS(r,s){var c=Mt,f=Hr(),y=s(),w=!oi(f.memoizedState,y);if(w&&(f.memoizedState=y,Zn=!0),f=f.queue,$v(AS.bind(null,c,f,r),[r]),f.getSnapshot!==s||w||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Vh(9,SS.bind(null,c,f,y,s),void 0,null),an===null)throw Error(t(349));Lo&30||bS(c,s,y)}return y}function bS(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=Mt.updateQueue,s===null?(s={lastEffect:null,stores:null},Mt.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function SS(r,s,c,f){s.value=c,s.getSnapshot=f,ES(s)&&xS(r)}function AS(r,s,c){return c(function(){ES(s)&&xS(r)})}function ES(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!oi(r,c)}catch{return!0}}function xS(r){var s=ys(r,1);s!==null&&di(s,r,1,-1)}function _S(r){var s=Ni();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:r},s.queue=r,r=r.dispatch=hR.bind(null,Mt,r),[s.memoizedState,r]}function Vh(r,s,c,f){return r={tag:r,create:s,destroy:c,deps:f,next:null},s=Mt.updateQueue,s===null?(s={lastEffect:null,stores:null},Mt.updateQueue=s,s.lastEffect=r.next=r):(c=s.lastEffect,c===null?s.lastEffect=r.next=r:(f=c.next,c.next=r,r.next=f,s.lastEffect=r)),r}function CS(){return Hr().memoizedState}function ug(r,s,c,f){var y=Ni();Mt.flags|=r,y.memoizedState=Vh(1|s,c,void 0,f===void 0?null:f)}function cg(r,s,c,f){var y=Hr();f=f===void 0?null:f;var w=void 0;if(Qt!==null){var C=Qt.memoizedState;if(w=C.destroy,f!==null&&Dv(f,C.deps)){y.memoizedState=Vh(s,c,w,f);return}}Mt.flags|=r,y.memoizedState=Vh(1|s,c,w,f)}function kS(r,s){return ug(8390656,8,r,s)}function $v(r,s){return cg(2048,8,r,s)}function RS(r,s){return cg(4,2,r,s)}function TS(r,s){return cg(4,4,r,s)}function PS(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function LS(r,s,c){return c=c!=null?c.concat([r]):null,cg(4,4,PS.bind(null,s,r),c)}function Hv(){}function MS(r,s){var c=Hr();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&Dv(s,f[1])?f[0]:(c.memoizedState=[r,s],r)}function IS(r,s){var c=Hr();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&Dv(s,f[1])?f[0]:(r=r(),c.memoizedState=[r,s],r)}function DS(r,s,c){return Lo&21?(oi(c,s)||(c=cb(),Mt.lanes|=c,Mo|=c,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,Zn=!0),r.memoizedState=c)}function uR(r,s){var c=ht;ht=c!==0&&4>c?c:4,r(!0);var f=Iv.transition;Iv.transition={};try{r(!1),s()}finally{ht=c,Iv.transition=f}}function NS(){return Hr().memoizedState}function cR(r,s,c){var f=_a(r);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},FS(r))OS(s,c);else if(c=fS(r,s,c,f),c!==null){var y=Hn();di(c,r,f,y),zS(c,s,f)}}function hR(r,s,c){var f=_a(r),y={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(FS(r))OS(s,y);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var C=s.lastRenderedState,D=w(C,c);if(y.hasEagerState=!0,y.eagerState=D,oi(D,C)){var F=s.interleaved;F===null?(y.next=y,kv(s)):(y.next=F.next,F.next=y),s.interleaved=y;return}}catch{}finally{}c=fS(r,s,y,f),c!==null&&(y=Hn(),di(c,r,f,y),zS(c,s,f))}}function FS(r){var s=r.alternate;return r===Mt||s!==null&&s===Mt}function OS(r,s){Bh=lg=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function zS(r,s,c){if(c&4194240){var f=s.lanes;f&=r.pendingLanes,c|=f,s.lanes=c,jy(r,c)}}var hg={readContext:$r,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},dR={readContext:$r,useCallback:function(r,s){return Ni().memoizedState=[r,s===void 0?null:s],r},useContext:$r,useEffect:kS,useImperativeHandle:function(r,s,c){return c=c!=null?c.concat([r]):null,ug(4194308,4,PS.bind(null,s,r),c)},useLayoutEffect:function(r,s){return ug(4194308,4,r,s)},useInsertionEffect:function(r,s){return ug(4,2,r,s)},useMemo:function(r,s){var c=Ni();return s=s===void 0?null:s,r=r(),c.memoizedState=[r,s],r},useReducer:function(r,s,c){var f=Ni();return s=c!==void 0?c(s):s,f.memoizedState=f.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},f.queue=r,r=r.dispatch=cR.bind(null,Mt,r),[f.memoizedState,r]},useRef:function(r){var s=Ni();return r={current:r},s.memoizedState=r},useState:_S,useDebugValue:Hv,useDeferredValue:function(r){return Ni().memoizedState=r},useTransition:function(){var r=_S(!1),s=r[0];return r=uR.bind(null,r[1]),Ni().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,c){var f=Mt,y=Ni();if(kt){if(c===void 0)throw Error(t(407));c=c()}else{if(c=s(),an===null)throw Error(t(349));Lo&30||bS(f,s,c)}y.memoizedState=c;var w={value:c,getSnapshot:s};return y.queue=w,kS(AS.bind(null,f,w,r),[r]),f.flags|=2048,Vh(9,SS.bind(null,f,w,c,s),void 0,null),c},useId:function(){var r=Ni(),s=an.identifierPrefix;if(kt){var c=ms,f=gs;c=(f&~(1<<32-fr(f)-1)).toString(32)+c,s=":"+s+"R"+c,c=jh++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=lR++,s=":"+s+"r"+c.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},fR={readContext:$r,useCallback:MS,useContext:$r,useEffect:$v,useImperativeHandle:LS,useInsertionEffect:RS,useLayoutEffect:TS,useMemo:IS,useReducer:Ov,useRef:CS,useState:function(){return Ov(Uh)},useDebugValue:Hv,useDeferredValue:function(r){var s=Hr();return DS(s,Qt.memoizedState,r)},useTransition:function(){var r=Ov(Uh)[0],s=Hr().memoizedState;return[r,s]},useMutableSource:vS,useSyncExternalStore:wS,useId:NS,unstable_isNewReconciler:!1},pR={readContext:$r,useCallback:MS,useContext:$r,useEffect:$v,useImperativeHandle:LS,useInsertionEffect:RS,useLayoutEffect:TS,useMemo:IS,useReducer:zv,useRef:CS,useState:function(){return zv(Uh)},useDebugValue:Hv,useDeferredValue:function(r){var s=Hr();return Qt===null?s.memoizedState=r:DS(s,Qt.memoizedState,r)},useTransition:function(){var r=zv(Uh)[0],s=Hr().memoizedState;return[r,s]},useMutableSource:vS,useSyncExternalStore:wS,useId:NS,unstable_isNewReconciler:!1};function ui(r,s){if(r&&r.defaultProps){s=re({},s),r=r.defaultProps;for(var c in r)s[c]===void 0&&(s[c]=r[c]);return s}return s}function Bv(r,s,c,f){s=r.memoizedState,c=c(f,s),c=c==null?s:re({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var dg={isMounted:function(r){return(r=r._reactInternals)?At(r)===r:!1},enqueueSetState:function(r,s,c){r=r._reactInternals;var f=Hn(),y=_a(r),w=vs(f,y);w.payload=s,c!=null&&(w.callback=c),s=Sa(r,w,y),s!==null&&(di(s,r,y,f),ig(s,r,y))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var f=Hn(),y=_a(r),w=vs(f,y);w.tag=1,w.payload=s,c!=null&&(w.callback=c),s=Sa(r,w,y),s!==null&&(di(s,r,y,f),ig(s,r,y))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=Hn(),f=_a(r),y=vs(c,f);y.tag=2,s!=null&&(y.callback=s),s=Sa(r,y,f),s!==null&&(di(s,r,f,c),ig(s,r,f))}};function $S(r,s,c,f,y,w,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,w,C):s.prototype&&s.prototype.isPureReactComponent?!Ph(c,f)||!Ph(y,w):!0}function HS(r,s,c){var f=!1,y=va,w=s.contextType;return typeof w=="object"&&w!==null?w=$r(w):(y=Jn(s)?Co:_n.current,f=s.contextTypes,w=(f=f!=null)?Eu(r,y):va),s=new s(c,w),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=dg,r.stateNode=s,s._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=y,r.__reactInternalMemoizedMaskedChildContext=w),s}function BS(r,s,c,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==r&&dg.enqueueReplaceState(s,s.state,null)}function jv(r,s,c,f){var y=r.stateNode;y.props=c,y.state=r.memoizedState,y.refs={},Rv(r);var w=s.contextType;typeof w=="object"&&w!==null?y.context=$r(w):(w=Jn(s)?Co:_n.current,y.context=Eu(r,w)),y.state=r.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(Bv(r,s,w,c),y.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(s=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),s!==y.state&&dg.enqueueReplaceState(y,y.state,null),sg(r,c,y,f),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308)}function Lu(r,s){try{var c="",f=s;do c+=Oe(f),f=f.return;while(f);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:r,source:s,stack:y,digest:null}}function Uv(r,s,c){return{value:r,source:null,stack:c??null,digest:s??null}}function Vv(r,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var gR=typeof WeakMap=="function"?WeakMap:Map;function jS(r,s,c){c=vs(-1,c),c.tag=3,c.payload={element:null};var f=s.value;return c.callback=function(){wg||(wg=!0,s0=f),Vv(r,s)},c}function US(r,s,c){c=vs(-1,c),c.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var y=s.value;c.payload=function(){return f(y)},c.callback=function(){Vv(r,s)}}var w=r.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Vv(r,s),typeof f!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})}),c}function VS(r,s,c){var f=r.pingCache;if(f===null){f=r.pingCache=new gR;var y=new Set;f.set(s,y)}else y=f.get(s),y===void 0&&(y=new Set,f.set(s,y));y.has(c)||(y.add(c),r=TR.bind(null,r,s,c),s.then(r,r))}function WS(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function GS(r,s,c,f,y){return r.mode&1?(r.flags|=65536,r.lanes=y,r):(r===s?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=vs(-1,1),s.tag=2,Sa(c,s,1))),c.lanes|=1),r)}var mR=I.ReactCurrentOwner,Zn=!1;function $n(r,s,c,f){s.child=r===null?dS(s,null,c,f):ku(s,r.child,c,f)}function XS(r,s,c,f,y){c=c.render;var w=s.ref;return Tu(s,y),f=Nv(r,s,c,f,w,y),c=Fv(),r!==null&&!Zn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~y,ws(r,s,y)):(kt&&c&&vv(s),s.flags|=1,$n(r,s,f,y),s.child)}function qS(r,s,c,f,y){if(r===null){var w=c.type;return typeof w=="function"&&!d0(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=w,YS(r,s,w,f,y)):(r=_g(c.type,null,f,s,s.mode,y),r.ref=s.ref,r.return=s,s.child=r)}if(w=r.child,!(r.lanes&y)){var C=w.memoizedProps;if(c=c.compare,c=c!==null?c:Ph,c(C,f)&&r.ref===s.ref)return ws(r,s,y)}return s.flags|=1,r=ka(w,f),r.ref=s.ref,r.return=s,s.child=r}function YS(r,s,c,f,y){if(r!==null){var w=r.memoizedProps;if(Ph(w,f)&&r.ref===s.ref)if(Zn=!1,s.pendingProps=f=w,(r.lanes&y)!==0)r.flags&131072&&(Zn=!0);else return s.lanes=r.lanes,ws(r,s,y)}return Wv(r,s,c,f,y)}function KS(r,s,c){var f=s.pendingProps,y=f.children,w=r!==null?r.memoizedState:null;if(f.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(Iu,yr),yr|=c;else{if(!(c&1073741824))return r=w!==null?w.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,bt(Iu,yr),yr|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,bt(Iu,yr),yr|=f}else w!==null?(f=w.baseLanes|c,s.memoizedState=null):f=c,bt(Iu,yr),yr|=f;return $n(r,s,y,c),s.child}function QS(r,s){var c=s.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function Wv(r,s,c,f,y){var w=Jn(c)?Co:_n.current;return w=Eu(s,w),Tu(s,y),c=Nv(r,s,c,f,w,y),f=Fv(),r!==null&&!Zn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~y,ws(r,s,y)):(kt&&f&&vv(s),s.flags|=1,$n(r,s,c,y),s.child)}function JS(r,s,c,f,y){if(Jn(c)){var w=!0;Kp(s)}else w=!1;if(Tu(s,y),s.stateNode===null)pg(r,s),HS(s,c,f),jv(s,c,f,y),f=!0;else if(r===null){var C=s.stateNode,D=s.memoizedProps;C.props=D;var F=C.context,V=c.contextType;typeof V=="object"&&V!==null?V=$r(V):(V=Jn(c)?Co:_n.current,V=Eu(s,V));var K=c.getDerivedStateFromProps,Z=typeof K=="function"||typeof C.getSnapshotBeforeUpdate=="function";Z||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==f||F!==V)&&BS(s,C,f,V),ba=!1;var Y=s.memoizedState;C.state=Y,sg(s,f,C,y),F=s.memoizedState,D!==f||Y!==F||Qn.current||ba?(typeof K=="function"&&(Bv(s,c,K,f),F=s.memoizedState),(D=ba||$S(s,c,D,f,Y,F,V))?(Z||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=F),C.props=f,C.state=F,C.context=V,f=D):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{C=s.stateNode,pS(r,s),D=s.memoizedProps,V=s.type===s.elementType?D:ui(s.type,D),C.props=V,Z=s.pendingProps,Y=C.context,F=c.contextType,typeof F=="object"&&F!==null?F=$r(F):(F=Jn(c)?Co:_n.current,F=Eu(s,F));var he=c.getDerivedStateFromProps;(K=typeof he=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==Z||Y!==F)&&BS(s,C,f,F),ba=!1,Y=s.memoizedState,C.state=Y,sg(s,f,C,y);var ve=s.memoizedState;D!==Z||Y!==ve||Qn.current||ba?(typeof he=="function"&&(Bv(s,c,he,f),ve=s.memoizedState),(V=ba||$S(s,c,V,f,Y,ve,F)||!1)?(K||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,ve,F),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,ve,F)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||D===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ve),C.props=f,C.state=ve,C.context=F,f=V):(typeof C.componentDidUpdate!="function"||D===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),f=!1)}return Gv(r,s,c,f,w,y)}function Gv(r,s,c,f,y,w){QS(r,s);var C=(s.flags&128)!==0;if(!f&&!C)return y&&rS(s,c,!1),ws(r,s,w);f=s.stateNode,mR.current=s;var D=C&&typeof c.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,r!==null&&C?(s.child=ku(s,r.child,null,w),s.child=ku(s,null,D,w)):$n(r,s,D,w),s.memoizedState=f.state,y&&rS(s,c,!0),s.child}function ZS(r){var s=r.stateNode;s.pendingContext?tS(r,s.pendingContext,s.pendingContext!==s.context):s.context&&tS(r,s.context,!1),Tv(r,s.containerInfo)}function eA(r,s,c,f,y){return Cu(),Av(y),s.flags|=256,$n(r,s,c,f),s.child}var Xv={dehydrated:null,treeContext:null,retryLane:0};function qv(r){return{baseLanes:r,cachePool:null,transitions:null}}function tA(r,s,c){var f=s.pendingProps,y=Lt.current,w=!1,C=(s.flags&128)!==0,D;if((D=C)||(D=r!==null&&r.memoizedState===null?!1:(y&2)!==0),D?(w=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(y|=1),bt(Lt,y&1),r===null)return Sv(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(C=f.children,r=f.fallback,w?(f=s.mode,w=s.child,C={mode:"hidden",children:C},!(f&1)&&w!==null?(w.childLanes=0,w.pendingProps=C):w=Cg(C,f,0,null),r=Fo(r,f,c,null),w.return=s,r.return=s,w.sibling=r,s.child=w,s.child.memoizedState=qv(c),s.memoizedState=Xv,r):Yv(s,C));if(y=r.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return yR(r,s,C,f,D,y,c);if(w){w=f.fallback,C=s.mode,y=r.child,D=y.sibling;var F={mode:"hidden",children:f.children};return!(C&1)&&s.child!==y?(f=s.child,f.childLanes=0,f.pendingProps=F,s.deletions=null):(f=ka(y,F),f.subtreeFlags=y.subtreeFlags&14680064),D!==null?w=ka(D,w):(w=Fo(w,C,c,null),w.flags|=2),w.return=s,f.return=s,f.sibling=w,s.child=f,f=w,w=s.child,C=r.child.memoizedState,C=C===null?qv(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=r.childLanes&~c,s.memoizedState=Xv,f}return w=r.child,r=w.sibling,f=ka(w,{mode:"visible",children:f.children}),!(s.mode&1)&&(f.lanes=c),f.return=s,f.sibling=null,r!==null&&(c=s.deletions,c===null?(s.deletions=[r],s.flags|=16):c.push(r)),s.child=f,s.memoizedState=null,f}function Yv(r,s){return s=Cg({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function fg(r,s,c,f){return f!==null&&Av(f),ku(s,r.child,null,c),r=Yv(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function yR(r,s,c,f,y,w,C){if(c)return s.flags&256?(s.flags&=-257,f=Uv(Error(t(422))),fg(r,s,C,f)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(w=f.fallback,y=s.mode,f=Cg({mode:"visible",children:f.children},y,0,null),w=Fo(w,y,C,null),w.flags|=2,f.return=s,w.return=s,f.sibling=w,s.child=f,s.mode&1&&ku(s,r.child,null,C),s.child.memoizedState=qv(C),s.memoizedState=Xv,w);if(!(s.mode&1))return fg(r,s,C,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var D=f.dgst;return f=D,w=Error(t(419)),f=Uv(w,f,void 0),fg(r,s,C,f)}if(D=(C&r.childLanes)!==0,Zn||D){if(f=an,f!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(f.suspendedLanes|C)?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,ys(r,y),di(f,r,y,-1))}return h0(),f=Uv(Error(t(421))),fg(r,s,C,f)}return y.data==="$?"?(s.flags|=128,s.child=r.child,s=PR.bind(null,r),y._reactRetry=s,null):(r=w.treeContext,mr=ma(y.nextSibling),gr=s,kt=!0,li=null,r!==null&&(Or[zr++]=gs,Or[zr++]=ms,Or[zr++]=ko,gs=r.id,ms=r.overflow,ko=s),s=Yv(s,f.children),s.flags|=4096,s)}function nA(r,s,c){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),Cv(r.return,s,c)}function Kv(r,s,c,f,y){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=y)}function rA(r,s,c){var f=s.pendingProps,y=f.revealOrder,w=f.tail;if($n(r,s,f.children,c),f=Lt.current,f&2)f=f&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&nA(r,c,s);else if(r.tag===19)nA(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(bt(Lt,f),!(s.mode&1))s.memoizedState=null;else switch(y){case"forwards":for(c=s.child,y=null;c!==null;)r=c.alternate,r!==null&&ag(r)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),Kv(s,!1,y,c,w);break;case"backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(r=y.alternate,r!==null&&ag(r)===null){s.child=y;break}r=y.sibling,y.sibling=c,c=y,y=r}Kv(s,!0,c,null,w);break;case"together":Kv(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function pg(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function ws(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Mo|=s.lanes,!(c&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,c=ka(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=ka(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function vR(r,s,c){switch(s.tag){case 3:ZS(s),Cu();break;case 5:yS(s);break;case 1:Jn(s.type)&&Kp(s);break;case 4:Tv(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,y=s.memoizedProps.value;bt(ng,f._currentValue),f._currentValue=y;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(bt(Lt,Lt.current&1),s.flags|=128,null):c&s.child.childLanes?tA(r,s,c):(bt(Lt,Lt.current&1),r=ws(r,s,c),r!==null?r.sibling:null);bt(Lt,Lt.current&1);break;case 19:if(f=(c&s.childLanes)!==0,r.flags&128){if(f)return rA(r,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),bt(Lt,Lt.current),f)break;return null;case 22:case 23:return s.lanes=0,KS(r,s,c)}return ws(r,s,c)}var iA,Qv,sA,aA;iA=function(r,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Qv=function(){},sA=function(r,s,c,f){var y=r.memoizedProps;if(y!==f){r=s.stateNode,Po(Di.current);var w=null;switch(c){case"input":y=ii(r,y),f=ii(r,f),w=[];break;case"select":y=re({},y,{value:void 0}),f=re({},f,{value:void 0}),w=[];break;case"textarea":y=si(r,y),f=si(r,f),w=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=Xp)}cu(c,f);var C;c=null;for(V in y)if(!f.hasOwnProperty(V)&&y.hasOwnProperty(V)&&y[V]!=null)if(V==="style"){var D=y[V];for(C in D)D.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?w||(w=[]):(w=w||[]).push(V,null));for(V in f){var F=f[V];if(D=y!=null?y[V]:void 0,f.hasOwnProperty(V)&&F!==D&&(F!=null||D!=null))if(V==="style")if(D){for(C in D)!D.hasOwnProperty(C)||F&&F.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in F)F.hasOwnProperty(C)&&D[C]!==F[C]&&(c||(c={}),c[C]=F[C])}else c||(w||(w=[]),w.push(V,c)),c=F;else V==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(w=w||[]).push(V,F)):V==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(V,""+F):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(i.hasOwnProperty(V)?(F!=null&&V==="onScroll"&&xt("scroll",r),w||D===F||(w=[])):(w=w||[]).push(V,F))}c&&(w=w||[]).push("style",c);var V=w;(s.updateQueue=V)&&(s.flags|=4)}},aA=function(r,s,c,f){c!==f&&(s.flags|=4)};function Wh(r,s){if(!kt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function kn(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,f=0;if(s)for(var y=r.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=f,r.childLanes=c,s}function wR(r,s,c){var f=s.pendingProps;switch(wv(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(s),null;case 1:return Jn(s.type)&&Yp(),kn(s),null;case 3:return f=s.stateNode,Pu(),_t(Qn),_t(_n),Mv(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(eg(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,li!==null&&(l0(li),li=null))),Qv(r,s),kn(s),null;case 5:Pv(s);var y=Po(Hh.current);if(c=s.type,r!==null&&s.stateNode!=null)sA(r,s,c,f,y),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return kn(s),null}if(r=Po(Di.current),eg(s)){f=s.stateNode,c=s.type;var w=s.memoizedProps;switch(f[Ii]=s,f[Nh]=w,r=(s.mode&1)!==0,c){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(y=0;y<Mh.length;y++)xt(Mh[y],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":Ep(f,w),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},xt("invalid",f);break;case"textarea":ia(f,w),xt("invalid",f)}cu(c,w),y=null;for(var C in w)if(w.hasOwnProperty(C)){var D=w[C];C==="children"?typeof D=="string"?f.textContent!==D&&(w.suppressHydrationWarning!==!0&&Gp(f.textContent,D,r),y=["children",D]):typeof D=="number"&&f.textContent!==""+D&&(w.suppressHydrationWarning!==!0&&Gp(f.textContent,D,r),y=["children",""+D]):i.hasOwnProperty(C)&&D!=null&&C==="onScroll"&&xt("scroll",f)}switch(c){case"input":ri(f),_p(f,w,!0);break;case"textarea":ri(f),lu(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=Xp)}f=y,s.updateQueue=f,f!==null&&(s.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ai(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=C.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=C.createElement(c,{is:f.is}):(r=C.createElement(c),c==="select"&&(C=r,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):r=C.createElementNS(r,c),r[Ii]=s,r[Nh]=f,iA(r,s,!1,!1),s.stateNode=r;e:{switch(C=sa(c,f),c){case"dialog":xt("cancel",r),xt("close",r),y=f;break;case"iframe":case"object":case"embed":xt("load",r),y=f;break;case"video":case"audio":for(y=0;y<Mh.length;y++)xt(Mh[y],r);y=f;break;case"source":xt("error",r),y=f;break;case"img":case"image":case"link":xt("error",r),xt("load",r),y=f;break;case"details":xt("toggle",r),y=f;break;case"input":Ep(r,f),y=ii(r,f),xt("invalid",r);break;case"option":y=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},y=re({},f,{value:void 0}),xt("invalid",r);break;case"textarea":ia(r,f),y=si(r,f),xt("invalid",r);break;default:y=f}cu(c,y),D=y;for(w in D)if(D.hasOwnProperty(w)){var F=D[w];w==="style"?ph(r,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&uu(r,F)):w==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&bo(r,F):typeof F=="number"&&bo(r,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?F!=null&&w==="onScroll"&&xt("scroll",r):F!=null&&M(r,w,F,C))}switch(c){case"input":ri(r),_p(r,f,!1);break;case"textarea":ri(r),lu(r);break;case"option":f.value!=null&&r.setAttribute("value",""+Ge(f.value));break;case"select":r.multiple=!!f.multiple,w=f.value,w!=null?ra(r,!!f.multiple,w,!1):f.defaultValue!=null&&ra(r,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(r.onclick=Xp)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return kn(s),null;case 6:if(r&&s.stateNode!=null)aA(r,s,r.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(c=Po(Hh.current),Po(Di.current),eg(s)){if(f=s.stateNode,c=s.memoizedProps,f[Ii]=s,(w=f.nodeValue!==c)&&(r=gr,r!==null))switch(r.tag){case 3:Gp(f.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gp(f.nodeValue,c,(r.mode&1)!==0)}w&&(s.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Ii]=s,s.stateNode=f}return kn(s),null;case 13:if(_t(Lt),f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(kt&&mr!==null&&s.mode&1&&!(s.flags&128))uS(),Cu(),s.flags|=98560,w=!1;else if(w=eg(s),f!==null&&f.dehydrated!==null){if(r===null){if(!w)throw Error(t(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Ii]=s}else Cu(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;kn(s),w=!1}else li!==null&&(l0(li),li=null),w=!0;if(!w)return s.flags&65536?s:null}return s.flags&128?(s.lanes=c,s):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(s.child.flags|=8192,s.mode&1&&(r===null||Lt.current&1?Jt===0&&(Jt=3):h0())),s.updateQueue!==null&&(s.flags|=4),kn(s),null);case 4:return Pu(),Qv(r,s),r===null&&Ih(s.stateNode.containerInfo),kn(s),null;case 10:return _v(s.type._context),kn(s),null;case 17:return Jn(s.type)&&Yp(),kn(s),null;case 19:if(_t(Lt),w=s.memoizedState,w===null)return kn(s),null;if(f=(s.flags&128)!==0,C=w.rendering,C===null)if(f)Wh(w,!1);else{if(Jt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(C=ag(r),C!==null){for(s.flags|=128,Wh(w,!1),f=C.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=c,c=s.child;c!==null;)w=c,r=f,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=r,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,r=C.dependencies,w.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return bt(Lt,Lt.current&1|2),s.child}r=r.sibling}w.tail!==null&&ut()>Du&&(s.flags|=128,f=!0,Wh(w,!1),s.lanes=4194304)}else{if(!f)if(r=ag(C),r!==null){if(s.flags|=128,f=!0,c=r.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),Wh(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!kt)return kn(s),null}else 2*ut()-w.renderingStartTime>Du&&c!==1073741824&&(s.flags|=128,f=!0,Wh(w,!1),s.lanes=4194304);w.isBackwards?(C.sibling=s.child,s.child=C):(c=w.last,c!==null?c.sibling=C:s.child=C,w.last=C)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=ut(),s.sibling=null,c=Lt.current,bt(Lt,f?c&1|2:c&1),s):(kn(s),null);case 22:case 23:return c0(),f=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(s.flags|=8192),f&&s.mode&1?yr&1073741824&&(kn(s),s.subtreeFlags&6&&(s.flags|=8192)):kn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function bR(r,s){switch(wv(s),s.tag){case 1:return Jn(s.type)&&Yp(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Pu(),_t(Qn),_t(_n),Mv(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Pv(s),null;case 13:if(_t(Lt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Cu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return _t(Lt),null;case 4:return Pu(),null;case 10:return _v(s.type._context),null;case 22:case 23:return c0(),null;case 24:return null;default:return null}}var gg=!1,Rn=!1,SR=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Mu(r,s){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){zt(r,s,f)}else c.current=null}function Jv(r,s,c){try{c()}catch(f){zt(r,s,f)}}var oA=!1;function AR(r,s){if(cv=Np,r=$b(),nv(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var C=0,D=-1,F=-1,V=0,K=0,Z=r,Y=null;t:for(;;){for(var he;Z!==c||y!==0&&Z.nodeType!==3||(D=C+y),Z!==w||f!==0&&Z.nodeType!==3||(F=C+f),Z.nodeType===3&&(C+=Z.nodeValue.length),(he=Z.firstChild)!==null;)Y=Z,Z=he;for(;;){if(Z===r)break t;if(Y===c&&++V===y&&(D=C),Y===w&&++K===f&&(F=C),(he=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=he}c=D===-1||F===-1?null:{start:D,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(hv={focusedElem:r,selectionRange:c},Np=!1,ge=s;ge!==null;)if(s=ge,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ge=r;else for(;ge!==null;){s=ge;try{var ve=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var be=ve.memoizedProps,jt=ve.memoizedState,j=s.stateNode,z=j.getSnapshotBeforeUpdate(s.elementType===s.type?be:ui(s.type,be),jt);j.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){zt(s,s.return,te)}if(r=s.sibling,r!==null){r.return=s.return,ge=r;break}ge=s.return}return ve=oA,oA=!1,ve}function Gh(r,s,c){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&r)===r){var w=y.destroy;y.destroy=void 0,w!==void 0&&Jv(s,c,w)}y=y.next}while(y!==f)}}function mg(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&r)===r){var f=c.create;c.destroy=f()}c=c.next}while(c!==s)}}function Zv(r){var s=r.ref;if(s!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof s=="function"?s(r):s.current=r}}function lA(r){var s=r.alternate;s!==null&&(r.alternate=null,lA(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Ii],delete s[Nh],delete s[gv],delete s[iR],delete s[sR])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function uA(r){return r.tag===5||r.tag===3||r.tag===4}function cA(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||uA(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function e0(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(r,s):c.insertBefore(r,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(r,c)):(s=c,s.appendChild(r)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Xp));else if(f!==4&&(r=r.child,r!==null))for(e0(r,s,c),r=r.sibling;r!==null;)e0(r,s,c),r=r.sibling}function t0(r,s,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(t0(r,s,c),r=r.sibling;r!==null;)t0(r,s,c),r=r.sibling}var gn=null,ci=!1;function Aa(r,s,c){for(c=c.child;c!==null;)hA(r,s,c),c=c.sibling}function hA(r,s,c){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Et,c)}catch{}switch(c.tag){case 5:Rn||Mu(c,s);case 6:var f=gn,y=ci;gn=null,Aa(r,s,c),gn=f,ci=y,gn!==null&&(ci?(r=gn,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):gn.removeChild(c.stateNode));break;case 18:gn!==null&&(ci?(r=gn,c=c.stateNode,r.nodeType===8?pv(r.parentNode,c):r.nodeType===1&&pv(r,c),xh(r)):pv(gn,c.stateNode));break;case 4:f=gn,y=ci,gn=c.stateNode.containerInfo,ci=!0,Aa(r,s,c),gn=f,ci=y;break;case 0:case 11:case 14:case 15:if(!Rn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var w=y,C=w.destroy;w=w.tag,C!==void 0&&(w&2||w&4)&&Jv(c,s,C),y=y.next}while(y!==f)}Aa(r,s,c);break;case 1:if(!Rn&&(Mu(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(D){zt(c,s,D)}Aa(r,s,c);break;case 21:Aa(r,s,c);break;case 22:c.mode&1?(Rn=(f=Rn)||c.memoizedState!==null,Aa(r,s,c),Rn=f):Aa(r,s,c);break;default:Aa(r,s,c)}}function dA(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new SR),s.forEach(function(f){var y=LR.bind(null,r,f);c.has(f)||(c.add(f),f.then(y,y))})}}function hi(r,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f];try{var w=r,C=s,D=C;e:for(;D!==null;){switch(D.tag){case 5:gn=D.stateNode,ci=!1;break e;case 3:gn=D.stateNode.containerInfo,ci=!0;break e;case 4:gn=D.stateNode.containerInfo,ci=!0;break e}D=D.return}if(gn===null)throw Error(t(160));hA(w,C,y),gn=null,ci=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(V){zt(y,s,V)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fA(s,r),s=s.sibling}function fA(r,s){var c=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(hi(s,r),Fi(r),f&4){try{Gh(3,r,r.return),mg(3,r)}catch(be){zt(r,r.return,be)}try{Gh(5,r,r.return)}catch(be){zt(r,r.return,be)}}break;case 1:hi(s,r),Fi(r),f&512&&c!==null&&Mu(c,c.return);break;case 5:if(hi(s,r),Fi(r),f&512&&c!==null&&Mu(c,c.return),r.flags&32){var y=r.stateNode;try{bo(y,"")}catch(be){zt(r,r.return,be)}}if(f&4&&(y=r.stateNode,y!=null)){var w=r.memoizedProps,C=c!==null?c.memoizedProps:w,D=r.type,F=r.updateQueue;if(r.updateQueue=null,F!==null)try{D==="input"&&w.type==="radio"&&w.name!=null&&xp(y,w),sa(D,C);var V=sa(D,w);for(C=0;C<F.length;C+=2){var K=F[C],Z=F[C+1];K==="style"?ph(y,Z):K==="dangerouslySetInnerHTML"?uu(y,Z):K==="children"?bo(y,Z):M(y,K,Z,V)}switch(D){case"input":ou(y,w);break;case"textarea":dh(y,w);break;case"select":var Y=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var he=w.value;he!=null?ra(y,!!w.multiple,he,!1):Y!==!!w.multiple&&(w.defaultValue!=null?ra(y,!!w.multiple,w.defaultValue,!0):ra(y,!!w.multiple,w.multiple?[]:"",!1))}y[Nh]=w}catch(be){zt(r,r.return,be)}}break;case 6:if(hi(s,r),Fi(r),f&4){if(r.stateNode===null)throw Error(t(162));y=r.stateNode,w=r.memoizedProps;try{y.nodeValue=w}catch(be){zt(r,r.return,be)}}break;case 3:if(hi(s,r),Fi(r),f&4&&c!==null&&c.memoizedState.isDehydrated)try{xh(s.containerInfo)}catch(be){zt(r,r.return,be)}break;case 4:hi(s,r),Fi(r);break;case 13:hi(s,r),Fi(r),y=r.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(i0=ut())),f&4&&dA(r);break;case 22:if(K=c!==null&&c.memoizedState!==null,r.mode&1?(Rn=(V=Rn)||K,hi(s,r),Rn=V):hi(s,r),Fi(r),f&8192){if(V=r.memoizedState!==null,(r.stateNode.isHidden=V)&&!K&&r.mode&1)for(ge=r,K=r.child;K!==null;){for(Z=ge=K;ge!==null;){switch(Y=ge,he=Y.child,Y.tag){case 0:case 11:case 14:case 15:Gh(4,Y,Y.return);break;case 1:Mu(Y,Y.return);var ve=Y.stateNode;if(typeof ve.componentWillUnmount=="function"){f=Y,c=Y.return;try{s=f,ve.props=s.memoizedProps,ve.state=s.memoizedState,ve.componentWillUnmount()}catch(be){zt(f,c,be)}}break;case 5:Mu(Y,Y.return);break;case 22:if(Y.memoizedState!==null){mA(Z);continue}}he!==null?(he.return=Y,ge=he):mA(Z)}K=K.sibling}e:for(K=null,Z=r;;){if(Z.tag===5){if(K===null){K=Z;try{y=Z.stateNode,V?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(D=Z.stateNode,F=Z.memoizedProps.style,C=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=fh("display",C))}catch(be){zt(r,r.return,be)}}}else if(Z.tag===6){if(K===null)try{Z.stateNode.nodeValue=V?"":Z.memoizedProps}catch(be){zt(r,r.return,be)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;K===Z&&(K=null),Z=Z.return}K===Z&&(K=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:hi(s,r),Fi(r),f&4&&dA(r);break;case 21:break;default:hi(s,r),Fi(r)}}function Fi(r){var s=r.flags;if(s&2){try{e:{for(var c=r.return;c!==null;){if(uA(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(bo(y,""),f.flags&=-33);var w=cA(r);t0(r,w,y);break;case 3:case 4:var C=f.stateNode.containerInfo,D=cA(r);e0(r,D,C);break;default:throw Error(t(161))}}catch(F){zt(r,r.return,F)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ER(r,s,c){ge=r,pA(r)}function pA(r,s,c){for(var f=(r.mode&1)!==0;ge!==null;){var y=ge,w=y.child;if(y.tag===22&&f){var C=y.memoizedState!==null||gg;if(!C){var D=y.alternate,F=D!==null&&D.memoizedState!==null||Rn;D=gg;var V=Rn;if(gg=C,(Rn=F)&&!V)for(ge=y;ge!==null;)C=ge,F=C.child,C.tag===22&&C.memoizedState!==null?yA(y):F!==null?(F.return=C,ge=F):yA(y);for(;w!==null;)ge=w,pA(w),w=w.sibling;ge=y,gg=D,Rn=V}gA(r)}else y.subtreeFlags&8772&&w!==null?(w.return=y,ge=w):gA(r)}}function gA(r){for(;ge!==null;){var s=ge;if(s.flags&8772){var c=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Rn||mg(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Rn)if(c===null)f.componentDidMount();else{var y=s.elementType===s.type?c.memoizedProps:ui(s.type,c.memoizedProps);f.componentDidUpdate(y,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=s.updateQueue;w!==null&&mS(s,w,f);break;case 3:var C=s.updateQueue;if(C!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}mS(s,C,c)}break;case 5:var D=s.stateNode;if(c===null&&s.flags&4){c=D;var F=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var V=s.alternate;if(V!==null){var K=V.memoizedState;if(K!==null){var Z=K.dehydrated;Z!==null&&xh(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rn||s.flags&512&&Zv(s)}catch(Y){zt(s,s.return,Y)}}if(s===r){ge=null;break}if(c=s.sibling,c!==null){c.return=s.return,ge=c;break}ge=s.return}}function mA(r){for(;ge!==null;){var s=ge;if(s===r){ge=null;break}var c=s.sibling;if(c!==null){c.return=s.return,ge=c;break}ge=s.return}}function yA(r){for(;ge!==null;){var s=ge;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{mg(4,s)}catch(F){zt(s,c,F)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var y=s.return;try{f.componentDidMount()}catch(F){zt(s,y,F)}}var w=s.return;try{Zv(s)}catch(F){zt(s,w,F)}break;case 5:var C=s.return;try{Zv(s)}catch(F){zt(s,C,F)}}}catch(F){zt(s,s.return,F)}if(s===r){ge=null;break}var D=s.sibling;if(D!==null){D.return=s.return,ge=D;break}ge=s.return}}var xR=Math.ceil,yg=I.ReactCurrentDispatcher,n0=I.ReactCurrentOwner,Br=I.ReactCurrentBatchConfig,Je=0,an=null,Gt=null,mn=0,yr=0,Iu=ya(0),Jt=0,Xh=null,Mo=0,vg=0,r0=0,qh=null,er=null,i0=0,Du=1/0,bs=null,wg=!1,s0=null,Ea=null,bg=!1,xa=null,Sg=0,Yh=0,a0=null,Ag=-1,Eg=0;function Hn(){return Je&6?ut():Ag!==-1?Ag:Ag=ut()}function _a(r){return r.mode&1?Je&2&&mn!==0?mn&-mn:oR.transition!==null?(Eg===0&&(Eg=cb()),Eg):(r=ht,r!==0||(r=window.event,r=r===void 0?16:wb(r.type)),r):1}function di(r,s,c,f){if(50<Yh)throw Yh=0,a0=null,Error(t(185));wh(r,c,f),(!(Je&2)||r!==an)&&(r===an&&(!(Je&2)&&(vg|=c),Jt===4&&Ca(r,mn)),tr(r,f),c===1&&Je===0&&!(s.mode&1)&&(Du=ut()+500,Qp&&wa()))}function tr(r,s){var c=r.callbackNode;ok(r,s);var f=Mp(r,r===an?mn:0);if(f===0)c!==null&&dr(c),r.callbackNode=null,r.callbackPriority=0;else if(s=f&-f,r.callbackPriority!==s){if(c!=null&&dr(c),s===1)r.tag===0?aR(wA.bind(null,r)):iS(wA.bind(null,r)),nR(function(){!(Je&6)&&wa()}),c=null;else{switch(hb(f)){case 1:c=la;break;case 4:c=ct;break;case 16:c=Bt;break;case 536870912:c=ua;break;default:c=Bt}c=kA(c,vA.bind(null,r))}r.callbackPriority=s,r.callbackNode=c}}function vA(r,s){if(Ag=-1,Eg=0,Je&6)throw Error(t(327));var c=r.callbackNode;if(Nu()&&r.callbackNode!==c)return null;var f=Mp(r,r===an?mn:0);if(f===0)return null;if(f&30||f&r.expiredLanes||s)s=xg(r,f);else{s=f;var y=Je;Je|=2;var w=SA();(an!==r||mn!==s)&&(bs=null,Du=ut()+500,Do(r,s));do try{kR();break}catch(D){bA(r,D)}while(!0);xv(),yg.current=w,Je=y,Gt!==null?s=0:(an=null,mn=0,s=Jt)}if(s!==0){if(s===2&&(y=Hy(r),y!==0&&(f=y,s=o0(r,y))),s===1)throw c=Xh,Do(r,0),Ca(r,f),tr(r,ut()),c;if(s===6)Ca(r,f);else{if(y=r.current.alternate,!(f&30)&&!_R(y)&&(s=xg(r,f),s===2&&(w=Hy(r),w!==0&&(f=w,s=o0(r,w))),s===1))throw c=Xh,Do(r,0),Ca(r,f),tr(r,ut()),c;switch(r.finishedWork=y,r.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:No(r,er,bs);break;case 3:if(Ca(r,f),(f&130023424)===f&&(s=i0+500-ut(),10<s)){if(Mp(r,0)!==0)break;if(y=r.suspendedLanes,(y&f)!==f){Hn(),r.pingedLanes|=r.suspendedLanes&y;break}r.timeoutHandle=fv(No.bind(null,r,er,bs),s);break}No(r,er,bs);break;case 4:if(Ca(r,f),(f&4194240)===f)break;for(s=r.eventTimes,y=-1;0<f;){var C=31-fr(f);w=1<<C,C=s[C],C>y&&(y=C),f&=~w}if(f=y,f=ut()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*xR(f/1960))-f,10<f){r.timeoutHandle=fv(No.bind(null,r,er,bs),f);break}No(r,er,bs);break;case 5:No(r,er,bs);break;default:throw Error(t(329))}}}return tr(r,ut()),r.callbackNode===c?vA.bind(null,r):null}function o0(r,s){var c=qh;return r.current.memoizedState.isDehydrated&&(Do(r,s).flags|=256),r=xg(r,s),r!==2&&(s=er,er=c,s!==null&&l0(s)),r}function l0(r){er===null?er=r:er.push.apply(er,r)}function _R(r){for(var s=r;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var y=c[f],w=y.getSnapshot;y=y.value;try{if(!oi(w(),y))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ca(r,s){for(s&=~r0,s&=~vg,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var c=31-fr(s),f=1<<c;r[c]=-1,s&=~f}}function wA(r){if(Je&6)throw Error(t(327));Nu();var s=Mp(r,0);if(!(s&1))return tr(r,ut()),null;var c=xg(r,s);if(r.tag!==0&&c===2){var f=Hy(r);f!==0&&(s=f,c=o0(r,f))}if(c===1)throw c=Xh,Do(r,0),Ca(r,s),tr(r,ut()),c;if(c===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,No(r,er,bs),tr(r,ut()),null}function u0(r,s){var c=Je;Je|=1;try{return r(s)}finally{Je=c,Je===0&&(Du=ut()+500,Qp&&wa())}}function Io(r){xa!==null&&xa.tag===0&&!(Je&6)&&Nu();var s=Je;Je|=1;var c=Br.transition,f=ht;try{if(Br.transition=null,ht=1,r)return r()}finally{ht=f,Br.transition=c,Je=s,!(Je&6)&&wa()}}function c0(){yr=Iu.current,_t(Iu)}function Do(r,s){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,tR(c)),Gt!==null)for(c=Gt.return;c!==null;){var f=c;switch(wv(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Yp();break;case 3:Pu(),_t(Qn),_t(_n),Mv();break;case 5:Pv(f);break;case 4:Pu();break;case 13:_t(Lt);break;case 19:_t(Lt);break;case 10:_v(f.type._context);break;case 22:case 23:c0()}c=c.return}if(an=r,Gt=r=ka(r.current,null),mn=yr=s,Jt=0,Xh=null,r0=vg=Mo=0,er=qh=null,To!==null){for(s=0;s<To.length;s++)if(c=To[s],f=c.interleaved,f!==null){c.interleaved=null;var y=f.next,w=c.pending;if(w!==null){var C=w.next;w.next=y,f.next=C}c.pending=f}To=null}return r}function bA(r,s){do{var c=Gt;try{if(xv(),og.current=hg,lg){for(var f=Mt.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}lg=!1}if(Lo=0,sn=Qt=Mt=null,Bh=!1,jh=0,n0.current=null,c===null||c.return===null){Jt=1,Xh=s,Gt=null;break}e:{var w=r,C=c.return,D=c,F=s;if(s=mn,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var V=F,K=D,Z=K.tag;if(!(K.mode&1)&&(Z===0||Z===11||Z===15)){var Y=K.alternate;Y?(K.updateQueue=Y.updateQueue,K.memoizedState=Y.memoizedState,K.lanes=Y.lanes):(K.updateQueue=null,K.memoizedState=null)}var he=WS(C);if(he!==null){he.flags&=-257,GS(he,C,D,w,s),he.mode&1&&VS(w,V,s),s=he,F=V;var ve=s.updateQueue;if(ve===null){var be=new Set;be.add(F),s.updateQueue=be}else ve.add(F);break e}else{if(!(s&1)){VS(w,V,s),h0();break e}F=Error(t(426))}}else if(kt&&D.mode&1){var jt=WS(C);if(jt!==null){!(jt.flags&65536)&&(jt.flags|=256),GS(jt,C,D,w,s),Av(Lu(F,D));break e}}w=F=Lu(F,D),Jt!==4&&(Jt=2),qh===null?qh=[w]:qh.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,s&=-s,w.lanes|=s;var j=jS(w,F,s);gS(w,j);break e;case 1:D=F;var z=w.type,U=w.stateNode;if(!(w.flags&128)&&(typeof z.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Ea===null||!Ea.has(U)))){w.flags|=65536,s&=-s,w.lanes|=s;var te=US(w,D,s);gS(w,te);break e}}w=w.return}while(w!==null)}EA(c)}catch(Se){s=Se,Gt===c&&c!==null&&(Gt=c=c.return);continue}break}while(!0)}function SA(){var r=yg.current;return yg.current=hg,r===null?hg:r}function h0(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),an===null||!(Mo&268435455)&&!(vg&268435455)||Ca(an,mn)}function xg(r,s){var c=Je;Je|=2;var f=SA();(an!==r||mn!==s)&&(bs=null,Do(r,s));do try{CR();break}catch(y){bA(r,y)}while(!0);if(xv(),Je=c,yg.current=f,Gt!==null)throw Error(t(261));return an=null,mn=0,Jt}function CR(){for(;Gt!==null;)AA(Gt)}function kR(){for(;Gt!==null&&!yh();)AA(Gt)}function AA(r){var s=CA(r.alternate,r,yr);r.memoizedProps=r.pendingProps,s===null?EA(r):Gt=s,n0.current=null}function EA(r){var s=r;do{var c=s.alternate;if(r=s.return,s.flags&32768){if(c=bR(c,s),c!==null){c.flags&=32767,Gt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Jt=6,Gt=null;return}}else if(c=wR(c,s,yr),c!==null){Gt=c;return}if(s=s.sibling,s!==null){Gt=s;return}Gt=s=r}while(s!==null);Jt===0&&(Jt=5)}function No(r,s,c){var f=ht,y=Br.transition;try{Br.transition=null,ht=1,RR(r,s,c,f)}finally{Br.transition=y,ht=f}return null}function RR(r,s,c,f){do Nu();while(xa!==null);if(Je&6)throw Error(t(327));c=r.finishedWork;var y=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var w=c.lanes|c.childLanes;if(lk(r,w),r===an&&(Gt=an=null,mn=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||bg||(bg=!0,kA(Bt,function(){return Nu(),null})),w=(c.flags&15990)!==0,c.subtreeFlags&15990||w){w=Br.transition,Br.transition=null;var C=ht;ht=1;var D=Je;Je|=4,n0.current=null,AR(r,c),fA(c,r),qk(hv),Np=!!cv,hv=cv=null,r.current=c,ER(c),xo(),Je=D,ht=C,Br.transition=w}else r.current=c;if(bg&&(bg=!1,xa=r,Sg=y),w=r.pendingLanes,w===0&&(Ea=null),Tp(c.stateNode),tr(r,ut()),s!==null)for(f=r.onRecoverableError,c=0;c<s.length;c++)y=s[c],f(y.value,{componentStack:y.stack,digest:y.digest});if(wg)throw wg=!1,r=s0,s0=null,r;return Sg&1&&r.tag!==0&&Nu(),w=r.pendingLanes,w&1?r===a0?Yh++:(Yh=0,a0=r):Yh=0,wa(),null}function Nu(){if(xa!==null){var r=hb(Sg),s=Br.transition,c=ht;try{if(Br.transition=null,ht=16>r?16:r,xa===null)var f=!1;else{if(r=xa,xa=null,Sg=0,Je&6)throw Error(t(331));var y=Je;for(Je|=4,ge=r.current;ge!==null;){var w=ge,C=w.child;if(ge.flags&16){var D=w.deletions;if(D!==null){for(var F=0;F<D.length;F++){var V=D[F];for(ge=V;ge!==null;){var K=ge;switch(K.tag){case 0:case 11:case 15:Gh(8,K,w)}var Z=K.child;if(Z!==null)Z.return=K,ge=Z;else for(;ge!==null;){K=ge;var Y=K.sibling,he=K.return;if(lA(K),K===V){ge=null;break}if(Y!==null){Y.return=he,ge=Y;break}ge=he}}}var ve=w.alternate;if(ve!==null){var be=ve.child;if(be!==null){ve.child=null;do{var jt=be.sibling;be.sibling=null,be=jt}while(be!==null)}}ge=w}}if(w.subtreeFlags&2064&&C!==null)C.return=w,ge=C;else e:for(;ge!==null;){if(w=ge,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Gh(9,w,w.return)}var j=w.sibling;if(j!==null){j.return=w.return,ge=j;break e}ge=w.return}}var z=r.current;for(ge=z;ge!==null;){C=ge;var U=C.child;if(C.subtreeFlags&2064&&U!==null)U.return=C,ge=U;else e:for(C=z;ge!==null;){if(D=ge,D.flags&2048)try{switch(D.tag){case 0:case 11:case 15:mg(9,D)}}catch(Se){zt(D,D.return,Se)}if(D===C){ge=null;break e}var te=D.sibling;if(te!==null){te.return=D.return,ge=te;break e}ge=D.return}}if(Je=y,wa(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Et,r)}catch{}f=!0}return f}finally{ht=c,Br.transition=s}}return!1}function xA(r,s,c){s=Lu(c,s),s=jS(r,s,1),r=Sa(r,s,1),s=Hn(),r!==null&&(wh(r,1,s),tr(r,s))}function zt(r,s,c){if(r.tag===3)xA(r,r,c);else for(;s!==null;){if(s.tag===3){xA(s,r,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ea===null||!Ea.has(f))){r=Lu(c,r),r=US(s,r,1),s=Sa(s,r,1),r=Hn(),s!==null&&(wh(s,1,r),tr(s,r));break}}s=s.return}}function TR(r,s,c){var f=r.pingCache;f!==null&&f.delete(s),s=Hn(),r.pingedLanes|=r.suspendedLanes&c,an===r&&(mn&c)===c&&(Jt===4||Jt===3&&(mn&130023424)===mn&&500>ut()-i0?Do(r,0):r0|=c),tr(r,s)}function _A(r,s){s===0&&(r.mode&1?(s=Lp,Lp<<=1,!(Lp&130023424)&&(Lp=4194304)):s=1);var c=Hn();r=ys(r,s),r!==null&&(wh(r,s,c),tr(r,c))}function PR(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),_A(r,c)}function LR(r,s){var c=0;switch(r.tag){case 13:var f=r.stateNode,y=r.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),_A(r,c)}var CA;CA=function(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps||Qn.current)Zn=!0;else{if(!(r.lanes&c)&&!(s.flags&128))return Zn=!1,vR(r,s,c);Zn=!!(r.flags&131072)}else Zn=!1,kt&&s.flags&1048576&&sS(s,Zp,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;pg(r,s),r=s.pendingProps;var y=Eu(s,_n.current);Tu(s,c),y=Nv(null,s,f,r,y,c);var w=Fv();return s.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jn(f)?(w=!0,Kp(s)):w=!1,s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Rv(s),y.updater=dg,s.stateNode=y,y._reactInternals=s,jv(s,f,r,c),s=Gv(null,s,f,!0,w,c)):(s.tag=0,kt&&w&&vv(s),$n(null,s,y,c),s=s.child),s;case 16:f=s.elementType;e:{switch(pg(r,s),r=s.pendingProps,y=f._init,f=y(f._payload),s.type=f,y=s.tag=IR(f),r=ui(f,r),y){case 0:s=Wv(null,s,f,r,c);break e;case 1:s=JS(null,s,f,r,c);break e;case 11:s=XS(null,s,f,r,c);break e;case 14:s=qS(null,s,f,ui(f.type,r),c);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,y=s.pendingProps,y=s.elementType===f?y:ui(f,y),Wv(r,s,f,y,c);case 1:return f=s.type,y=s.pendingProps,y=s.elementType===f?y:ui(f,y),JS(r,s,f,y,c);case 3:e:{if(ZS(s),r===null)throw Error(t(387));f=s.pendingProps,w=s.memoizedState,y=w.element,pS(r,s),sg(s,f,null,c);var C=s.memoizedState;if(f=C.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){y=Lu(Error(t(423)),s),s=eA(r,s,f,c,y);break e}else if(f!==y){y=Lu(Error(t(424)),s),s=eA(r,s,f,c,y);break e}else for(mr=ma(s.stateNode.containerInfo.firstChild),gr=s,kt=!0,li=null,c=dS(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Cu(),f===y){s=ws(r,s,c);break e}$n(r,s,f,c)}s=s.child}return s;case 5:return yS(s),r===null&&Sv(s),f=s.type,y=s.pendingProps,w=r!==null?r.memoizedProps:null,C=y.children,dv(f,y)?C=null:w!==null&&dv(f,w)&&(s.flags|=32),QS(r,s),$n(r,s,C,c),s.child;case 6:return r===null&&Sv(s),null;case 13:return tA(r,s,c);case 4:return Tv(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=ku(s,null,f,c):$n(r,s,f,c),s.child;case 11:return f=s.type,y=s.pendingProps,y=s.elementType===f?y:ui(f,y),XS(r,s,f,y,c);case 7:return $n(r,s,s.pendingProps,c),s.child;case 8:return $n(r,s,s.pendingProps.children,c),s.child;case 12:return $n(r,s,s.pendingProps.children,c),s.child;case 10:e:{if(f=s.type._context,y=s.pendingProps,w=s.memoizedProps,C=y.value,bt(ng,f._currentValue),f._currentValue=C,w!==null)if(oi(w.value,C)){if(w.children===y.children&&!Qn.current){s=ws(r,s,c);break e}}else for(w=s.child,w!==null&&(w.return=s);w!==null;){var D=w.dependencies;if(D!==null){C=w.child;for(var F=D.firstContext;F!==null;){if(F.context===f){if(w.tag===1){F=vs(-1,c&-c),F.tag=2;var V=w.updateQueue;if(V!==null){V=V.shared;var K=V.pending;K===null?F.next=F:(F.next=K.next,K.next=F),V.pending=F}}w.lanes|=c,F=w.alternate,F!==null&&(F.lanes|=c),Cv(w.return,c,s),D.lanes|=c;break}F=F.next}}else if(w.tag===10)C=w.type===s.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=c,D=C.alternate,D!==null&&(D.lanes|=c),Cv(C,c,s),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===s){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}$n(r,s,y.children,c),s=s.child}return s;case 9:return y=s.type,f=s.pendingProps.children,Tu(s,c),y=$r(y),f=f(y),s.flags|=1,$n(r,s,f,c),s.child;case 14:return f=s.type,y=ui(f,s.pendingProps),y=ui(f.type,y),qS(r,s,f,y,c);case 15:return YS(r,s,s.type,s.pendingProps,c);case 17:return f=s.type,y=s.pendingProps,y=s.elementType===f?y:ui(f,y),pg(r,s),s.tag=1,Jn(f)?(r=!0,Kp(s)):r=!1,Tu(s,c),HS(s,f,y),jv(s,f,y,c),Gv(null,s,f,!0,r,c);case 19:return rA(r,s,c);case 22:return KS(r,s,c)}throw Error(t(156,s.tag))};function kA(r,s){return Fr(r,s)}function MR(r,s,c,f){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(r,s,c,f){return new MR(r,s,c,f)}function d0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function IR(r){if(typeof r=="function")return d0(r)?1:0;if(r!=null){if(r=r.$$typeof,r===$e)return 11;if(r===nt)return 14}return 2}function ka(r,s){var c=r.alternate;return c===null?(c=jr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function _g(r,s,c,f,y,w){var C=2;if(f=r,typeof r=="function")d0(r)&&(C=1);else if(typeof r=="string")C=5;else e:switch(r){case N:return Fo(c.children,y,w,s);case G:C=8,y|=8;break;case q:return r=jr(12,c,s,y|2),r.elementType=q,r.lanes=w,r;case Ue:return r=jr(13,c,s,y),r.elementType=Ue,r.lanes=w,r;case Ie:return r=jr(19,c,s,y),r.elementType=Ie,r.lanes=w,r;case ie:return Cg(c,y,w,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ae:C=10;break e;case oe:C=9;break e;case $e:C=11;break e;case nt:C=14;break e;case J:C=16,f=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=jr(C,c,s,y),s.elementType=r,s.type=f,s.lanes=w,s}function Fo(r,s,c,f){return r=jr(7,r,f,s),r.lanes=c,r}function Cg(r,s,c,f){return r=jr(22,r,f,s),r.elementType=ie,r.lanes=c,r.stateNode={isHidden:!1},r}function f0(r,s,c){return r=jr(6,r,null,s),r.lanes=c,r}function p0(r,s,c){return s=jr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function DR(r,s,c,f,y){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=By(0),this.expirationTimes=By(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=By(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function g0(r,s,c,f,y,w,C,D,F){return r=new DR(r,s,c,D,F),s===1?(s=1,w===!0&&(s|=8)):s=0,w=jr(3,null,null,s),r.current=w,w.stateNode=r,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rv(w),r}function NR(r,s,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:r,containerInfo:s,implementation:c}}function RA(r){if(!r)return va;r=r._reactInternals;e:{if(At(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var c=r.type;if(Jn(c))return nS(r,c,s)}return s}function TA(r,s,c,f,y,w,C,D,F){return r=g0(c,f,!0,r,y,w,C,D,F),r.context=RA(null),c=r.current,f=Hn(),y=_a(c),w=vs(f,y),w.callback=s??null,Sa(c,w,y),r.current.lanes=y,wh(r,y,f),tr(r,f),r}function kg(r,s,c,f){var y=s.current,w=Hn(),C=_a(y);return c=RA(c),s.context===null?s.context=c:s.pendingContext=c,s=vs(w,C),s.payload={element:r},f=f===void 0?null:f,f!==null&&(s.callback=f),r=Sa(y,s,C),r!==null&&(di(r,y,C,w),ig(r,y,C)),C}function Rg(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function PA(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function m0(r,s){PA(r,s),(r=r.alternate)&&PA(r,s)}function FR(){return null}var LA=typeof reportError=="function"?reportError:function(r){console.error(r)};function y0(r){this._internalRoot=r}Tg.prototype.render=y0.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));kg(r,s,null,null)},Tg.prototype.unmount=y0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Io(function(){kg(null,r,null,null)}),s[fs]=null}};function Tg(r){this._internalRoot=r}Tg.prototype.unstable_scheduleHydration=function(r){if(r){var s=pb();r={blockedOn:null,target:r,priority:s};for(var c=0;c<fa.length&&s!==0&&s<fa[c].priority;c++);fa.splice(c,0,r),c===0&&yb(r)}};function v0(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Pg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function MA(){}function OR(r,s,c,f,y){if(y){if(typeof f=="function"){var w=f;f=function(){var V=Rg(C);w.call(V)}}var C=TA(s,f,r,0,null,!1,!1,"",MA);return r._reactRootContainer=C,r[fs]=C.current,Ih(r.nodeType===8?r.parentNode:r),Io(),C}for(;y=r.lastChild;)r.removeChild(y);if(typeof f=="function"){var D=f;f=function(){var V=Rg(F);D.call(V)}}var F=g0(r,0,!1,null,null,!1,!1,"",MA);return r._reactRootContainer=F,r[fs]=F.current,Ih(r.nodeType===8?r.parentNode:r),Io(function(){kg(s,F,c,f)}),F}function Lg(r,s,c,f,y){var w=c._reactRootContainer;if(w){var C=w;if(typeof y=="function"){var D=y;y=function(){var F=Rg(C);D.call(F)}}kg(s,C,r,y)}else C=OR(c,s,r,y,f);return Rg(C)}db=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var c=vh(s.pendingLanes);c!==0&&(jy(s,c|1),tr(s,ut()),!(Je&6)&&(Du=ut()+500,wa()))}break;case 13:Io(function(){var f=ys(r,1);if(f!==null){var y=Hn();di(f,r,1,y)}}),m0(r,1)}},Uy=function(r){if(r.tag===13){var s=ys(r,134217728);if(s!==null){var c=Hn();di(s,r,134217728,c)}m0(r,134217728)}},fb=function(r){if(r.tag===13){var s=_a(r),c=ys(r,s);if(c!==null){var f=Hn();di(c,r,s,f)}m0(r,s)}},pb=function(){return ht},gb=function(r,s){var c=ht;try{return ht=r,s()}finally{ht=c}},gh=function(r,s,c){switch(s){case"input":if(ou(r,c),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==r&&f.form===r.form){var y=qp(f);if(!y)throw Error(t(90));ch(f),ou(f,y)}}}break;case"textarea":dh(r,c);break;case"select":s=c.value,s!=null&&ra(r,!!c.multiple,s,!1)}},kp=u0,Rp=Io;var zR={usingClientEntryPoint:!1,Events:[Fh,Su,qp,Ao,Eo,u0]},Kh={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$R={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ds(r),r===null?null:r.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||FR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{Et=Mg.inject($R),pn=Mg}catch{}}return nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zR,nr.createPortal=function(r,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v0(s))throw Error(t(200));return NR(r,s,null,c)},nr.createRoot=function(r,s){if(!v0(r))throw Error(t(299));var c=!1,f="",y=LA;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=g0(r,1,!1,null,null,c,!1,f,y),r[fs]=s.current,Ih(r.nodeType===8?r.parentNode:r),new y0(s)},nr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ds(s),r=r===null?null:r.stateNode,r},nr.flushSync=function(r){return Io(r)},nr.hydrate=function(r,s,c){if(!Pg(s))throw Error(t(200));return Lg(null,r,s,!0,c)},nr.hydrateRoot=function(r,s,c){if(!v0(r))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,y=!1,w="",C=LA;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),s=TA(s,null,r,1,c??null,y,!1,w,C),r[fs]=s.current,Ih(r),f)for(r=0;r<f.length;r++)c=f[r],y=c._getVersion,y=y(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,y]:s.mutableSourceEagerHydrationData.push(c,y);return new Tg(s)},nr.render=function(r,s,c){if(!Pg(s))throw Error(t(200));return Lg(null,r,s,!1,c)},nr.unmountComponentAtNode=function(r){if(!Pg(r))throw Error(t(40));return r._reactRootContainer?(Io(function(){Lg(null,null,r,!1,function(){r._reactRootContainer=null,r[fs]=null})}),!0):!1},nr.unstable_batchedUpdates=u0,nr.unstable_renderSubtreeIntoContainer=function(r,s,c,f){if(!Pg(c))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Lg(r,s,c,!1,f)},nr.version="18.3.1-next-f1338f8080-20240426",nr}var JA;function bx(){if(JA)return _0.exports;JA=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),_0.exports=FT(),_0.exports}var ZA;function OT(){if(ZA)return Dg;ZA=1;var a=bx();return Dg.createRoot=a.createRoot,Dg.hydrateRoot=a.hydrateRoot,Dg}var zT=OT(),Zh={},eE;function $T(){if(eE)return Zh;eE=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.parse=l,Zh.serialize=p;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function l(v,b){const S=new o,A=v.length;if(A<2)return S;const x=(b==null?void 0:b.decode)||g;let _=0;do{const P=v.indexOf("=",_);if(P===-1)break;const M=v.indexOf(";",_),I=M===-1?A:M;if(P>I){_=v.lastIndexOf(";",P-1)+1;continue}const L=h(v,_,P),T=d(v,P,L),N=v.slice(L,T);if(S[N]===void 0){let G=h(v,P+1,I),q=d(v,I,G);const ae=x(v.slice(G,q));S[N]=ae}_=I+1}while(_<A);return S}function h(v,b,S){do{const A=v.charCodeAt(b);if(A!==32&&A!==9)return b}while(++b<S);return S}function d(v,b,S){for(;b>S;){const A=v.charCodeAt(--b);if(A!==32&&A!==9)return b+1}return S}function p(v,b,S){const A=(S==null?void 0:S.encode)||encodeURIComponent;if(!a.test(v))throw new TypeError(`argument name is invalid: ${v}`);const x=A(b);if(!e.test(x))throw new TypeError(`argument val is invalid: ${b}`);let _=v+"="+x;if(!S)return _;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);_+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);_+="; Domain="+S.domain}if(S.path){if(!n.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);_+="; Path="+S.path}if(S.expires){if(!m(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);_+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(_+="; HttpOnly"),S.secure&&(_+="; Secure"),S.partitioned&&(_+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return _}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function m(v){return i.call(v)==="[object Date]"}return Zh}$T();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tE="popstate";function HT(a={}){function e(n,i){let{pathname:o,search:l,hash:h}=n.location;return Md("",{pathname:o,search:l,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:ho(i)}return jT(e,t,null,a)}function Qe(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function xn(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BT(){return Math.random().toString(36).substring(2,10)}function nE(a,e){return{usr:a.state,key:a.key,idx:e}}function Md(a,e,t=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?mo(e):e,state:t,key:e&&e.key||n||BT()}}function ho({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function mo(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let n=a.indexOf("?");n>=0&&(e.search=a.substring(n),a=a.substring(0,n)),a&&(e.pathname=a)}return e}function jT(a,e,t,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,l=i.history,h="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function m(){h="POP";let x=g(),_=x==null?null:x-p;p=x,d&&d({action:h,location:A.location,delta:_})}function v(x,_){h="PUSH";let P=Md(A.location,x,_);p=g()+1;let M=nE(P,p),I=A.createHref(P);try{l.pushState(M,"",I)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(I)}o&&d&&d({action:h,location:A.location,delta:1})}function b(x,_){h="REPLACE";let P=Md(A.location,x,_);p=g();let M=nE(P,p),I=A.createHref(P);l.replaceState(M,"",I),o&&d&&d({action:h,location:A.location,delta:0})}function S(x){let _=i.location.origin!=="null"?i.location.origin:i.location.href,P=typeof x=="string"?x:ho(x);return P=P.replace(/ $/,"%20"),Qe(_,`No window.location.(origin|href) available to create URL for href: ${P}`),new URL(P,_)}let A={get action(){return h},get location(){return a(i,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(tE,m),d=x,()=>{i.removeEventListener(tE,m),d=null}},createHref(x){return e(i,x)},createURL:S,encodeLocation(x){let _=S(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:b,go(x){return l.go(x)}};return A}var UT=new Set(["lazy","caseSensitive","path","id","index","children"]);function VT(a){return a.index===!0}function Dm(a,e,t=[],n={}){return a.map((i,o)=>{let l=[...t,String(o)],h=typeof i.id=="string"?i.id:l.join("-");if(Qe(i.index!==!0||!i.children,"Cannot specify children on an index route"),Qe(!n[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),VT(i)){let d={...i,...e(i),id:h};return n[h]=d,d}else{let d={...i,...e(i),id:h,children:void 0};return n[h]=d,i.children&&(d.children=Dm(i.children,e,l,n)),d}})}function La(a,e,t="/"){return Kg(a,e,t,!1)}function Kg(a,e,t,n){let i=typeof e=="string"?mo(e):e,o=Pi(i.pathname||"/",t);if(o==null)return null;let l=Sx(a);GT(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=rP(o);h=tP(l[d],p,n)}return h}function WT(a,e){let{route:t,pathname:n,params:i}=a;return{id:t.id,pathname:n,params:i,data:e[t.id],handle:t.handle}}function Sx(a,e=[],t=[],n=""){let i=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(Qe(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let p=os([n,d.relativePath]),g=t.concat(d);o.children&&o.children.length>0&&(Qe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Sx(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:ZT(p,o.index),routesMeta:g})};return a.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,l);else for(let d of Ax(o.path))i(o,l,d)}),e}function Ax(a){let e=a.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let l=Ax(n.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&h.push(...l),h.map(d=>a.startsWith("/")&&d===""?"/":d)}function GT(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:eP(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var XT=/^:[\w-]+$/,qT=3,YT=2,KT=1,QT=10,JT=-2,rE=a=>a==="*";function ZT(a,e){let t=a.split("/"),n=t.length;return t.some(rE)&&(n+=JT),e&&(n+=YT),t.filter(i=>!rE(i)).reduce((i,o)=>i+(XT.test(o)?qT:o===""?KT:QT),n)}function eP(a,e){return a.length===e.length&&a.slice(0,-1).every((n,i)=>n===e[i])?a[a.length-1]-e[e.length-1]:0}function tP(a,e,t=!1){let{routesMeta:n}=a,i={},o="/",l=[];for(let h=0;h<n.length;++h){let d=n[h],p=h===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",m=Nm({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),v=d.route;if(!m&&p&&t&&!n[n.length-1].route.index&&(m=Nm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:os([o,m.pathname]),pathnameBase:aP(os([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=os([o,m.pathnameBase]))}return l}function Nm(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=nP(a.path,a.caseSensitive,a.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:n.reduce((p,{paramName:g,isOptional:m},v)=>{if(g==="*"){let S=h[v]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=h[v];return m&&!b?p[g]=void 0:p[g]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:a}}function nP(a,e=!1,t=!0){xn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],i="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(n.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),i+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":a!==""&&a!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function rP(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Pi(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}function iP(a,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof a=="string"?mo(a):a;return{pathname:t?t.startsWith("/")?t:sP(t,e):e,search:oP(n),hash:lP(i)}}function sP(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function R0(a,e,t,n){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ex(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function M1(a){let e=Ex(a);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function I1(a,e,t,n=!1){let i;typeof a=="string"?i=mo(a):(i={...a},Qe(!i.pathname||!i.pathname.includes("?"),R0("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),R0("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),R0("#","search","hash",i)));let o=a===""||i.pathname==="",l=o?"/":i.pathname,h;if(l==null)h=t;else{let m=e.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}h=m>=0?e[m]:"/"}let d=iP(i,h),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var os=a=>a.join("/").replace(/\/\/+/g,"/"),aP=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),oP=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,lP=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,Fm=class{constructor(a,e,t,n=!1){this.status=a,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Id(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var xx=["POST","PUT","PATCH","DELETE"],uP=new Set(xx),cP=["GET",...xx],hP=new Set(cP),dP=new Set([301,302,303,307,308]),fP=new Set([307,308]),T0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pP={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ed={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},D1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gP=a=>({hasErrorBoundary:!!a.hasErrorBoundary}),_x="remix-router-transitions",Cx=Symbol("ResetLoaderData");function mP(a){const e=a.window?a.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Qe(a.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=a.mapRouteProperties||gP,i={},o=Dm(a.routes,n,void 0,i),l,h=a.basename||"/",d=a.dataStrategy||SP,p=a.patchRoutesOnNavigation,g={...a.future},m=null,v=new Set,b=null,S=null,A=null,x=a.hydrationData!=null,_=La(o,a.history.location,h),P=!1,M=null;if(_==null&&!p){let O=Qr(404,{pathname:a.history.location.pathname}),{matches:H,route:W}=pE(o);_=H,M={[W.id]:O}}_&&!a.hydrationData&&Ao(_,o,a.history.location.pathname).active&&(_=null);let I;if(_)if(_.some(O=>O.route.lazy))I=!1;else if(!_.some(O=>O.route.loader))I=!0;else{let O=a.hydrationData?a.hydrationData.loaderData:null,H=a.hydrationData?a.hydrationData.errors:null;if(H){let W=_.findIndex(Q=>H[Q.route.id]!==void 0);I=_.slice(0,W+1).every(Q=>!nw(Q.route,O,H))}else I=_.every(W=>!nw(W.route,O,H))}else{I=!1,_=[];let O=Ao(null,o,a.history.location.pathname);O.active&&O.matches&&(P=!0,_=O.matches)}let L,T={historyAction:a.history.action,location:a.history.location,matches:_,initialized:I,navigation:T0,restoreScrollPosition:a.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:a.hydrationData&&a.hydrationData.loaderData||{},actionData:a.hydrationData&&a.hydrationData.actionData||null,errors:a.hydrationData&&a.hydrationData.errors||M,fetchers:new Map,blockers:new Map},N="POP",G=!1,q,ae=!1,oe=new Map,$e=null,Ue=!1,Ie=!1,nt=new Set,J=new Map,ie=0,ee=-1,fe=new Map,re=new Set,$=new Map,X=new Map,ce=new Set,ke=new Map,Oe,_e=null;function Ce(){if(m=a.history.listen(({action:O,location:H,delta:W})=>{if(Oe){Oe(),Oe=void 0;return}xn(ke.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=hu({currentLocation:T.location,nextLocation:H,historyAction:O});if(Q&&W!=null){let ue=new Promise(xe=>{Oe=xe});a.history.go(W*-1),sa(Q,{state:"blocked",location:H,proceed(){sa(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),ue.then(()=>a.history.go(W))},reset(){let xe=new Map(T.blockers);xe.set(Q,ed),rt({blockers:xe})}});return}return ii(O,H)}),t){MP(e,oe);let O=()=>IP(e,oe);e.addEventListener("pagehide",O),$e=()=>e.removeEventListener("pagehide",O)}return T.initialized||ii("POP",T.location,{initialHydration:!0}),L}function Ge(){m&&m(),$e&&$e(),v.clear(),q&&q.abort(),T.fetchers.forEach((O,H)=>uu(H)),T.blockers.forEach((O,H)=>cu(H))}function lt(O){return v.add(O),()=>v.delete(O)}function rt(O,H={}){T={...T,...O};let W=[],Q=[];T.fetchers.forEach((ue,xe)=>{ue.state==="idle"&&(ce.has(xe)?W.push(xe):Q.push(xe))}),ce.forEach(ue=>{!T.fetchers.has(ue)&&!J.has(ue)&&W.push(ue)}),[...v].forEach(ue=>ue(T,{deletedFetchers:W,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),W.forEach(ue=>uu(ue)),Q.forEach(ue=>T.fetchers.delete(ue))}function ri(O,H,{flushSync:W}={}){var le,Fe;let Q=T.actionData!=null&&T.navigation.formMethod!=null&&ki(T.navigation.formMethod)&&T.navigation.state==="loading"&&((le=O.state)==null?void 0:le._isRedirect)!==!0,ue;H.actionData?Object.keys(H.actionData).length>0?ue=H.actionData:ue=null:Q?ue=T.actionData:ue=null;let xe=H.loaderData?dE(T.loaderData,H.loaderData,H.matches||[],H.errors):T.loaderData,Pe=T.blockers;Pe.size>0&&(Pe=new Map(Pe),Pe.forEach((Ve,vt)=>Pe.set(vt,ed)));let pe=G===!0||T.navigation.formMethod!=null&&ki(T.navigation.formMethod)&&((Fe=O.state)==null?void 0:Fe._isRedirect)!==!0;l&&(o=l,l=void 0),Ue||N==="POP"||(N==="PUSH"?a.history.push(O,O.state):N==="REPLACE"&&a.history.replace(O,O.state));let we;if(N==="POP"){let Ve=oe.get(T.location.pathname);Ve&&Ve.has(O.pathname)?we={currentLocation:T.location,nextLocation:O}:oe.has(O.pathname)&&(we={currentLocation:O,nextLocation:T.location})}else if(ae){let Ve=oe.get(T.location.pathname);Ve?Ve.add(O.pathname):(Ve=new Set([O.pathname]),oe.set(T.location.pathname,Ve)),we={currentLocation:T.location,nextLocation:O}}rt({...H,actionData:ue,loaderData:xe,historyAction:N,location:O,initialized:!0,navigation:T0,revalidation:"idle",restoreScrollPosition:mh(O,H.matches||T.matches),preventScrollReset:pe,blockers:Pe},{viewTransitionOpts:we,flushSync:W===!0}),N="POP",G=!1,ae=!1,Ue=!1,Ie=!1,_e==null||_e.resolve(),_e=null}async function ch(O,H){if(typeof O=="number"){a.history.go(O);return}let W=tw(T.location,T.matches,h,O,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:Q,submission:ue,error:xe}=iE(!1,W,H),Pe=T.location,pe=Md(T.location,Q,H&&H.state);pe={...pe,...a.history.encodeLocation(pe)};let we=H&&H.replace!=null?H.replace:void 0,le="PUSH";we===!0?le="REPLACE":we===!1||ue!=null&&ki(ue.formMethod)&&ue.formAction===T.location.pathname+T.location.search&&(le="REPLACE");let Fe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Ve=(H&&H.flushSync)===!0,vt=hu({currentLocation:Pe,nextLocation:pe,historyAction:le});if(vt){sa(vt,{state:"blocked",location:pe,proceed(){sa(vt,{state:"proceeding",proceed:void 0,reset:void 0,location:pe}),ch(O,H)},reset(){let At=new Map(T.blockers);At.set(vt,ed),rt({blockers:At})}});return}await ii(le,pe,{submission:ue,pendingError:xe,preventScrollReset:Fe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Ve})}function au(){_e||(_e=DP()),lu(),rt({revalidation:"loading"});let O=_e.promise;return T.navigation.state==="submitting"?O:T.navigation.state==="idle"?(ii(T.historyAction,T.location,{startUninterruptedRevalidation:!0}),O):(ii(N||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:ae===!0}),O)}async function ii(O,H,W){q&&q.abort(),q=null,N=O,Ue=(W&&W.startUninterruptedRevalidation)===!0,aa(T.location,T.matches),G=(W&&W.preventScrollReset)===!0,ae=(W&&W.enableViewTransition)===!0;let Q=l||o,ue=W&&W.overrideNavigation,xe=W!=null&&W.initialHydration&&T.matches&&T.matches.length>0&&!P?T.matches:La(Q,H,h),Pe=(W&&W.flushSync)===!0;if(xe&&T.initialized&&!Ie&&kP(T.location,H)&&!(W&&W.submission&&ki(W.submission.formMethod))){ri(H,{matches:xe},{flushSync:Pe});return}let pe=Ao(xe,Q,H.pathname);if(pe.active&&pe.matches&&(xe=pe.matches),!xe){let{error:wt,notFoundMatches:pt,route:Ht}=So(H.pathname);ri(H,{matches:pt,loaderData:{},errors:{[Ht.id]:wt}},{flushSync:Pe});return}q=new AbortController;let we=Fu(a.history,H,q.signal,W&&W.submission),le;if(W&&W.pendingError)le=[Bo(xe).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&ki(W.submission.formMethod)){let wt=await Ep(we,H,W.submission,xe,pe.active,{replace:W.replace,flushSync:Pe});if(wt.shortCircuited)return;if(wt.pendingActionResult){let[pt,Ht]=wt.pendingActionResult;if(Lr(Ht)&&Id(Ht.error)&&Ht.error.status===404){q=null,ri(H,{matches:wt.matches,loaderData:{},errors:{[pt]:Ht.error}});return}}xe=wt.matches||xe,le=wt.pendingActionResult,ue=P0(H,W.submission),Pe=!1,pe.active=!1,we=Fu(a.history,we.url,we.signal)}let{shortCircuited:Fe,matches:Ve,loaderData:vt,errors:At}=await xp(we,H,xe,pe.active,ue,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,Pe,le);Fe||(q=null,ri(H,{matches:Ve||xe,...fE(le),loaderData:vt,errors:At}))}async function Ep(O,H,W,Q,ue,xe={}){lu();let Pe=PP(H,W);if(rt({navigation:Pe},{flushSync:xe.flushSync===!0}),ue){let le=await Eo(Q,H.pathname,O.signal);if(le.type==="aborted")return{shortCircuited:!0};if(le.type==="error"){let Fe=Bo(le.partialMatches).route.id;return{matches:le.partialMatches,pendingActionResult:[Fe,{type:"error",error:le.error}]}}else if(le.matches)Q=le.matches;else{let{notFoundMatches:Fe,error:Ve,route:vt}=So(H.pathname);return{matches:Fe,pendingActionResult:[vt.id,{type:"error",error:Ve}]}}}let pe,we=od(Q,H);if(!we.route.action&&!we.route.lazy)pe={type:"error",error:Qr(405,{method:O.method,pathname:H.pathname,routeId:we.route.id})};else if(pe=(await ia("action",T,O,[we],Q,null))[we.route.id],O.signal.aborted)return{shortCircuited:!0};if(Vo(pe)){let le;return xe&&xe.replace!=null?le=xe.replace:le=uE(pe.response.headers.get("Location"),new URL(O.url),h)===T.location.pathname+T.location.search,await si(O,pe,!0,{submission:W,replace:le}),{shortCircuited:!0}}if(Lr(pe)){let le=Bo(Q,we.route.id);return(xe&&xe.replace)!==!0&&(N="PUSH"),{matches:Q,pendingActionResult:[le.route.id,pe]}}return{matches:Q,pendingActionResult:[we.route.id,pe]}}async function xp(O,H,W,Q,ue,xe,Pe,pe,we,le,Fe){let Ve=ue||P0(H,xe),vt=xe||Pe||mE(Ve),At=!Ue&&!we;if(Q){if(At){let Bt=ou(Fe);rt({navigation:Ve,...Bt!==void 0?{actionData:Bt}:{}},{flushSync:le})}let ct=await Eo(W,H.pathname,O.signal);if(ct.type==="aborted")return{shortCircuited:!0};if(ct.type==="error"){let Bt=Bo(ct.partialMatches).route.id;return{matches:ct.partialMatches,loaderData:{},errors:{[Bt]:ct.error}}}else if(ct.matches)W=ct.matches;else{let{error:Bt,notFoundMatches:fu,route:ua}=So(H.pathname);return{matches:fu,loaderData:{},errors:{[ua.id]:Bt}}}}let wt=l||o,[pt,Ht]=aE(a.history,T,W,vt,H,we===!0,Ie,nt,ce,$,re,wt,h,Fe);if(ee=++ie,pt.length===0&&Ht.length===0){let ct=fh();return ri(H,{matches:W,loaderData:{},errors:Fe&&Lr(Fe[1])?{[Fe[0]]:Fe[1].error}:null,...fE(Fe),...ct?{fetchers:new Map(T.fetchers)}:{}},{flushSync:le}),{shortCircuited:!0}}if(At){let ct={};if(!Q){ct.navigation=Ve;let Bt=ou(Fe);Bt!==void 0&&(ct.actionData=Bt)}Ht.length>0&&(ct.fetchers=_p(Ht)),rt(ct,{flushSync:le})}Ht.forEach(ct=>{Kn(ct.key),ct.controller&&J.set(ct.key,ct.controller)});let ds=()=>Ht.forEach(ct=>Kn(ct.key));q&&q.signal.addEventListener("abort",ds);let{loaderResults:oa,fetcherResults:Fr}=await dh(T,W,pt,Ht,O);if(O.signal.aborted)return{shortCircuited:!0};q&&q.signal.removeEventListener("abort",ds),Ht.forEach(ct=>J.delete(ct.key));let dr=Ng(oa);if(dr)return await si(O,dr.result,!0,{replace:pe}),{shortCircuited:!0};if(dr=Ng(Fr),dr)return re.add(dr.key),await si(O,dr.result,!0,{replace:pe}),{shortCircuited:!0};let{loaderData:yh,errors:xo}=hE(T,W,oa,Fe,Ht,Fr);we&&T.errors&&(xo={...T.errors,...xo});let ut=fh(),du=ph(ee),la=ut||du||Ht.length>0;return{matches:W,loaderData:yh,errors:xo,...la?{fetchers:new Map(T.fetchers)}:{}}}function ou(O){if(O&&!Lr(O[1]))return{[O[0]]:O[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function _p(O){return O.forEach(H=>{let W=T.fetchers.get(H.key),Q=td(void 0,W?W.data:void 0);T.fetchers.set(H.key,Q)}),new Map(T.fetchers)}async function hh(O,H,W,Q){Kn(O);let ue=(Q&&Q.flushSync)===!0,xe=l||o,Pe=tw(T.location,T.matches,h,W,H,Q==null?void 0:Q.relative),pe=La(xe,Pe,h),we=Ao(pe,xe,Pe);if(we.active&&we.matches&&(pe=we.matches),!pe){hr(O,H,Qr(404,{pathname:Pe}),{flushSync:ue});return}let{path:le,submission:Fe,error:Ve}=iE(!0,Pe,Q);if(Ve){hr(O,H,Ve,{flushSync:ue});return}let vt=od(pe,le),At=(Q&&Q.preventScrollReset)===!0;if(Fe&&ki(Fe.formMethod)){await vo(O,H,le,vt,pe,we.active,ue,At,Fe);return}$.set(O,{routeId:H,path:le}),await ra(O,H,le,vt,pe,we.active,ue,At,Fe)}async function vo(O,H,W,Q,ue,xe,Pe,pe,we){lu(),$.delete(O);function le(Et){if(!Et.route.action&&!Et.route.lazy){let pn=Qr(405,{method:we.formMethod,pathname:W,routeId:H});return hr(O,H,pn,{flushSync:Pe}),!0}return!1}if(!xe&&le(Q))return;let Fe=T.fetchers.get(O);ai(O,LP(we,Fe),{flushSync:Pe});let Ve=new AbortController,vt=Fu(a.history,W,Ve.signal,we);if(xe){let Et=await Eo(ue,W,vt.signal);if(Et.type==="aborted")return;if(Et.type==="error"){hr(O,H,Et.error,{flushSync:Pe});return}else if(Et.matches){if(ue=Et.matches,Q=od(ue,W),le(Q))return}else{hr(O,H,Qr(404,{pathname:W}),{flushSync:Pe});return}}J.set(O,Ve);let At=ie,pt=(await ia("action",T,vt,[Q],ue,O))[Q.route.id];if(vt.signal.aborted){J.get(O)===Ve&&J.delete(O);return}if(ce.has(O)){if(Vo(pt)||Lr(pt)){ai(O,Ta(void 0));return}}else{if(Vo(pt))if(J.delete(O),ee>At){ai(O,Ta(void 0));return}else return re.add(O),ai(O,td(we)),si(vt,pt,!1,{fetcherSubmission:we,preventScrollReset:pe});if(Lr(pt)){hr(O,H,pt.error);return}}let Ht=T.navigation.location||T.location,ds=Fu(a.history,Ht,Ve.signal),oa=l||o,Fr=T.navigation.state!=="idle"?La(oa,T.navigation.location,h):T.matches;Qe(Fr,"Didn't find any matches after fetcher action");let dr=++ie;fe.set(O,dr);let yh=td(we,pt.data);T.fetchers.set(O,yh);let[xo,ut]=aE(a.history,T,Fr,we,Ht,!1,Ie,nt,ce,$,re,oa,h,[Q.route.id,pt]);ut.filter(Et=>Et.key!==O).forEach(Et=>{let pn=Et.key,Tp=T.fetchers.get(pn),fr=td(void 0,Tp?Tp.data:void 0);T.fetchers.set(pn,fr),Kn(pn),Et.controller&&J.set(pn,Et.controller)}),rt({fetchers:new Map(T.fetchers)});let du=()=>ut.forEach(Et=>Kn(Et.key));Ve.signal.addEventListener("abort",du);let{loaderResults:la,fetcherResults:ct}=await dh(T,Fr,xo,ut,ds);if(Ve.signal.aborted)return;Ve.signal.removeEventListener("abort",du),fe.delete(O),J.delete(O),ut.forEach(Et=>J.delete(Et.key));let Bt=Ng(la);if(Bt)return si(ds,Bt.result,!1,{preventScrollReset:pe});if(Bt=Ng(ct),Bt)return re.add(Bt.key),si(ds,Bt.result,!1,{preventScrollReset:pe});let{loaderData:fu,errors:ua}=hE(T,Fr,la,void 0,ut,ct);if(T.fetchers.has(O)){let Et=Ta(pt.data);T.fetchers.set(O,Et)}ph(dr),T.navigation.state==="loading"&&dr>ee?(Qe(N,"Expected pending action"),q&&q.abort(),ri(T.navigation.location,{matches:Fr,loaderData:fu,errors:ua,fetchers:new Map(T.fetchers)})):(rt({errors:ua,loaderData:dE(T.loaderData,fu,Fr,ua),fetchers:new Map(T.fetchers)}),Ie=!1)}async function ra(O,H,W,Q,ue,xe,Pe,pe,we){let le=T.fetchers.get(O);ai(O,td(we,le?le.data:void 0),{flushSync:Pe});let Fe=new AbortController,Ve=Fu(a.history,W,Fe.signal);if(xe){let pt=await Eo(ue,W,Ve.signal);if(pt.type==="aborted")return;if(pt.type==="error"){hr(O,H,pt.error,{flushSync:Pe});return}else if(pt.matches)ue=pt.matches,Q=od(ue,W);else{hr(O,H,Qr(404,{pathname:W}),{flushSync:Pe});return}}J.set(O,Fe);let vt=ie,wt=(await ia("loader",T,Ve,[Q],ue,O))[Q.route.id];if(J.get(O)===Fe&&J.delete(O),!Ve.signal.aborted){if(ce.has(O)){ai(O,Ta(void 0));return}if(Vo(wt))if(ee>vt){ai(O,Ta(void 0));return}else{re.add(O),await si(Ve,wt,!1,{preventScrollReset:pe});return}if(Lr(wt)){hr(O,H,wt.error);return}ai(O,Ta(wt.data))}}async function si(O,H,W,{submission:Q,fetcherSubmission:ue,preventScrollReset:xe,replace:Pe}={}){H.response.headers.has("X-Remix-Revalidate")&&(Ie=!0);let pe=H.response.headers.get("Location");Qe(pe,"Expected a Location header on the redirect Response"),pe=uE(pe,new URL(O.url),h);let we=Md(T.location,pe,{_isRedirect:!0});if(t){let wt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))wt=!0;else if(D1.test(pe)){const pt=a.history.createURL(pe);wt=pt.origin!==e.location.origin||Pi(pt.pathname,h)==null}if(wt){Pe?e.location.replace(pe):e.location.assign(pe);return}}q=null;let le=Pe===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Fe,formAction:Ve,formEncType:vt}=T.navigation;!Q&&!ue&&Fe&&Ve&&vt&&(Q=mE(T.navigation));let At=Q||ue;if(fP.has(H.response.status)&&At&&ki(At.formMethod))await ii(le,we,{submission:{...At,formAction:pe},preventScrollReset:xe||G,enableViewTransition:W?ae:void 0});else{let wt=P0(we,Q);await ii(le,we,{overrideNavigation:wt,fetcherSubmission:ue,preventScrollReset:xe||G,enableViewTransition:W?ae:void 0})}}async function ia(O,H,W,Q,ue,xe){let Pe,pe={};try{Pe=await AP(d,O,H,W,Q,ue,xe,i,n)}catch(we){return Q.forEach(le=>{pe[le.route.id]={type:"error",error:we}}),pe}for(let[we,le]of Object.entries(Pe))if(RP(le)){let Fe=le.result;pe[we]={type:"redirect",response:_P(Fe,W,we,ue,h)}}else pe[we]=await xP(le);return pe}async function dh(O,H,W,Q,ue){let xe=ia("loader",O,ue,W,H,null),Pe=Promise.all(Q.map(async le=>{if(le.matches&&le.match&&le.controller){let Ve=(await ia("loader",O,Fu(a.history,le.path,le.controller.signal),[le.match],le.matches,le.key))[le.match.route.id];return{[le.key]:Ve}}else return Promise.resolve({[le.key]:{type:"error",error:Qr(404,{pathname:le.path})}})})),pe=await xe,we=(await Pe).reduce((le,Fe)=>Object.assign(le,Fe),{});return{loaderResults:pe,fetcherResults:we}}function lu(){Ie=!0,$.forEach((O,H)=>{J.has(H)&&nt.add(H),Kn(H)})}function ai(O,H,W={}){T.fetchers.set(O,H),rt({fetchers:new Map(T.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function hr(O,H,W,Q={}){let ue=Bo(T.matches,H);uu(O),rt({errors:{[ue.route.id]:W},fetchers:new Map(T.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function wo(O){return X.set(O,(X.get(O)||0)+1),ce.has(O)&&ce.delete(O),T.fetchers.get(O)||pP}function uu(O){let H=T.fetchers.get(O);J.has(O)&&!(H&&H.state==="loading"&&fe.has(O))&&Kn(O),$.delete(O),fe.delete(O),re.delete(O),ce.delete(O),nt.delete(O),T.fetchers.delete(O)}function bo(O){let H=(X.get(O)||0)-1;H<=0?(X.delete(O),ce.add(O)):X.set(O,H),rt({fetchers:new Map(T.fetchers)})}function Kn(O){let H=J.get(O);H&&(H.abort(),J.delete(O))}function Cp(O){for(let H of O){let W=wo(H),Q=Ta(W.data);T.fetchers.set(H,Q)}}function fh(){let O=[],H=!1;for(let W of re){let Q=T.fetchers.get(W);Qe(Q,`Expected fetcher: ${W}`),Q.state==="loading"&&(re.delete(W),O.push(W),H=!0)}return Cp(O),H}function ph(O){let H=[];for(let[W,Q]of fe)if(Q<O){let ue=T.fetchers.get(W);Qe(ue,`Expected fetcher: ${W}`),ue.state==="loading"&&(Kn(W),fe.delete(W),H.push(W))}return Cp(H),H.length>0}function $y(O,H){let W=T.blockers.get(O)||ed;return ke.get(O)!==H&&ke.set(O,H),W}function cu(O){T.blockers.delete(O),ke.delete(O)}function sa(O,H){let W=T.blockers.get(O)||ed;Qe(W.state==="unblocked"&&H.state==="blocked"||W.state==="blocked"&&H.state==="blocked"||W.state==="blocked"&&H.state==="proceeding"||W.state==="blocked"&&H.state==="unblocked"||W.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${H.state}`);let Q=new Map(T.blockers);Q.set(O,H),rt({blockers:Q})}function hu({currentLocation:O,nextLocation:H,historyAction:W}){if(ke.size===0)return;ke.size>1&&xn(!1,"A router only supports one blocker at a time");let Q=Array.from(ke.entries()),[ue,xe]=Q[Q.length-1],Pe=T.blockers.get(ue);if(!(Pe&&Pe.state==="proceeding")&&xe({currentLocation:O,nextLocation:H,historyAction:W}))return ue}function So(O){let H=Qr(404,{pathname:O}),W=l||o,{matches:Q,route:ue}=pE(W);return{notFoundMatches:Q,route:ue,error:H}}function gh(O,H,W){if(b=O,A=H,S=W||null,!x&&T.navigation===T0){x=!0;let Q=mh(T.location,T.matches);Q!=null&&rt({restoreScrollPosition:Q})}return()=>{b=null,A=null,S=null}}function hs(O,H){return S&&S(O,H.map(Q=>WT(Q,T.loaderData)))||O.key}function aa(O,H){if(b&&A){let W=hs(O,H);b[W]=A()}}function mh(O,H){if(b){let W=hs(O,H),Q=b[W];if(typeof Q=="number")return Q}return null}function Ao(O,H,W){if(p)if(O){if(Object.keys(O[0].params).length>0)return{active:!0,matches:Kg(H,W,h,!0)}}else return{active:!0,matches:Kg(H,W,h,!0)||[]};return{active:!1,matches:null}}async function Eo(O,H,W){if(!p)return{type:"success",matches:O};let Q=O;for(;;){let ue=l==null,xe=l||o,Pe=i;try{await p({path:H,matches:Q,patch:(le,Fe)=>{W.aborted||lE(le,Fe,xe,Pe,n)}})}catch(le){return{type:"error",error:le,partialMatches:Q}}finally{ue&&!W.aborted&&(o=[...o])}if(W.aborted)return{type:"aborted"};let pe=La(xe,H,h);if(pe)return{type:"success",matches:pe};let we=Kg(xe,H,h,!0);if(!we||Q.length===we.length&&Q.every((le,Fe)=>le.route.id===we[Fe].route.id))return{type:"success",matches:null};Q=we}}function kp(O){i={},l=Dm(O,n,void 0,i)}function Rp(O,H){let W=l==null;lE(O,H,l||o,i,n),W&&(o=[...o],rt({}))}return L={get basename(){return h},get future(){return g},get state(){return T},get routes(){return o},get window(){return e},initialize:Ce,subscribe:lt,enableScrollRestoration:gh,navigate:ch,fetch:hh,revalidate:au,createHref:O=>a.history.createHref(O),encodeLocation:O=>a.history.encodeLocation(O),getFetcher:wo,deleteFetcher:bo,dispose:Ge,getBlocker:$y,deleteBlocker:cu,patchRoutes:Rp,_internalFetchControllers:J,_internalSetRoutes:kp},L}function yP(a){return a!=null&&("formData"in a&&a.formData!=null||"body"in a&&a.body!==void 0)}function tw(a,e,t,n,i,o){let l,h;if(i){l=[];for(let p of e)if(l.push(p),p.route.id===i){h=p;break}}else l=e,h=e[e.length-1];let d=I1(n||".",M1(l),Pi(a.pathname,t)||a.pathname,o==="path");if(n==null&&(d.search=a.search,d.hash=a.hash),(n==null||n===""||n===".")&&h){let p=N1(d.search);if(h.route.index&&!p)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let g=new URLSearchParams(d.search),m=g.getAll("index");g.delete("index"),m.filter(b=>b).forEach(b=>g.append("index",b));let v=g.toString();d.search=v?`?${v}`:""}}return t!=="/"&&(d.pathname=d.pathname==="/"?t:os([t,d.pathname])),ho(d)}function iE(a,e,t){if(!t||!yP(t))return{path:e};if(t.formMethod&&!TP(t.formMethod))return{path:e,error:Qr(405,{method:t.formMethod})};let n=()=>({path:e,error:Qr(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),l=Rx(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!ki(o))return n();let m=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((v,[b,S])=>`${v}${b}=${S}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:l,formEncType:t.formEncType,formData:void 0,json:void 0,text:m}}}else if(t.formEncType==="application/json"){if(!ki(o))return n();try{let m=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:l,formEncType:t.formEncType,formData:void 0,json:m,text:void 0}}}catch{return n()}}}Qe(typeof FormData=="function","FormData is not available in this environment");let h,d;if(t.formData)h=rw(t.formData),d=t.formData;else if(t.body instanceof FormData)h=rw(t.body),d=t.body;else if(t.body instanceof URLSearchParams)h=t.body,d=cE(h);else if(t.body==null)h=new URLSearchParams,d=new FormData;else try{h=new URLSearchParams(t.body),d=cE(h)}catch{return n()}let p={formMethod:o,formAction:l,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(ki(p.formMethod))return{path:e,submission:p};let g=mo(e);return a&&g.search&&N1(g.search)&&h.append("index",""),g.search=`?${h}`,{path:ho(g),submission:p}}function sE(a,e,t=!1){let n=a.findIndex(i=>i.route.id===e);return n>=0?a.slice(0,t?n+1:n):a}function aE(a,e,t,n,i,o,l,h,d,p,g,m,v,b){let S=b?Lr(b[1])?b[1].error:b[1].data:void 0,A=a.createURL(e.location),x=a.createURL(i),_=t;o&&e.errors?_=sE(t,Object.keys(e.errors)[0],!0):b&&Lr(b[1])&&(_=sE(t,b[0]));let P=b?b[1].statusCode:void 0,M=P&&P>=400,I=_.filter((T,N)=>{let{route:G}=T;if(G.lazy)return!0;if(G.loader==null)return!1;if(o)return nw(G,e.loaderData,e.errors);if(vP(e.loaderData,e.matches[N],T))return!0;let q=e.matches[N],ae=T;return oE(T,{currentUrl:A,currentParams:q.params,nextUrl:x,nextParams:ae.params,...n,actionResult:S,actionStatus:P,defaultShouldRevalidate:M?!1:l||A.pathname+A.search===x.pathname+x.search||A.search!==x.search||wP(q,ae)})}),L=[];return p.forEach((T,N)=>{if(o||!t.some($e=>$e.route.id===T.routeId)||d.has(N))return;let G=La(m,T.path,v);if(!G){L.push({key:N,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let q=e.fetchers.get(N),ae=od(G,T.path),oe=!1;g.has(N)?oe=!1:h.has(N)?(h.delete(N),oe=!0):q&&q.state!=="idle"&&q.data===void 0?oe=l:oe=oE(ae,{currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:t[t.length-1].params,...n,actionResult:S,actionStatus:P,defaultShouldRevalidate:M?!1:l}),oe&&L.push({key:N,routeId:T.routeId,path:T.path,matches:G,match:ae,controller:new AbortController})}),[I,L]}function nw(a,e,t){if(a.lazy)return!0;if(!a.loader)return!1;let n=e!=null&&e[a.id]!==void 0,i=t!=null&&t[a.id]!==void 0;return!n&&i?!1:typeof a.loader=="function"&&a.loader.hydrate===!0?!0:!n&&!i}function vP(a,e,t){let n=!e||t.route.id!==e.route.id,i=!a.hasOwnProperty(t.route.id);return n||i}function wP(a,e){let t=a.route.path;return a.pathname!==e.pathname||t!=null&&t.endsWith("*")&&a.params["*"]!==e.params["*"]}function oE(a,e){if(a.route.shouldRevalidate){let t=a.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function lE(a,e,t,n,i){let o;if(a){let d=n[a];Qe(d,`No route found to patch children into: routeId = ${a}`),d.children||(d.children=[]),o=d.children}else o=t;let l=e.filter(d=>!o.some(p=>kx(d,p))),h=Dm(l,i,[a||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...h)}function kx(a,e){return"id"in a&&"id"in e&&a.id===e.id?!0:a.index===e.index&&a.path===e.path&&a.caseSensitive===e.caseSensitive?(!a.children||a.children.length===0)&&(!e.children||e.children.length===0)?!0:a.children.every((t,n)=>{var i;return(i=e.children)==null?void 0:i.some(o=>kx(t,o))}):!1}async function bP(a,e,t){if(!a.lazy)return;let n=await a.lazy();if(!a.lazy)return;let i=t[a.id];Qe(i,"No route found in manifest");let o={};for(let l in n){let d=i[l]!==void 0&&l!=="hasErrorBoundary";xn(!d,`Route "${i.id}" has a static property "${l}" defined but its lazy function is also returning a value for this property. The lazy route property "${l}" will be ignored.`),!d&&!UT.has(l)&&(o[l]=n[l])}Object.assign(i,o),Object.assign(i,{...e(i),lazy:void 0})}async function SP({matches:a}){let e=a.filter(n=>n.shouldLoad);return(await Promise.all(e.map(n=>n.resolve()))).reduce((n,i,o)=>Object.assign(n,{[e[o].route.id]:i}),{})}async function AP(a,e,t,n,i,o,l,h,d,p){let g=o.map(b=>b.route.lazy?bP(b.route,d,h):void 0),m=o.map((b,S)=>{let A=g[S],x=i.some(P=>P.route.id===b.route.id);return{...b,shouldLoad:x,resolve:async P=>(P&&n.method==="GET"&&(b.route.lazy||b.route.loader)&&(x=!0),x?EP(e,n,b,A,P,p):Promise.resolve({type:"data",result:void 0}))}}),v=await a({matches:m,request:n,params:o[0].params,fetcherKey:l,context:p});try{await Promise.all(g)}catch{}return v}async function EP(a,e,t,n,i,o){let l,h,d=p=>{let g,m=new Promise((S,A)=>g=A);h=()=>g(),e.signal.addEventListener("abort",h);let v=S=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${a}" [routeId: ${t.route.id}]`)):p({request:e,params:t.params,context:o},...S!==void 0?[S]:[]),b=(async()=>{try{return{type:"data",result:await(i?i(A=>v(A)):v())}}catch(S){return{type:"error",result:S}}})();return Promise.race([b,m])};try{let p=t.route[a];if(n)if(p){let g,[m]=await Promise.all([d(p).catch(v=>{g=v}),n]);if(g!==void 0)throw g;l=m}else if(await n,p=t.route[a],p)l=await d(p);else if(a==="action"){let g=new URL(e.url),m=g.pathname+g.search;throw Qr(405,{method:e.method,pathname:m,routeId:t.route.id})}else return{type:"data",result:void 0};else if(p)l=await d(p);else{let g=new URL(e.url),m=g.pathname+g.search;throw Qr(404,{pathname:m})}}catch(p){return{type:"error",result:p}}finally{h&&e.signal.removeEventListener("abort",h)}return l}async function xP(a){var n,i,o,l,h,d;let{result:e,type:t}=a;if(Tx(e)){let p;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new Fm(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?gE(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Fm(((o=e.init)==null?void 0:o.status)||500,void 0,e.data),statusCode:Id(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Id(e)?e.status:void 0}:gE(e)?{type:"data",data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function _P(a,e,t,n,i){let o=a.headers.get("Location");if(Qe(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!D1.test(o)){let l=n.slice(0,n.findIndex(h=>h.route.id===t)+1);o=tw(new URL(e.url),l,i,o),a.headers.set("Location",o)}return a}function uE(a,e,t){if(D1.test(a)){let n=a,i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),o=Pi(i.pathname,t)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return a}function Fu(a,e,t,n){let i=a.createURL(Rx(e)).toString(),o={signal:t};if(n&&ki(n.formMethod)){let{formMethod:l,formEncType:h}=n;o.method=l.toUpperCase(),h==="application/json"?(o.headers=new Headers({"Content-Type":h}),o.body=JSON.stringify(n.json)):h==="text/plain"?o.body=n.text:h==="application/x-www-form-urlencoded"&&n.formData?o.body=rw(n.formData):o.body=n.formData}return new Request(i,o)}function rw(a){let e=new URLSearchParams;for(let[t,n]of a.entries())e.append(t,typeof n=="string"?n:n.name);return e}function cE(a){let e=new FormData;for(let[t,n]of a.entries())e.append(t,n);return e}function CP(a,e,t,n=!1,i=!1){let o={},l=null,h,d=!1,p={},g=t&&Lr(t[1])?t[1].error:void 0;return a.forEach(m=>{if(!(m.route.id in e))return;let v=m.route.id,b=e[v];if(Qe(!Vo(b),"Cannot handle redirect results in processLoaderData"),Lr(b)){let S=b.error;if(g!==void 0&&(S=g,g=void 0),l=l||{},i)l[v]=S;else{let A=Bo(a,v);l[A.route.id]==null&&(l[A.route.id]=S)}n||(o[v]=Cx),d||(d=!0,h=Id(b.error)?b.error.status:500),b.headers&&(p[v]=b.headers)}else o[v]=b.data,b.statusCode&&b.statusCode!==200&&!d&&(h=b.statusCode),b.headers&&(p[v]=b.headers)}),g!==void 0&&t&&(l={[t[0]]:g},o[t[0]]=void 0),{loaderData:o,errors:l,statusCode:h||200,loaderHeaders:p}}function hE(a,e,t,n,i,o){let{loaderData:l,errors:h}=CP(e,t,n);return i.forEach(d=>{let{key:p,match:g,controller:m}=d,v=o[p];if(Qe(v,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(Lr(v)){let b=Bo(a.matches,g==null?void 0:g.route.id);h&&h[b.route.id]||(h={...h,[b.route.id]:v.error}),a.fetchers.delete(p)}else if(Vo(v))Qe(!1,"Unhandled fetcher revalidation redirect");else{let b=Ta(v.data);a.fetchers.set(p,b)}}),{loaderData:l,errors:h}}function dE(a,e,t,n){let i=Object.entries(e).filter(([,o])=>o!==Cx).reduce((o,[l,h])=>(o[l]=h,o),{});for(let o of t){let l=o.route.id;if(!e.hasOwnProperty(l)&&a.hasOwnProperty(l)&&o.route.loader&&(i[l]=a[l]),n&&n.hasOwnProperty(l))break}return i}function fE(a){return a?Lr(a[1])?{actionData:{}}:{actionData:{[a[0]]:a[1].data}}:{}}function Bo(a,e){return(e?a.slice(0,a.findIndex(n=>n.route.id===e)+1):[...a]).reverse().find(n=>n.route.hasErrorBoundary===!0)||a[0]}function pE(a){let e=a.length===1?a[0]:a.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Qr(a,{pathname:e,routeId:t,method:n,type:i,message:o}={}){let l="Unknown Server Error",h="Unknown @remix-run/router error";return a===400?(l="Bad Request",n&&e&&t?h=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(h="Unable to encode submission body")):a===403?(l="Forbidden",h=`Route "${t}" does not match URL "${e}"`):a===404?(l="Not Found",h=`No route matches URL "${e}"`):a===405&&(l="Method Not Allowed",n&&e&&t?h=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(h=`Invalid request method "${n.toUpperCase()}"`)),new Fm(a||500,l,new Error(h),!0)}function Ng(a){let e=Object.entries(a);for(let t=e.length-1;t>=0;t--){let[n,i]=e[t];if(Vo(i))return{key:n,result:i}}}function Rx(a){let e=typeof a=="string"?mo(a):a;return ho({...e,hash:""})}function kP(a,e){return a.pathname!==e.pathname||a.search!==e.search?!1:a.hash===""?e.hash!=="":a.hash===e.hash?!0:e.hash!==""}function RP(a){return Tx(a.result)&&dP.has(a.result.status)}function Lr(a){return a.type==="error"}function Vo(a){return(a&&a.type)==="redirect"}function gE(a){return typeof a=="object"&&a!=null&&"type"in a&&"data"in a&&"init"in a&&a.type==="DataWithResponseInit"}function Tx(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.headers=="object"&&typeof a.body<"u"}function TP(a){return hP.has(a.toUpperCase())}function ki(a){return uP.has(a.toUpperCase())}function N1(a){return new URLSearchParams(a).getAll("index").some(e=>e==="")}function od(a,e){let t=typeof e=="string"?mo(e).search:e.search;if(a[a.length-1].route.index&&N1(t||""))return a[a.length-1];let n=Ex(a);return n[n.length-1]}function mE(a){let{formMethod:e,formAction:t,formEncType:n,text:i,formData:o,json:l}=a;if(!(!e||!t||!n)){if(i!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:t,formEncType:n,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:l,text:void 0}}}function P0(a,e){return e?{state:"loading",location:a,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:a,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function PP(a,e){return{state:"submitting",location:a,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function td(a,e){return a?{state:"loading",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function LP(a,e){return{state:"submitting",formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text,data:e?e.data:void 0}}function Ta(a){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:a}}function MP(a,e){try{let t=a.sessionStorage.getItem(_x);if(t){let n=JSON.parse(t);for(let[i,o]of Object.entries(n||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function IP(a,e){if(e.size>0){let t={};for(let[n,i]of e)t[n]=[...i];try{a.sessionStorage.setItem(_x,JSON.stringify(t))}catch(n){xn(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function DP(){let a,e,t=new Promise((n,i)=>{a=async o=>{n(o);try{await t}catch{}},e=async o=>{i(o);try{await t}catch{}}});return{promise:t,resolve:a,reject:e}}var tu=B.createContext(null);tu.displayName="DataRouter";var gp=B.createContext(null);gp.displayName="DataRouterState";var F1=B.createContext({isTransitioning:!1});F1.displayName="ViewTransition";var Px=B.createContext(new Map);Px.displayName="Fetchers";var NP=B.createContext(null);NP.displayName="Await";var us=B.createContext(null);us.displayName="Navigation";var Ay=B.createContext(null);Ay.displayName="Location";var cs=B.createContext({outlet:null,matches:[],isDataRoute:!1});cs.displayName="Route";var O1=B.createContext(null);O1.displayName="RouteError";function FP(a,{relative:e}={}){Qe(mp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=B.useContext(us),{hash:i,pathname:o,search:l}=yp(a,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:os([t,o])),n.createHref({pathname:h,search:l,hash:i})}function mp(){return B.useContext(Ay)!=null}function nu(){return Qe(mp(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Ay).location}var Lx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mx(a){B.useContext(us).static||B.useLayoutEffect(a)}function Ix(){let{isDataRoute:a}=B.useContext(cs);return a?QP():OP()}function OP(){Qe(mp(),"useNavigate() may be used only in the context of a <Router> component.");let a=B.useContext(tu),{basename:e,navigator:t}=B.useContext(us),{matches:n}=B.useContext(cs),{pathname:i}=nu(),o=JSON.stringify(M1(n)),l=B.useRef(!1);return Mx(()=>{l.current=!0}),B.useCallback((d,p={})=>{if(xn(l.current,Lx),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=I1(d,JSON.parse(o),i,p.relative==="path");a==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:os([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,o,i,a])}var zP=B.createContext(null);function $P(a){let e=B.useContext(cs).outlet;return e&&B.createElement(zP.Provider,{value:a},e)}function yp(a,{relative:e}={}){let{matches:t}=B.useContext(cs),{pathname:n}=nu(),i=JSON.stringify(M1(t));return B.useMemo(()=>I1(a,JSON.parse(i),n,e==="path"),[a,i,n,e])}function HP(a,e,t,n){Qe(mp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=B.useContext(us),{matches:l}=B.useContext(cs),h=l[l.length-1],d=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",m=h&&h.route;{let P=m&&m.path||"";Dx(p,!m||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let v=nu(),b;b=v;let S=b.pathname||"/",A=S;if(g!=="/"){let P=g.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(P.length).join("/")}let x=!o&&t&&t.matches&&t.matches.length>0?t.matches:La(a,{pathname:A});return xn(m||x!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),xn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),WP(x&&x.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:os([g,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?g:os([g,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),l,t,n)}function BP(){let a=KP(),e=Id(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",a),l=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:i},t):null,l)}var jP=B.createElement(BP,null),UP=class extends B.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){console.error("React Router caught the following error during render",a,e)}render(){return this.state.error!==void 0?B.createElement(cs.Provider,{value:this.props.routeContext},B.createElement(O1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VP({routeContext:a,match:e,children:t}){let n=B.useContext(tu);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(cs.Provider,{value:a},t)}function WP(a,e=[],t=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let i=a,o=t==null?void 0:t.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Qe(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,h=-1;if(t)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:g,errors:m}=t,v=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!m||m[p.route.id]===void 0);if(p.route.lazy||v){l=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((d,p,g)=>{let m,v=!1,b=null,S=null;t&&(m=o&&p.route.id?o[p.route.id]:void 0,b=p.route.errorElement||jP,l&&(h<0&&g===0?(Dx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):h===g&&(v=!0,S=p.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,g+1)),x=()=>{let _;return m?_=b:v?_=S:p.route.Component?_=B.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=d,B.createElement(VP,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:t!=null},children:_})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?B.createElement(UP,{location:t.location,revalidation:t.revalidation,component:b,error:m,children:x(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):x()},null)}function z1(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GP(a){let e=B.useContext(tu);return Qe(e,z1(a)),e}function XP(a){let e=B.useContext(gp);return Qe(e,z1(a)),e}function qP(a){let e=B.useContext(cs);return Qe(e,z1(a)),e}function $1(a){let e=qP(a),t=e.matches[e.matches.length-1];return Qe(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function YP(){return $1("useRouteId")}function KP(){var n;let a=B.useContext(O1),e=XP("useRouteError"),t=$1("useRouteError");return a!==void 0?a:(n=e.errors)==null?void 0:n[t]}function QP(){let{router:a}=GP("useNavigate"),e=$1("useNavigate"),t=B.useRef(!1);return Mx(()=>{t.current=!0}),B.useCallback(async(i,o={})=>{xn(t.current,Lx),t.current&&(typeof i=="number"?a.navigate(i):await a.navigate(i,{fromRouteId:e,...o}))},[a,e])}var yE={};function Dx(a,e,t){!e&&!yE[a]&&(yE[a]=!0,xn(!1,t))}var vE={};function wE(a,e){!a&&!vE[e]&&(vE[e]=!0,console.warn(e))}function JP(a){let e={hasErrorBoundary:a.hasErrorBoundary||a.ErrorBoundary!=null||a.errorElement!=null};return a.Component&&(a.element&&xn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:B.createElement(a.Component),Component:void 0})),a.HydrateFallback&&(a.hydrateFallbackElement&&xn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:B.createElement(a.HydrateFallback),HydrateFallback:void 0})),a.ErrorBoundary&&(a.errorElement&&xn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:B.createElement(a.ErrorBoundary),ErrorBoundary:void 0})),e}var ZP=class{constructor(){this.status="pending",this.promise=new Promise((a,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",a(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function eL({router:a,flushSync:e}){let[t,n]=B.useState(a.state),[i,o]=B.useState(),[l,h]=B.useState({isTransitioning:!1}),[d,p]=B.useState(),[g,m]=B.useState(),[v,b]=B.useState(),S=B.useRef(new Map),A=B.useCallback((M,{deletedFetchers:I,flushSync:L,viewTransitionOpts:T})=>{M.fetchers.forEach((G,q)=>{G.data!==void 0&&S.current.set(q,G.data)}),I.forEach(G=>S.current.delete(G)),wE(L===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=a.window!=null&&a.window.document!=null&&typeof a.window.document.startViewTransition=="function";if(wE(T==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!T||!N){e&&L?e(()=>n(M)):B.startTransition(()=>n(M));return}if(e&&L){e(()=>{g&&(d&&d.resolve(),g.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:T.currentLocation,nextLocation:T.nextLocation})});let G=a.window.document.startViewTransition(()=>{e(()=>n(M))});G.finished.finally(()=>{e(()=>{p(void 0),m(void 0),o(void 0),h({isTransitioning:!1})})}),e(()=>m(G));return}g?(d&&d.resolve(),g.skipTransition(),b({state:M,currentLocation:T.currentLocation,nextLocation:T.nextLocation})):(o(M),h({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}))},[a.window,e,g,d]);B.useLayoutEffect(()=>a.subscribe(A),[a,A]),B.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new ZP)},[l]),B.useEffect(()=>{if(d&&i&&a.window){let M=i,I=d.promise,L=a.window.document.startViewTransition(async()=>{B.startTransition(()=>n(M)),await I});L.finished.finally(()=>{p(void 0),m(void 0),o(void 0),h({isTransitioning:!1})}),m(L)}},[i,d,a.window]),B.useEffect(()=>{d&&i&&t.location.key===i.location.key&&d.resolve()},[d,g,t.location,i]),B.useEffect(()=>{!l.isTransitioning&&v&&(o(v.state),h({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),b(void 0))},[l.isTransitioning,v]);let x=B.useMemo(()=>({createHref:a.createHref,encodeLocation:a.encodeLocation,go:M=>a.navigate(M),push:(M,I,L)=>a.navigate(M,{state:I,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(M,I,L)=>a.navigate(M,{replace:!0,state:I,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[a]),_=a.basename||"/",P=B.useMemo(()=>({router:a,navigator:x,static:!1,basename:_}),[a,x,_]);return B.createElement(B.Fragment,null,B.createElement(tu.Provider,{value:P},B.createElement(gp.Provider,{value:t},B.createElement(Px.Provider,{value:S.current},B.createElement(F1.Provider,{value:l},B.createElement(rL,{basename:_,location:t.location,navigationType:t.historyAction,navigator:x},B.createElement(tL,{routes:a.routes,future:a.future,state:t})))))),null)}var tL=B.memo(nL);function nL({routes:a,future:e,state:t}){return HP(a,void 0,t,e)}function Om(a){return $P(a.context)}function rL({basename:a="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:o=!1}){Qe(!mp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof t=="string"&&(t=mo(t));let{pathname:d="/",search:p="",hash:g="",state:m=null,key:v="default"}=t,b=B.useMemo(()=>{let S=Pi(d,l);return S==null?null:{location:{pathname:S,search:p,hash:g,state:m,key:v},navigationType:n}},[l,d,p,g,m,v,n]);return xn(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:B.createElement(us.Provider,{value:h},B.createElement(Ay.Provider,{children:e,value:b}))}var Qg="get",Jg="application/x-www-form-urlencoded";function Ey(a){return a!=null&&typeof a.tagName=="string"}function iL(a){return Ey(a)&&a.tagName.toLowerCase()==="button"}function sL(a){return Ey(a)&&a.tagName.toLowerCase()==="form"}function aL(a){return Ey(a)&&a.tagName.toLowerCase()==="input"}function oL(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function lL(a,e){return a.button===0&&(!e||e==="_self")&&!oL(a)}var Fg=null;function uL(){if(Fg===null)try{new FormData(document.createElement("form"),0),Fg=!1}catch{Fg=!0}return Fg}var cL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function L0(a){return a!=null&&!cL.has(a)?(xn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jg}"`),null):a}function hL(a,e){let t,n,i,o,l;if(sL(a)){let h=a.getAttribute("action");n=h?Pi(h,e):null,t=a.getAttribute("method")||Qg,i=L0(a.getAttribute("enctype"))||Jg,o=new FormData(a)}else if(iL(a)||aL(a)&&(a.type==="submit"||a.type==="image")){let h=a.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=a.getAttribute("formaction")||h.getAttribute("action");if(n=d?Pi(d,e):null,t=a.getAttribute("formmethod")||h.getAttribute("method")||Qg,i=L0(a.getAttribute("formenctype"))||L0(h.getAttribute("enctype"))||Jg,o=new FormData(h,a),!uL()){let{name:p,type:g,value:m}=a;if(g==="image"){let v=p?`${p}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else p&&o.append(p,m)}}else{if(Ey(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Qg,n=null,i=Jg,l=a}return o&&i==="text/plain"&&(l=o,o=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:o,body:l}}function H1(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}async function dL(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fL(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function pL(a,e,t){let n=await Promise.all(a.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await dL(o,t);return l.links?l.links():[]}return[]}));return vL(n.flat(1).filter(fL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bE(a,e,t,n,i,o){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>{var g;return t[p].pathname!==d.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,p)=>l(d,p)||h(d,p)):o==="data"?e.filter((d,p)=>{var m;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(a,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function gL(a,e){return mL(a.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function mL(a){return[...new Set(a)]}function yL(a){let e={},t=Object.keys(a).sort();for(let n of t)e[n]=a[n];return e}function vL(a,e){let t=new Set;return new Set(e),a.reduce((n,i)=>{let o=JSON.stringify(yL(i));return t.has(o)||(t.add(o),n.push({key:o,link:i})),n},[])}function wL(a){let e=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function bL(){let a=B.useContext(tu);return H1(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function SL(){let a=B.useContext(gp);return H1(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var B1=B.createContext(void 0);B1.displayName="FrameworkContext";function Nx(){let a=B.useContext(B1);return H1(a,"You must render this element inside a <HydratedRouter> element"),a}function AL(a,e){let t=B.useContext(B1),[n,i]=B.useState(!1),[o,l]=B.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:m}=e,v=B.useRef(null);B.useEffect(()=>{if(a==="render"&&l(!0),a==="viewport"){let A=_=>{_.forEach(P=>{l(P.isIntersecting)})},x=new IntersectionObserver(A,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[a]),B.useEffect(()=>{if(n){let A=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(A)}}},[n]);let b=()=>{i(!0)},S=()=>{i(!1),l(!1)};return t?a!=="intent"?[o,v,{}]:[o,v,{onFocus:nd(h,b),onBlur:nd(d,S),onMouseEnter:nd(p,b),onMouseLeave:nd(g,S),onTouchStart:nd(m,b)}]:[!1,v,{}]}function nd(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function EL({page:a,...e}){let{router:t}=bL(),n=B.useMemo(()=>La(t.routes,a,t.basename),[t.routes,a,t.basename]);return n?B.createElement(_L,{page:a,matches:n,...e}):null}function xL(a){let{manifest:e,routeModules:t}=Nx(),[n,i]=B.useState([]);return B.useEffect(()=>{let o=!1;return pL(a,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[a,e,t]),n}function _L({page:a,matches:e,...t}){let n=nu(),{manifest:i,routeModules:o}=Nx(),{loaderData:l,matches:h}=SL(),d=B.useMemo(()=>bE(a,e,h,i,n,"data"),[a,e,h,i,n]),p=B.useMemo(()=>bE(a,e,h,i,n,"assets"),[a,e,h,i,n]),g=B.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let b=new Set,S=!1;if(e.forEach(x=>{var P;let _=i.routes[x.route.id];!_||!_.hasLoader||(!d.some(M=>M.route.id===x.route.id)&&x.route.id in l&&((P=o[x.route.id])!=null&&P.shouldRevalidate)||_.hasClientLoader?S=!0:b.add(x.route.id))}),b.size===0)return[];let A=wL(a);return S&&b.size>0&&A.searchParams.set("_routes",e.filter(x=>b.has(x.route.id)).map(x=>x.route.id).join(",")),[A.pathname+A.search]},[l,n,i,d,e,a,o]),m=B.useMemo(()=>gL(p,i),[p,i]),v=xL(p);return B.createElement(B.Fragment,null,g.map(b=>B.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),m.map(b=>B.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),v.map(({key:b,link:S})=>B.createElement("link",{key:b,...S})))}function CL(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fx&&(window.__reactRouterVersion="7.1.5")}catch{}function kL(a,e){return mP({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:HT({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||RL(),routes:a,mapRouteProperties:JP,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function RL(){let a=window==null?void 0:window.__staticRouterHydrationData;return a&&a.errors&&(a={...a,errors:TL(a.errors)}),a}function TL(a){if(!a)return null;let e=Object.entries(a),t={};for(let[n,i]of e)if(i&&i.__type==="RouteErrorResponse")t[n]=new Fm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",t[n]=l}catch{}}if(t[n]==null){let o=new Error(i.message);o.stack="",t[n]=o}}else t[n]=i;return t}var Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zx=B.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:g,viewTransition:m,...v},b){let{basename:S}=B.useContext(us),A=typeof p=="string"&&Ox.test(p),x,_=!1;if(typeof p=="string"&&A&&(x=p,Fx))try{let q=new URL(window.location.href),ae=p.startsWith("//")?new URL(q.protocol+p):new URL(p),oe=Pi(ae.pathname,S);ae.origin===q.origin&&oe!=null?p=oe+ae.search+ae.hash:_=!0}catch{xn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=FP(p,{relative:i}),[M,I,L]=AL(n,v),T=ML(p,{replace:l,state:h,target:d,preventScrollReset:g,relative:i,viewTransition:m});function N(q){e&&e(q),q.defaultPrevented||T(q)}let G=B.createElement("a",{...v,...L,href:x||P,onClick:_||o?e:N,ref:CL(b,I),target:d,"data-discover":!A&&t==="render"?"true":void 0});return M&&!A?B.createElement(B.Fragment,null,G,B.createElement(EL,{page:P})):G});zx.displayName="Link";var j1=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:o,to:l,viewTransition:h,children:d,...p},g){let m=yp(l,{relative:p.relative}),v=nu(),b=B.useContext(gp),{navigator:S,basename:A}=B.useContext(us),x=b!=null&&OL(m)&&h===!0,_=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,P=v.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(P=P.toLowerCase(),M=M?M.toLowerCase():null,_=_.toLowerCase()),M&&A&&(M=Pi(M,A)||M);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let L=P===_||!i&&P.startsWith(_)&&P.charAt(I)==="/",T=M!=null&&(M===_||!i&&M.startsWith(_)&&M.charAt(_.length)==="/"),N={isActive:L,isPending:T,isTransitioning:x},G=L?e:void 0,q;typeof n=="function"?q=n(N):q=[n,L?"active":null,T?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let ae=typeof o=="function"?o(N):o;return B.createElement(zx,{...p,"aria-current":G,className:q,ref:g,style:ae,to:l,viewTransition:h},typeof d=="function"?d(N):d)});j1.displayName="NavLink";var PL=B.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:o,method:l=Qg,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:m,...v},b)=>{let S=NL(),A=FL(h,{relative:p}),x=l.toLowerCase()==="get"?"get":"post",_=typeof h=="string"&&Ox.test(h),P=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let I=M.nativeEvent.submitter,L=(I==null?void 0:I.getAttribute("formmethod"))||l;S(I||M.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:i,state:o,relative:p,preventScrollReset:g,viewTransition:m})};return B.createElement("form",{ref:b,method:x,action:A,onSubmit:n?d:P,...v,"data-discover":!_&&a==="render"?"true":void 0})});PL.displayName="Form";function LL(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $x(a){let e=B.useContext(tu);return Qe(e,LL(a)),e}function ML(a,{target:e,replace:t,state:n,preventScrollReset:i,relative:o,viewTransition:l}={}){let h=Ix(),d=nu(),p=yp(a,{relative:o});return B.useCallback(g=>{if(lL(g,e)){g.preventDefault();let m=t!==void 0?t:ho(d)===ho(p);h(a,{replace:m,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,h,p,t,n,e,a,i,o,l])}var IL=0,DL=()=>`__${String(++IL)}__`;function NL(){let{router:a}=$x("useSubmit"),{basename:e}=B.useContext(us),t=YP();return B.useCallback(async(n,i={})=>{let{action:o,method:l,encType:h,formData:d,body:p}=hL(n,e);if(i.navigate===!1){let g=i.fetcherKey||DL();await a.fetch(g,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||h,flushSync:i.flushSync})}else await a.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[a,e,t])}function FL(a,{relative:e}={}){let{basename:t}=B.useContext(us),n=B.useContext(cs);Qe(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...yp(a||".",{relative:e})},l=nu();if(a==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(m=>m).forEach(m=>h.append("index",m));let g=h.toString();o.search=g?`?${g}`:""}}return(!a||a===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:os([t,o.pathname])),ho(o)}function OL(a,e={}){let t=B.useContext(F1);Qe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$x("useViewTransitionState"),i=yp(a,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Pi(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=Pi(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Nm(i.pathname,l)!=null||Nm(i.pathname,o)!=null}new TextEncoder;var zL=bx();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $L(a){return B.createElement(eL,{flushSync:zL.flushSync,...a})}var SE=function(e,t){var n=arguments;if(t==null||!pp.call(t,"css"))return B.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=L1,o[1]=P1(e,t);for(var l=2;l<i;l++)o[l]=n[l];return B.createElement.apply(null,o)};(function(a){var e;e||(e=a.JSX||(a.JSX={}))})(SE||(SE={}));var Hx=R1(function(a,e){var t=a.styles,n=by([t],void 0,B.useContext(T1)),i=B.useRef();return qA(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),h=!1,d=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),d!==null&&(h=!0,d.setAttribute("data-emotion",o),l.hydrate([d])),i.current=[l,h],function(){l.flush()}},[e]),qA(function(){var o=i.current,l=o[0],h=o[1];if(h){o[1]=!1;return}if(n.next!==void 0&&k1(e,n.next,!0),l.tags.length){var d=l.tags[l.tags.length-1].nextElementSibling;l.before=d,l.flush()}e.insert("",n,l,!1)},[e,n.name]),null});function Bx(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];return by(e)}function HL(){var a=Bx.apply(void 0,arguments),e="animation-"+a.name;return{name:e,styles:"@keyframes "+e+"{"+a.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var BL=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jL=fx(function(a){return BL.test(a)||a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)<91}),UL=jL,VL=function(e){return e!=="theme"},AE=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?UL:VL},EE=function(e,t,n){var i;if(t){var o=t.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&n&&(i=e.__emotion_forwardProp),i},WL=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return C1(t,n,i),vx(function(){return k1(t,n,i)}),null},je=function a(e,t){var n=e.__emotion_real===e,i=n&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var h=EE(e,t,n),d=h||AE(i),p=!d("as");return function(){var g=arguments,m=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&m.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)m.push.apply(m,g);else{var v=g[0];m.push(v[0]);for(var b=g.length,S=1;S<b;S++)m.push(g[S],v[S])}var A=R1(function(x,_,P){var M=p&&x.as||i,I="",L=[],T=x;if(x.theme==null){T={};for(var N in x)T[N]=x[N];T.theme=B.useContext(T1)}typeof x.className=="string"?I=gx(_.registered,L,x.className):x.className!=null&&(I=x.className+" ");var G=by(m.concat(L),_.registered,T);I+=_.key+"-"+G.name,l!==void 0&&(I+=" "+l);var q=p&&h===void 0?AE(M):d,ae={};for(var oe in x)p&&oe==="as"||q(oe)&&(ae[oe]=x[oe]);return ae.className=I,P&&(ae.ref=P),B.createElement(B.Fragment,null,B.createElement(WL,{cache:_,serialized:G,isStringTag:typeof M=="string"}),B.createElement(M,ae))});return A.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",A.defaultProps=e.defaultProps,A.__emotion_real=A,A.__emotion_base=i,A.__emotion_styles=m,A.__emotion_forwardProp=h,Object.defineProperty(A,"toString",{value:function(){return"."+l}}),A.withComponent=function(x,_){var P=a(x,Z0({},t,_,{shouldForwardProp:EE(A,_,!0)}));return P.apply(void 0,m)},A}};function GL(a,e){for(const t in a)e(a[t],t)}function Ri(a,e){a.forEach(e)}function ei(a,e,t){if(!a)throw Error(`${t?t+": ":""}${e}`)}function Yl({node:a=[],from:e,source:t,parent:n=e||t,to:i,target:o,child:l=i||o,scope:h={},meta:d={},family:p={type:"regular"},regional:g}={}){const m=$g(n),v=$g(p.links),b=$g(p.owners),S=[];Ri(a,x=>x&&uo(S,x));const A={id:iM(),seq:S,next:$g(l),meta:d,scope:h,family:{triggers:m.length,type:p.type||"crosslink",links:v,owners:b}};return Ri(v,x=>uo(xy(x),A)),Ri(b,x=>uo(_y(x),A)),Ri(m,x=>uo(x.next,A)),A}function jx(a,e,t){let n,i=Js,o=null,l=Nt;if(a.target&&(e=a.params,t=a.defer,n=a.meta,i="page"in a?a.page:i,a.stack&&(o=a.stack),l=Og(a)||l,a=a.target),l&&Nt&&l!==Nt&&(Nt=null),Array.isArray(a))for(let S=0;S<a.length;S++)Oo("pure",i,ni(a[S]),o,e[S],l,n);else Oo("pure",i,ni(a),o,e,l,n);if(t&&!Hg)return;const h={isRoot:Hg,currentPage:Js,scope:Nt,isWatch:N0,isPure:tm};let d,p,g,m,v,b;Hg=0;e:for(;m=yM();){const{idx:S,stack:A,type:x}=m;g=A.node,Js=v=A.page,Nt=Og(A),v?b=v.reg:Nt&&(b=Nt.reg);const _=!!v,P=!!Nt,M={fail:0,scope:g.scope};d=p=0;for(let I=S;I<g.seq.length&&!d;I++){const L=g.seq[I];if(L.order){const{priority:T,barrierID:N}=L.order,G=N?v?`${v.fullID}_${N}`:N:0;if(I!==S||x!==T){N?D0.has(G)||(D0.add(G),aw(I,A,T,N)):aw(I,A,T,0);continue e}N&&D0.delete(G)}switch(L.type){case"mov":{const N=L.data;let G;switch(N.from){case"stack":G=Zg(A);break;case"a":case"b":G=A[N.from];break;case"value":G=N.store;break;case"store":if(b&&!b[N.store.id])if(_){const q=Yx(v,N.store.id);A.page=v=q,q?b=q.reg:P?(ah(Nt,N.store,0,1,N.softRead),b=Nt.reg):b=void 0}else P&&ah(Nt,N.store,0,1,N.softRead);G=qx(b&&b[N.store.id]||N.store)}switch(N.to){case"stack":A.value=G;break;case"a":case"b":A[N.to]=G;break;case"store":vM(v,Nt,N.target,0).current=G}break}case"compute":const T=L.data;if(T.fn){N0=g.meta.op==="watch",tm=T.pure;const N=T.safe?(0,T.fn)(Zg(A),M.scope,A):bM(M,T.fn,A);T.filter?p=!N:A.value=N,N0=h.isWatch,tm=h.isPure}}d=M.fail||p}if(!d){const I=Zg(A),L=Og(A);if(Ri(g.next,T=>{Oo("child",v,T,A,I,L)}),L){g.meta.needFxCounter&&Oo("child",v,L.fxCount,A,I,L),g.meta.storeChange&&Oo("child",v,L.storeChange,A,I,L),g.meta.warnSerialize&&Oo("child",v,L.warnSerializeNode,A,I,L);const T=L.additionalLinks[g.id];T&&Ri(T,N=>{Oo("child",v,N,A,I,L)})}}}Hg=h.isRoot,Js=h.currentPage,Nt=Og(h)}function XL(a,e){let t,n;const i=a;if(e){const o=JL(e);a.length===0?(t=o.path,n=o.fullName):(t=o.path.concat([a]),n=o.fullName.length===0?a:o.fullName+"/"+a)}else t=a.length===0?[]:[a],n=a;return{shortName:i,fullName:n,path:t}}function Ux(a,e){if(!e||!e.name&&!e.named&&!e.loc)return a;let t=`[${a}]`;const n=e.named||e.name;n&&(t+=` unit '${n}'`);const i=e.loc;return!n&&i&&(t+=` (${i.file}:${i.line}:${i.column})`),t}function iw(a){const e=()=>a();return e.unsubscribe=()=>a(),e}function xd(a,...e){}function Kl(a,e){const t=Fd({or:e,and:typeof a=="string"?{name:a}:a}),n=Ux("event",t),i=(h,...d)=>(ei(!Ku(i,"derived"),"call of derived event is not supported, use createEvent instead",n),ei(!tm,"unit call from pure function is not supported, use operators like sample instead",n),Js?((p,g,m,v)=>{const b=Js;TE(null);const A=p.create(m,v);return TE(b),A})(i,o,h,d):i.create(h,d)),o=aM(),l=Object.assign(i,{graphite:Yl({meta:Qx(t.actualOp||"event",i,t),regional:1}),create:h=>(jx({target:i,params:h,scope:Nt}),h),watch:h=>Kx(i,h),map:h=>F0(i,Dd,h,[Wu()]),filter:h=>F0(i,"filter",h.fn?h:h.fn,[Wu(Ry,1)]),filterMap:h=>F0(i,"filterMap",h,[Wu(),sw(d=>!_d(d),1)]),prepend(h){ei(i.targetable,".prepend of derived event is not supported, call source event instead",n);const d=Kl("* → "+i.shortName,{parent:Hm(i)});return xd("eventPrepend",ni(d)),X1(d,i,[Wu()],"prepend",h),AM(i,d),d}});return t!=null&&t.domain&&t.domain.hooks.event(l),Vu(l,"id",l.graphite.id),Gx(l.graphite),l}function xE(a,e,t,n,i){return cM(t,`${i} ${e}`,"first argument"),ei(ru(n),"second argument should be a function",i),Bm(!Ku(a,"derived"),`${e} in derived store`,`${e} in store created via createStore`,i),Ri(Array.isArray(t)?t:[t],o=>{a.off(o),Jx(o,a,"on",dM,n)}),a}function zm(a,e){const t=Fd(e),n=gM(a),i=Ux("store",t),o=Error();Error.captureStackTrace&&Error.captureStackTrace(o,zm);const l=o.stack,h=Kl({named:"updates",derived:1});xd("storeBase",n);const d=n.id,p="skipVoid"in t,g=p&&!t.skipVoid;Bm(!(p&&t.skipVoid),"{skipVoid: true}","updateFilter",i);const m={updates:h,defaultState:a,stateRef:n,getState(){let M,I=n;if(Js){let L=Js;for(;L&&!L.reg[d];)L=Hm(L);L&&(M=L)}return!M&&Nt&&(ah(Nt,n,1),M=Nt),M&&(I=M.reg[d]),qx(I)},setState:M=>jx({target:m,params:M,defer:1,scope:Nt}),reset:(...M)=>(ei(m.targetable,".reset of derived store is not supported",i),Ri(M,I=>xE(m,".reset",I,()=>m.defaultState,i)),m),on:(M,I)=>(ei(m.targetable,".on of derived store is not supported",i),xE(m,".on",M,I,i)),off(M){const I=ni(M).id,L=ni(m).family.links.find(T=>T.meta.onTrigger===I);return L&&jm(L),m},map(M,I){let L,T;lh(M)&&(L=M,M=M.fn);const N=m.getState(),G=_d(N);(!G||G&&g)&&(T=M(N));const q=zm(T,{name:`${m.shortName} → *`,derived:1,...I,and:L}),ae=Jx(m,q,Dd,Ry,M);return mM($m(q),{type:Dd,fn:M,from:n}),$m(q).noInit=1,xd("storeMap",n,ae),q},watch(M,I){if(Bm(!I,"watch second argument","sample",i),!I||!Cy(M)){const L=Kx(m,M);return xd("storeWatch",n,M)||M(m.getState()),L}return ei(ru(I),"second argument should be a function",i),M.watch(L=>I(m.getState(),L))}},v=Qx("store",m,t),b=m.defaultConfig.updateFilter;m.graphite=Yl({scope:{state:n,fn:b},node:[sw((M,I,L)=>(L.scope&&!L.scope.reg[n.id]&&(L.b=1),M)),pM(n),sw((M,I,{a:L,b:T})=>{const N=_d(M);return N&&!p&&nM(`${i}: ${O0}`,l),(N&&g||!N)&&(M!==L||T)},1),b&&Wu(hM,1),Ty({from:"stack",target:n})],child:h,meta:{...v,defaultState:a,storeTrace:l},regional:1}),Vu(m,"id",m.graphite.id),Vu(m,"rootStateRefId",d);const S=Ku(m,"serialize"),A=Ku(m,"derived"),x=S==="ignore",_=Ku(m,"sid");_&&(Vu(m,"storeChange",1),n.sid=_),_||x||A||Vu(m,"warnSerialize",1);const P=_d(a);return ei(A||!P||P&&g,O0,i),A&&P&&!p&&console.error(`${i}: ${O0}`),lM(m,[h]),t!=null&&t.domain&&t.domain.hooks.store(m),A||(m.reinit=Kl({named:"reinit"}),m.reset(m.reinit)),n.meta=m.graphite.meta,Gx(m.graphite),m}function qL(a,{scope:e,safe:t}={}){ei(e||Nt||t,"scopeBind: scope not found");const n=e||Nt;return(...i)=>{function o(){RE(d)}let l,h=0;const d=Nt;RE(n);try{l=a(...i)}catch(p){l=p,h=1}if(o(),h)throw l;return l instanceof Promise&&l.then(o,o),l}}function YL({unit:a,fn:e,scope:t,batch:n}){const i=[em.run({fn:l=>e(l)})];i.unshift(em.compute({priority:"sampler",batch:1})),ky(a)&&i.unshift(em.mov({store:a.stateRef,to:"stack"}));const o=Array.isArray(a)?a:[a];if(t){const l=[],h=t.additionalLinks;return o.forEach(d=>{const p=h[d.graphite.id]||[];h[d.graphite.id]=p;const g=Yl({node:KL(i,d),meta:{watchOp:d.kind}});p.push(g),l.push(()=>{const m=p.indexOf(g);m!==-1&&p.splice(m,1),jm(g)})}),iw(()=>{l.forEach(d=>d())})}{const l=Yl({node:i,parent:o,family:{owners:o}});return iw(()=>{jm(l)})}}function KL(a,e){return ky(e)?[em.mov({store:e.stateRef,to:"stack"}),...a]:a}const QL=typeof Symbol<"u"&&Symbol.observable||"@@observable",Dd="map",ni=a=>a.graphite||a,xy=a=>a.family.owners,_y=a=>a.family.links,$m=a=>a.stateRef,Zg=a=>a.value,Hm=a=>a.parent,Og=a=>a.scope,Ku=(a,e)=>ni(a).meta[e],Vu=(a,e,t)=>ni(a).meta[e]=t,JL=a=>a.compositeName,Cy=a=>(ru(a)||lh(a))&&"kind"in a,vp=a=>e=>Cy(e)&&e.kind===a,ky=vp("store"),ZL=vp("event"),_E=vp("effect"),eM=a=>Cy(a)&&!!a.targetable,Vx=vp("domain"),tM=vp("scope");var zg={__proto__:null,unit:Cy,store:ky,event:ZL,effect:_E,targetable:eM,domain:Vx,scope:tM,attached:a=>_E(a)&&Ku(a,"attached")==1};const M0=(a,e)=>a.includes(e),I0=(a,e)=>{const t=a.indexOf(e);t!==-1&&a.splice(t,1)},uo=(a,e)=>a.push(e),Bm=(a,e,t,n)=>!a&&console.error(`${n?n+": ":""}${e} is deprecated${t?`, use ${t} instead`:""}`),nM=(a,e)=>{const t=Error(a);t.stack=e,console.error(t)},U1=()=>{let a=0;return()=>""+ ++a},rM=U1(),Wx=U1(),iM=U1();let sM=null;const Gx=a=>{},aM=()=>sM,oM=a=>a,lM=(a,e)=>{const t=ni(a);Ri(e,n=>{const i=ni(n);t.family.type!=="domain"&&(i.family.type="crosslink"),uo(xy(i),t),uo(_y(t),i)})},$g=(a=[])=>(Array.isArray(a)?a:[a]).flat().map(ni),lh=a=>typeof a=="object"&&a!==null,ru=a=>typeof a=="function",_d=a=>a===void 0,uM=a=>ei(lh(a)||ru(a),"expect first argument be an object"),CE=(a,e,t,n)=>ei(!(!lh(a)&&!ru(a)||!("family"in a)&&!("graphite"in a)),`${e}: expect ${t} to be a unit (store, event or effect)${n}`),cM=(a,e,t)=>{Array.isArray(a)?Ri(a,(n,i)=>CE(n,e,`${i} item of ${t}`,"")):CE(a,e,t," or array of units")},hM=(a,{fn:e},{a:t})=>e(a,t),dM=(a,{fn:e},{a:t})=>e(t,a),Ry=(a,{fn:e})=>e(a),Xx=(a,e,t,n)=>{const i={id:Wx(),type:a,data:e};return t&&(i.order={priority:t},n&&(i.order.barrierID=++fM)),i};let fM=0;const Ty=({from:a="store",store:e,target:t,to:n=t?"store":"stack",batch:i,priority:o})=>Xx("mov",{from:a,store:e,to:n,target:t},o,i),Nd=({fn:a,batch:e,priority:t,safe:n=0,filter:i=0,pure:o=0})=>Xx("compute",{fn:a,safe:n,filter:i,pure:o},t,e),V1=({fn:a})=>Nd({fn:a,priority:"effect"}),sw=(a,e,t)=>Nd({fn:a,safe:1,filter:e,priority:t}),pM=(a,e,t)=>Ty({store:a,to:"a",priority:t,batch:1}),Wu=(a=Ry,e)=>Nd({fn:a,pure:1,filter:e}),em={mov:Ty,compute:Nd,filter:({fn:a,pure:e})=>Nd({fn:a,filter:1,pure:e}),run:V1},gM=a=>({id:Wx(),current:a,initial:a}),qx=({current:a})=>a,mM=(a,e)=>{a.before||(a.before=[]),uo(a.before,e)};let Gu=null;const W1=(a,e)=>{if(!a)return e;if(!e)return a;let t;return(a.v.type===e.v.type&&a.v.id>e.v.id||ow(a.v.type)>ow(e.v.type))&&(t=a,a=e,e=t),t=W1(a.r,e),a.r=a.l,a.l=t,a},G1=[];let kE=0;for(;kE<6;)uo(G1,{first:null,last:null,size:0}),kE+=1;const yM=()=>{for(let a=0;a<6;a++){const e=G1[a];if(e.size>0){if(a===3||a===4){e.size-=1;const n=Gu.v;return Gu=W1(Gu.l,Gu.r),n}e.size===1&&(e.last=null);const t=e.first;return e.first=t.r,e.size-=1,t.v}}},Oo=(a,e,t,n,i,o,l)=>aw(0,{a:null,b:null,node:t,parent:n,value:i,page:e,scope:o,meta:l},a,0),aw=(a,e,t,n)=>{const i=ow(t),o=G1[i],l={v:{idx:a,stack:e,type:t,id:n},l:null,r:null};i===3||i===4?Gu=W1(Gu,l):(o.size===0?o.first=l:o.last.r=l,o.last=l),o.size+=1},ow=a=>{switch(a){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},D0=new Set;let Nt,Hg=1,N0=0,tm=0,Js=null;const RE=a=>{Nt=a},TE=a=>{Js=a},Yx=(a,e)=>{if(a){for(;a&&!a.reg[e];)a=a.parent;if(a)return a}return null},vM=(a,e,t,n)=>{const i=Yx(a,t.id);return i?i.reg[t.id]:e?(ah(e,t,n),e.reg[t.id]):t},wM=a=>a,ah=(a,e,t,n,i)=>{const o=a.reg;if(o[e.id])return;const l=e.sid,h={id:e.id,current:e.initial,meta:e.meta};if(h.id in a.values.idMap)h.current=a.values.idMap[h.id];else if(l&&l in a.values.sidMap&&!(l in a.sidIdMap)){var d;const p=e==null||(d=e.meta)===null||d===void 0?void 0:d.serialize;h.current=(a.fromSerialize&&p!=="ignore"&&(p==null?void 0:p.read)||wM)(a.values.sidMap[l])}else if(e.before&&!i){let p=0;const g=t||!e.noInit||n;Ri(e.before,m=>{switch(m.type){case"map":{const v=m.from;if((v||m.fn)&&(v&&ah(a,v,t,n),g)){const b=v&&o[v.id].current;h.current=m.fn?m.fn(b):b}break}case"field":ah(a,m.from,t,n),p||(p=1,h.current=Array.isArray(h.current)?[...h.current]:{...h.current}),g&&(h.current[m.field]=o[o[m.from.id].id].current)}})}l&&(a.sidIdMap[l]=e.id),o[e.id]=h},bM=(a,e,t)=>{try{return e(Zg(t),a.scope,t)}catch(n){console.error(n),a.fail=1,a.failReason=n}},Fd=(a,e={})=>(lh(a)&&(Fd(a.or,e),GL(a,(t,n)=>{_d(t)||n==="or"||n==="and"||(e[n]=t)}),Fd(a.and,e)),e),PE=(a,e)=>{I0(a.next,e),I0(xy(a),e),I0(_y(a),e)},LE=["on","reset","sample","split","merge","guard","forward"],nm=(a,e,t,n,i)=>{let o;a.next.length=0,a.seq.length=0,a.scope=null;let l=_y(a);const h=a.meta.isRegion,d=h?a:n;if(l.length>0){const p=M0(LE,a.meta.op),g=!h&&!i,m=g&&t&&!p;for(;o=l.pop();){const v=M0(o.next,a);PE(o,a),h&&nm(o,0,0,a,1),v||(o.family.triggers-=1),(e||m||g&&o.family.type==="crosslink"&&!p||i&&M0(LE,o.meta.op)&&(v&&o.next.length===0||!v&&o.family.triggers<=0))&&nm(o,e,t&&o.meta.op!=="on",d,i)}}for(l=xy(a);o=l.pop();)PE(o,a),t&&o.family.type==="crosslink"&&nm(o,e,o.meta.op!=="on",d,i)},Bg=a=>a.clear(),jm=(a,{deep:e}={})=>{let t=0;if(a.ownerSet&&a.ownerSet.delete(a),Vx(a)){t=1;const n=a.history;Bg(n.events),Bg(n.effects),Bg(n.stores),Bg(n.domains)}nm(ni(a),!!e,t,null,0)},SM=a=>iw(()=>jm(a)),X1=(a,e,t,n,i)=>Yl({node:t,parent:a,child:e,scope:{fn:i},meta:{op:n},family:{owners:[a,e],links:e},regional:1}),Kx=(a,e)=>(ei(ru(e),".watch argument should be a function"),SM(Yl({scope:{fn:e},node:[V1({fn:Ry})],parent:a,meta:{op:"watch"},family:{owners:a},regional:1}))),AM=(a,e,t="event")=>{Hm(a)&&Hm(a).hooks[t](e)},Qx=(a,e,t)=>{const n=Fd(t),i=a==="domain",o=rM(),{sid:l=null,named:h=null,domain:d=null,parent:p=d}=n,g=h||n.name||(i?"":o),m=XL(g,p),v={op:e.kind=a,name:e.shortName=g,sid:e.sid=oM(l),named:h,unitId:e.id=o,serialize:n.serialize,derived:n.derived,config:n};return e.targetable=!n.derived,e.parent=p,e.compositeName=m,e.defaultConfig=n,e.getType=()=>(Bm(0,"getType","compositeName.fullName"),m.fullName),!i&&(e.subscribe=b=>(uM(b),e.watch(ru(b)?b:S=>b.next&&b.next(S))),e[QL]=()=>e),v},F0=(a,e,t,n)=>{let i;lh(t)&&(i=t,t=t.fn);const o=Kl({name:`${a.shortName} → *`,derived:1,and:i});return X1(a,o,n,e,t),o},O0="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",Jx=(a,e,t,n,i)=>{const o=$m(e),l=Ty({store:o,to:"a",priority:"read"});t===Dd&&(l.data.softRead=1);const h=[l,Wu(n)];xd("storeOnMap",o,h,ky(a)&&$m(a));const d=X1(a,e,h,t,i);return t!==Dd&&Vu(d,"onTrigger",ni(a).id),d};Yl({node:[V1({fn:({fn:a,value:e})=>a(e)})],meta:{op:"fx",fx:"sidechain"}});const EM=Kl(),Py=Kl(),xM=zm(!1).on(EM,(a,e)=>e).on(Py,a=>!a),_M=()=>ne(CM,{onClick:()=>Py(),children:"☰ "}),CM=je("button",{target:"e12op4720"})({name:"pl5ld0",styles:"margin:auto 20px;padding:0 4px;width:36px;height:36px;display:flex;justify-content:center;align-items:center;text-decoration:none;font-size:1.2rem;border-radius:7px;border:2px solid transparent;:hover{border:2px solid rgb(58, 58, 58);}"}),Zx=je("aside",{target:"e1n81i9m0"})({name:"ndshgz",styles:"width:24vw;min-width:230px;border-radius:27px;display:flex;justify-content:center;align-items:center;background-color:rgba(214, 214, 214, 0.3)"});var Cd={};Cd.d=(a,e)=>{for(var t in e)Cd.o(e,t)&&!Cd.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})};Cd.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e);var Ne=globalThis.pdfjsLib={};Cd.d(Ne,{AbortException:()=>fo,AnnotationEditorLayer:()=>m1,AnnotationEditorParamsType:()=>Ke,AnnotationEditorType:()=>He,AnnotationEditorUIManager:()=>Jl,AnnotationLayer:()=>SD,AnnotationMode:()=>Ma,ColorPicker:()=>qm,DOMSVGFactory:()=>nb,DrawLayer:()=>w1,FeatureTest:()=>Xn,GlobalWorkerOptions:()=>Qs,ImageKind:()=>rm,InvalidPDFException:()=>uw,MissingPDFException:()=>Od,OPS:()=>pi,OutputScale:()=>hw,PDFDataRangeTransport:()=>tC,PDFDateString:()=>J1,PDFWorker:()=>Ju,PasswordResponses:()=>PM,PermissionFlag:()=>TM,PixelsPerInch:()=>po,RenderingCancelledException:()=>K1,TextLayer:()=>zd,TouchManager:()=>Gm,UnexpectedResponseException:()=>Um,Util:()=>Ee,VerbosityLevel:()=>Ly,XfaLayer:()=>rC,build:()=>tD,createValidAbsoluteUrl:()=>DM,fetchData:()=>Ny,getDocument:()=>GI,getFilenameFromUrl:()=>UM,getPdfFilenameFromUrl:()=>VM,getXfaPageViewport:()=>WM,isDataScheme:()=>Fy,isPdfFile:()=>Q1,noContextMenu:()=>Li,normalizeUnicode:()=>HM,setLayerDimensions:()=>Ql,shadow:()=>Ye,stopEvent:()=>Ir,version:()=>eD});const zn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),e_=[1,0,0,1,0,0],lw=[.001,0,0,.001,0,0],kM=1e7,z0=1.35,Pr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ma={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},RM="pdfjs_internal_editor_",He={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},TM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Zt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},rd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ly={ERRORS:0,WARNINGS:1,INFOS:5},pi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},PM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let My=Ly.WARNINGS;function LM(a){Number.isInteger(a)&&(My=a)}function MM(){return My}function Iy(a){My>=Ly.INFOS&&console.log(`Info: ${a}`)}function Be(a){My>=Ly.WARNINGS&&console.log(`Warning: ${a}`)}function yt(a){throw new Error(a)}function Yt(a,e){a||yt(e)}function IM(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function DM(a,e=null,t=null){if(!a)return null;try{if(t&&typeof a=="string"){if(t.addDefaultProtocol&&a.startsWith("www.")){const i=a.match(/\./g);(i==null?void 0:i.length)>=2&&(a=`http://${a}`)}if(t.tryConvertEncoding)try{a=$M(a)}catch{}}const n=e?new URL(a,e):new URL(a);if(IM(n))return n}catch{}return null}function Ye(a,e,t,n=!1){return Object.defineProperty(a,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const yo=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class ME extends yo{constructor(e,t){super(e,"PasswordException"),this.code=t}}class $0 extends yo{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class uw extends yo{constructor(e){super(e,"InvalidPDFException")}}class Od extends yo{constructor(e){super(e,"MissingPDFException")}}class Um extends yo{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class NM extends yo{constructor(e){super(e,"FormatError")}}class fo extends yo{constructor(e){super(e,"AbortException")}}function t_(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&yt("Invalid argument for bytesToString");const e=a.length,t=8192;if(e<t)return String.fromCharCode.apply(null,a);const n=[];for(let i=0;i<e;i+=t){const o=Math.min(i+t,e),l=a.subarray(i,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Dy(a){typeof a!="string"&&yt("Invalid argument for stringToBytes");const e=a.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=a.charCodeAt(n)&255;return t}function FM(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function q1(a){const e=Object.create(null);for(const[t,n]of a)e[t]=n;return e}function OM(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function zM(){try{return new Function(""),!0}catch{return!1}}class Xn{static get isLittleEndian(){return Ye(this,"isLittleEndian",OM())}static get isEvalSupported(){return Ye(this,"isEvalSupported",zM())}static get isOffscreenCanvasSupported(){return Ye(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ye(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ye(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ye(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Ye(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const H0=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var Zs,im,cw;class Ee{static makeHexColor(e,t,n){return`#${H0[e]}${H0[t]}${H0[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[n,i]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[i,o]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],o[0],l[0]),Math.min(n[1],i[1],o[1],l[1]),Math.max(n[0],i[0],o[0],l[0]),Math.max(n[1],i[1],o[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],h=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-o*i))/2,p=h+d||1,g=h-d||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,i,l]}static bezierBoundingBox(e,t,n,i,o,l,h,d,p){return p?(p[0]=Math.min(p[0],e,h),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,h),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,h),Math.min(t,d),Math.max(e,h),Math.max(t,d)],R(this,Zs,cw).call(this,e,n,o,h,t,i,l,d,3*(-e+3*(n-o)+h),6*(e-2*n+o),3*(n-e),p),R(this,Zs,cw).call(this,e,n,o,h,t,i,l,d,3*(-t+3*(i-l)+d),6*(t-2*i+l),3*(i-t),p),p}}Zs=new WeakSet,im=function(e,t,n,i,o,l,h,d,p,g){if(p<=0||p>=1)return;const m=1-p,v=p*p,b=v*p,S=m*(m*(m*e+3*p*t)+3*v*n)+b*i,A=m*(m*(m*o+3*p*l)+3*v*h)+b*d;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],A),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],A)},cw=function(e,t,n,i,o,l,h,d,p,g,m,v){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&R(this,Zs,im).call(this,e,t,n,i,o,l,h,d,-m/g,v);return}const b=g**2-4*m*p;if(b<0)return;const S=Math.sqrt(b),A=2*p;R(this,Zs,im).call(this,e,t,n,i,o,l,h,d,(-g+S)/A,v),R(this,Zs,im).call(this,e,t,n,i,o,l,h,d,(-g-S)/A,v)},k(Ee,Zs);function $M(a){return decodeURIComponent(escape(a))}let B0=null,IE=null;function HM(a){return B0||(B0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,IE=new Map([["ﬅ","ſt"]])),a.replaceAll(B0,(e,t,n)=>t?t.normalize("NFKC"):IE.get(n))}function BM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),t_(a)}const Y1="pdfjs_internal_id_";function jM(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(t_(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...e){return new Promise(t=>{t(a(...e))})});const Ss="http://www.w3.org/2000/svg",jo=class jo{};Le(jo,"CSS",96),Le(jo,"PDF",72),Le(jo,"PDF_TO_CSS_UNITS",jo.CSS/jo.PDF);let po=jo;async function Ny(a,e="text"){if(ld(a,document.baseURI)){const t=await fetch(a);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class wp{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=l,n*=t;const d=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let g,m,v,b;switch(i%=360,i<0&&(i+=360),i){case 180:g=-1,m=0,v=0,b=1;break;case 90:g=0,m=1,v=1,b=0;break;case 270:g=0,m=-1,v=-1,b=0;break;case 0:g=1,m=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,b=-b);let S,A,x,_;g===0?(S=Math.abs(p-e[1])*n+o,A=Math.abs(d-e[0])*n+l,x=(e[3]-e[1])*n,_=(e[2]-e[0])*n):(S=Math.abs(d-e[0])*n+o,A=Math.abs(p-e[1])*n+l,x=(e[2]-e[0])*n,_=(e[3]-e[1])*n),this.transform=[g*n,m*n,v*n,b*n,S-g*n*d-v*n*p,A-m*n*d-b*n*p],this.width=x,this.height=_}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(i=>i*e);return Ye(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new wp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){return Ee.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ee.applyTransform([e[0],e[1]],this.transform),n=Ee.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Ee.applyInverseTransform([e,t],this.transform)}}class K1 extends yo{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Fy(a){const e=a.length;let t=0;for(;t<e&&a[t].trim()==="";)t++;return a.substring(t,t+5).toLowerCase()==="data:"}function Q1(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function UM(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function VM(a,e="document.pdf"){if(typeof a!="string")return e;if(Fy(a))return Be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(a);let o=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class DE{constructor(){Le(this,"started",Object.create(null));Le(this,"times",[])}time(e){e in this.started&&Be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-i}ms
`);return e.join("")}}function ld(a,e){try{const{protocol:t}=e?new URL(a,e):new URL(a);return t==="http:"||t==="https:"}catch{return!1}}function Li(a){a.preventDefault()}function Ir(a){a.preventDefault(),a.stopPropagation()}var Hd;class J1{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,Hd)||E(this,Hd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Hd).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,p==="-"?(l+=g,h+=m):p==="+"&&(l-=g,h-=m),new Date(Date.UTC(n,i,o,l,h,d))}}Hd=new WeakMap,k(J1,Hd);function WM(a,{scale:e=1,rotation:t=0}){const{width:n,height:i}=a.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new wp({viewBox:o,userUnit:1,scale:e,rotation:t})}function Z1(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Be(`Not a valid color format: "${a}"`),[0,0,0])}function GM(a){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of a.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;a.set(t,Z1(n))}e.remove()}function Tt(a){const{a:e,b:t,c:n,d:i,e:o,f:l}=a.getTransform();return[e,t,n,i,o,l]}function Oi(a){const{a:e,b:t,c:n,d:i,e:o,f:l}=a.getTransform().invertSelf();return[e,t,n,i,o,l]}function Ql(a,e,t=!1,n=!0){if(e instanceof wp){const{pageWidth:i,pageHeight:o}=e.rawDims,{style:l}=a,h=Xn.isCSSRoundSupported,d=`var(--scale-factor) * ${i}px`,p=`var(--scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,m=h?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(l.width=g,l.height=m):(l.width=m,l.height=g)}n&&a.setAttribute("data-main-rotation",e.rotation)}class hw{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ia,Wo,gi,Go,Bd,jd,Jm,n_,qn,r_,i_,sm,s_,fw;const xs=class xs{constructor(e){k(this,qn);k(this,Ia,null);k(this,Wo,null);k(this,gi);k(this,Go,null);k(this,Bd,null);E(this,gi,e),u(xs,jd)||E(xs,jd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=E(this,Ia,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,gi)._uiManager._signal;e.addEventListener("contextmenu",Li,{signal:t}),e.addEventListener("pointerdown",R(xs,Jm,n_),{signal:t});const n=E(this,Go,document.createElement("div"));n.className="buttons",e.append(n);const i=u(this,gi).toolbarPosition;if(i){const{style:o}=e,l=u(this,gi)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return R(this,qn,s_).call(this),e}get div(){return u(this,Ia)}hide(){var e;u(this,Ia).classList.add("hidden"),(e=u(this,Wo))==null||e.hideDropdown()}show(){var e;u(this,Ia).classList.remove("hidden"),(e=u(this,Bd))==null||e.shown()}async addAltText(e){const t=await e.render();R(this,qn,sm).call(this,t),u(this,Go).prepend(t,u(this,qn,fw)),E(this,Bd,e)}addColorPicker(e){E(this,Wo,e);const t=e.renderButton();R(this,qn,sm).call(this,t),u(this,Go).prepend(t,u(this,qn,fw))}remove(){var e;u(this,Ia).remove(),(e=u(this,Wo))==null||e.destroy(),E(this,Wo,null)}};Ia=new WeakMap,Wo=new WeakMap,gi=new WeakMap,Go=new WeakMap,Bd=new WeakMap,jd=new WeakMap,Jm=new WeakSet,n_=function(e){e.stopPropagation()},qn=new WeakSet,r_=function(e){u(this,gi)._focusEventsAllowed=!1,Ir(e)},i_=function(e){u(this,gi)._focusEventsAllowed=!0,Ir(e)},sm=function(e){const t=u(this,gi)._uiManager._signal;e.addEventListener("focusin",R(this,qn,r_).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",R(this,qn,i_).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Li,{signal:t})},s_=function(){const{editorType:e,_uiManager:t}=u(this,gi),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(xs,jd)[e]),R(this,qn,sm).call(this,n),n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),u(this,Go).append(n)},fw=function(){const e=document.createElement("div");return e.className="divider",e},k(xs,Jm),k(xs,jd,null);let dw=xs;var Ud,Xo,qo,go,a_,o_,l_;class XM{constructor(e){k(this,go);k(this,Ud,null);k(this,Xo,null);k(this,qo);E(this,qo,e)}show(e,t,n){const[i,o]=R(this,go,o_).call(this,t,n),{style:l}=u(this,Xo)||E(this,Xo,R(this,go,a_).call(this));e.append(u(this,Xo)),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Xo).remove()}}Ud=new WeakMap,Xo=new WeakMap,qo=new WeakMap,go=new WeakSet,a_=function(){const e=E(this,Xo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Li,{signal:u(this,qo)._signal});const t=E(this,Ud,document.createElement("div"));return t.className="buttons",e.append(t),R(this,go,l_).call(this),e},o_=function(e,t){let n=0,i=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const h=o.x+(t?o.width:0);if(l>n){i=h,n=l;continue}t?h>i&&(i=h):h<i&&(i=h)}return[t?1-i:i,n]},l_=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,qo)._signal;e.addEventListener("contextmenu",Li,{signal:n}),e.addEventListener("click",()=>{u(this,qo).highlightSelection("floating_button")},{signal:n}),u(this,Ud).append(e)};function Vm(a,e,t){for(const n of t)e.addEventListener(n,a[n].bind(a))}var Zm;class qM{constructor(){k(this,Zm,0)}get id(){return`${RM}${Bn(this,Zm)._++}`}}Zm=new WeakMap;var ec,Vd,In,tc,am;const ib=class ib{constructor(){k(this,tc);k(this,ec,BM());k(this,Vd,0);k(this,In,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ye(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:o}=e;return R(this,tc,am).call(this,`${t}_${n}_${i}_${o}`,e)}async getFromUrl(e){return R(this,tc,am).call(this,e,e)}async getFromBlob(e,t){const n=await t;return R(this,tc,am).call(this,e,n)}async getFromId(e){u(this,In)||E(this,In,new Map);const t=u(this,In).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,In)||E(this,In,new Map);let n=u(this,In).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${u(this,ec)}_${Bn(this,Vd)._++}`,refCounter:1,isSvg:!1},u(this,In).set(e,n),u(this,In).set(n.id,n),n}getSvgUrl(e){const t=u(this,In).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;u(this,In)||E(this,In,new Map);const t=u(this,In).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=o.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,ec)}_`)}};ec=new WeakMap,Vd=new WeakMap,In=new WeakMap,tc=new WeakSet,am=async function(e,t){u(this,In)||E(this,In,new Map);let n=u(this,In).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,ec)}_${Bn(this,Vd)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await Ny(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const o=ib._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((p,g)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},l.onload=async()=>{const m=n.svgUrl=l.result;h.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},h.onerror=l.onerror=g});l.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Be(i),n=null}return u(this,In).set(e,n),n&&u(this,In).set(n.id,n),n};let pw=ib;var Ut,Da,Wd,It;class YM{constructor(e=128){k(this,Ut,[]);k(this,Da,!1);k(this,Wd);k(this,It,-1);E(this,Wd,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(i&&e(),u(this,Da))return;const d={cmd:e,undo:t,post:n,type:o};if(u(this,It)===-1){u(this,Ut).length>0&&(u(this,Ut).length=0),E(this,It,0),u(this,Ut).push(d);return}if(l&&u(this,Ut)[u(this,It)].type===o){h&&(d.undo=u(this,Ut)[u(this,It)].undo),u(this,Ut)[u(this,It)]=d;return}const p=u(this,It)+1;p===u(this,Wd)?u(this,Ut).splice(0,1):(E(this,It,p),p<u(this,Ut).length&&u(this,Ut).splice(p)),u(this,Ut).push(d)}undo(){if(u(this,It)===-1)return;E(this,Da,!0);const{undo:e,post:t}=u(this,Ut)[u(this,It)];e(),t==null||t(),E(this,Da,!1),E(this,It,u(this,It)-1)}redo(){if(u(this,It)<u(this,Ut).length-1){E(this,It,u(this,It)+1),E(this,Da,!0);const{cmd:e,post:t}=u(this,Ut)[u(this,It)];e(),t==null||t(),E(this,Da,!1)}}hasSomethingToUndo(){return u(this,It)!==-1}hasSomethingToRedo(){return u(this,It)<u(this,Ut).length-1}cleanType(e){if(u(this,It)!==-1){for(let t=u(this,It);t>=0;t--)if(u(this,Ut)[t].type!==e){u(this,Ut).splice(t+1,u(this,It)-t),E(this,It,t);return}u(this,Ut).length=0,E(this,It,-1)}}destroy(){E(this,Ut,null)}}Ut=new WeakMap,Da=new WeakMap,Wd=new WeakMap,It=new WeakMap;var ey,u_;class bp{constructor(e){k(this,ey);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Xn.platform;for(const[n,i,o={}]of e)for(const l of n){const h=l.startsWith("mac+");t&&h?(this.callbacks.set(l.slice(4),{callback:i,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!h&&(this.callbacks.set(l,{callback:i,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(R(this,ey,u_).call(this,t));if(!n)return;const{callback:i,options:{bubbles:o=!1,args:l=[],checker:h=null}}=n;h&&!h(e,t)||(i.bind(e,...l,t)(),o||Ir(t))}}ey=new WeakSet,u_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const ty=class ty{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return GM(e),Ye(this,"_colors",e)}convert(e){const t=Z1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((o,l)=>o===t[l]))return ty._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ee.makeHexColor(...t):e}};Le(ty,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let gw=ty;var nc,vr,tn,yn,rc,Cs,ic,Vr,Na,Yo,sc,Ko,Hi,mi,Qo,Gd,Xd,ac,qd,Bi,Fa,oc,Oa,ji,ny,za,Yd,$a,Jo,Kd,Qd,ln,dt,ks,Zo,Jd,Zd,Ha,Ui,Rs,ef,Wr,se,om,mw,c_,h_,lm,d_,f_,p_,yw,g_,vw,ww,m_,jn,As,y_,v_,bw,w_,ud,Sw;const Xu=class Xu{constructor(e,t,n,i,o,l,h,d,p,g,m,v,b){k(this,se);k(this,nc,new AbortController);k(this,vr,null);k(this,tn,new Map);k(this,yn,new Map);k(this,rc,null);k(this,Cs,null);k(this,ic,null);k(this,Vr,new YM);k(this,Na,null);k(this,Yo,null);k(this,sc,0);k(this,Ko,new Set);k(this,Hi,null);k(this,mi,null);k(this,Qo,new Set);Le(this,"_editorUndoBar",null);k(this,Gd,!1);k(this,Xd,!1);k(this,ac,!1);k(this,qd,null);k(this,Bi,null);k(this,Fa,null);k(this,oc,null);k(this,Oa,!1);k(this,ji,null);k(this,ny,new qM);k(this,za,!1);k(this,Yd,!1);k(this,$a,null);k(this,Jo,null);k(this,Kd,null);k(this,Qd,null);k(this,ln,He.NONE);k(this,dt,new Set);k(this,ks,null);k(this,Zo,null);k(this,Jd,null);k(this,Zd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Ha,[0,0]);k(this,Ui,null);k(this,Rs,null);k(this,ef,null);k(this,Wr,null);const S=this._signal=u(this,nc).signal;E(this,Rs,e),E(this,ef,t),E(this,rc,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:S}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),i._on("setpreference",this.onSetPreference.bind(this),{signal:S}),i._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:S}),R(this,se,d_).call(this),R(this,se,m_).call(this),R(this,se,yw).call(this),E(this,Cs,o.annotationStorage),E(this,qd,o.filterFactory),E(this,Zo,l),E(this,oc,h||null),E(this,Gd,d),E(this,Xd,p),E(this,ac,g),E(this,Qd,m||null),this.viewParameters={realScale:po.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=b!==!1}static get _keyboardManager(){const e=Xu.prototype,t=l=>u(l,Rs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ye(this,"_keyboardManager",new bp([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&u(l,Rs).contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&u(l,Rs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,n,i,o;(e=u(this,Wr))==null||e.resolve(),E(this,Wr,null),(t=u(this,nc))==null||t.abort(),E(this,nc,null),this._signal=null;for(const l of u(this,yn).values())l.destroy();u(this,yn).clear(),u(this,tn).clear(),u(this,Qo).clear(),E(this,vr,null),u(this,dt).clear(),u(this,Vr).destroy(),(n=u(this,rc))==null||n.destroy(),(i=u(this,ji))==null||i.hide(),E(this,ji,null),u(this,Bi)&&(clearTimeout(u(this,Bi)),E(this,Bi,null)),u(this,Ui)&&(clearTimeout(u(this,Ui)),E(this,Ui,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Qd)}get useNewAltTextFlow(){return u(this,Xd)}get useNewAltTextWhenAddingImage(){return u(this,ac)}get hcmFilter(){return Ye(this,"hcmFilter",u(this,Zo)?u(this,qd).addHCMFilter(u(this,Zo).foreground,u(this,Zo).background):"none")}get direction(){return Ye(this,"direction",getComputedStyle(u(this,Rs)).direction)}get highlightColors(){return Ye(this,"highlightColors",u(this,oc)?new Map(u(this,oc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ye(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,Yo,e)}setMainHighlightColorPicker(e){E(this,Kd,e)}editAltText(e,t=!1){var n;(n=u(this,rc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,ac,t);break}}onPageChanging({pageNumber:e}){E(this,sc,e-1)}focusMainContainer(){u(this,Rs).focus()}findParent(e,t){for(const n of u(this,yn).values()){const{x:i,y:o,width:l,height:h}=n.div.getBoundingClientRect();if(e>=i&&e<=i+l&&t>=o&&t<=o+h)return n}return null}disableUserSelect(e=!1){u(this,ef).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Qo).add(e)}removeShouldRescale(e){u(this,Qo).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*po.PDF_TO_CSS_UNITS;for(const n of u(this,Qo))n.onScaleChanging();(t=u(this,Yo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:l}=t,h=t.toString(),p=R(this,se,om).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;t.empty();const m=R(this,se,mw).call(this,p),v=u(this,ln)===He.NONE,b=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:l,text:h}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(He.HIGHLIGHT,b);return}b()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Cs)&&!u(this,Cs).has(e.id)&&u(this,Cs).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,Oa)&&(E(this,Oa,!1),R(this,se,lm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,dt))if(t.div.contains(e)){E(this,Jo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Jo))return;const[e,t]=u(this,Jo);E(this,Jo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){R(this,se,yw).call(this),R(this,se,vw).call(this)}removeEditListeners(){R(this,se,g_).call(this),R(this,se,ww).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,mi))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,mi))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,vr))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of u(this,dt)){const o=i.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of u(this,mi))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Be(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const d of n){const p=await i.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)R(this,se,bw).call(this,d);R(this,se,Sw).call(this,o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){Be(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,ln)!==He.NONE&&!this.isEditorHandlingKeyboard&&Xu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Oa)&&(E(this,Oa,!1),R(this,se,lm).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(R(this,se,f_).call(this),R(this,se,vw).call(this),R(this,se,jn).call(this,{isEditing:u(this,ln)!==He.NONE,isEmpty:R(this,se,ud).call(this),hasSomethingToUndo:u(this,Vr).hasSomethingToUndo(),hasSomethingToRedo:u(this,Vr).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,se,p_).call(this),R(this,se,ww).call(this),R(this,se,jn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,mi)){E(this,mi,e);for(const t of u(this,mi))R(this,se,As).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,ny).id}get currentLayer(){return u(this,yn).get(u(this,sc))}getLayer(e){return u(this,yn).get(e)}get currentPageIndex(){return u(this,sc)}addLayer(e){u(this,yn).set(e.pageIndex,e),u(this,za)?e.enable():e.disable()}removeLayer(e){u(this,yn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var i;if(u(this,ln)!==e&&!(u(this,Wr)&&(await u(this,Wr).promise,!u(this,Wr)))){if(E(this,Wr,Promise.withResolvers()),E(this,ln,e),e===He.NONE){this.setEditingState(!1),R(this,se,v_).call(this),(i=this._editorUndoBar)==null||i.hide(),u(this,Wr).resolve();return}this.setEditingState(!0),await R(this,se,y_).call(this),this.unselectAll();for(const o of u(this,yn).values())o.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,Wr).resolve();return}for(const o of u(this,tn).values())o.annotationElementId===t?(this.setSelected(o),o.enterInEditMode()):o.unselect();u(this,Wr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,ln)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(u(this,mi)){switch(e){case Ke.CREATE:this.currentLayer.addNewEditor();return;case Ke.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Kd))==null||n.updateColor(t);break;case Ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Jd)||E(this,Jd,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of u(this,dt))i.updateParams(e,t);for(const i of u(this,mi))i.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var o;for(const l of u(this,tn).values())l.editorType===e&&l.show(t);(((o=u(this,Jd))==null?void 0:o.get(Ke.HIGHLIGHT_SHOW_ALL))??!0)!==t&&R(this,se,As).call(this,[[Ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Yd)!==e){E(this,Yd,e);for(const t of u(this,yn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,tn).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,tn).get(e)}addEditor(e){u(this,tn).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,Bi)&&clearTimeout(u(this,Bi)),E(this,Bi,setTimeout(()=>{this.focusMainContainer(),E(this,Bi,null)},0))),u(this,tn).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,Ko).has(e.annotationElementId))&&((t=u(this,Cs))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,Ko).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Ko).has(e)}removeDeletedAnnotationElement(e){u(this,Ko).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,vr)!==e&&(E(this,vr,e),e&&R(this,se,As).call(this,e.propertiesToUpdate))}updateUI(e){u(this,se,w_)===e&&R(this,se,As).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){R(this,se,As).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,dt).has(e)){u(this,dt).delete(e),e.unselect(),R(this,se,jn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,dt).add(e),e.select(),R(this,se,As).call(this,e.propertiesToUpdate),R(this,se,jn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=u(this,Yo))==null||t.commitOrRemove();for(const n of u(this,dt))n!==e&&n.unselect();u(this,dt).clear(),u(this,dt).add(e),e.select(),R(this,se,As).call(this,e.propertiesToUpdate),R(this,se,jn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,dt).has(e)}get firstSelectedEditor(){return u(this,dt).values().next().value}unselect(e){e.unselect(),u(this,dt).delete(e),R(this,se,jn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,dt).size!==0}get isEnterHandled(){return u(this,dt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Vr).undo(),R(this,se,jn).call(this,{hasSomethingToUndo:u(this,Vr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,se,ud).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Vr).redo(),R(this,se,jn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Vr).hasSomethingToRedo(),isEmpty:R(this,se,ud).call(this)})}addCommands(e){u(this,Vr).add(e),R(this,se,jn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,se,ud).call(this)})}cleanUndoStack(e){u(this,Vr).cleanType(e)}delete(){var o;this.commitOrRemove();const e=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,dt)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(i,t.length===1?t[0].editorType:t.length);for(const h of t)h.remove()},i=()=>{for(const l of t)R(this,se,bw).call(this,l)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,vr))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,vr)||this.hasSelection}selectAll(){for(const e of u(this,dt))e.commit();R(this,se,Sw).call(this,u(this,tn).values())}unselectAll(){var e;if(!(u(this,vr)&&(u(this,vr).commitOrRemove(),u(this,ln)!==He.NONE))&&!((e=u(this,Yo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,dt))t.unselect();u(this,dt).clear(),R(this,se,jn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Ha)[0]+=e,u(this,Ha)[1]+=t;const[i,o]=u(this,Ha),l=[...u(this,dt)],h=1e3;u(this,Ui)&&clearTimeout(u(this,Ui)),E(this,Ui,setTimeout(()=>{E(this,Ui,null),u(this,Ha)[0]=u(this,Ha)[1]=0,this.addCommands({cmd:()=>{for(const d of l)u(this,tn).has(d.id)&&d.translateInPage(i,o)},undo:()=>{for(const d of l)u(this,tn).has(d.id)&&d.translateInPage(-i,-o)},mustExec:!1})},h));for(const d of l)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,Hi,new Map);for(const e of u(this,dt))u(this,Hi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Hi))return!1;this.disableUserSelect(!1);const e=u(this,Hi);E(this,Hi,null);let t=!1;for(const[{x:i,y:o,pageIndex:l},h]of e)h.newX=i,h.newY=o,h.newPageIndex=l,t||(t=i!==h.savedX||o!==h.savedY||l!==h.savedPageIndex);if(!t)return!1;const n=(i,o,l,h)=>{if(u(this,tn).has(i.id)){const d=u(this,yn).get(h);d?i._setParentAndPosition(d,o,l):(i.pageIndex=h,i.x=o,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:l,newPageIndex:h}]of e)n(i,o,l,h)},undo:()=>{for(const[i,{savedX:o,savedY:l,savedPageIndex:h}]of e)n(i,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Hi))for(const n of u(this,Hi).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,dt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,vr)===e}getActive(){return u(this,vr)}getMode(){return u(this,ln)}get imageManager(){return Ye(this,"imageManager",new pw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:i,width:o,height:l}=e.getBoundingClientRect();let h;switch(e.getAttribute("data-main-rotation")){case"90":h=(p,g,m,v)=>({x:(g-i)/l,y:1-(p+m-n)/o,width:v/l,height:m/o});break;case"180":h=(p,g,m,v)=>({x:1-(p+m-n)/o,y:1-(g+v-i)/l,width:m/o,height:v/l});break;case"270":h=(p,g,m,v)=>({x:1-(g+v-i)/l,y:(p-n)/o,width:v/l,height:m/o});break;default:h=(p,g,m,v)=>({x:(p-n)/o,y:(g-i)/l,width:m/o,height:v/l});break}const d=[];for(let p=0,g=t.rangeCount;p<g;p++){const m=t.getRangeAt(p);if(!m.collapsed)for(const{x:v,y:b,width:S,height:A}of m.getClientRects())S===0||A===0||d.push(h(v,b,S,A))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,ic)||E(this,ic,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,ic))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=u(this,ic))==null?void 0:i.get(e.data.id);if(!t)return;const n=u(this,Cs).getRawValue(t);n&&(u(this,ln)===He.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};nc=new WeakMap,vr=new WeakMap,tn=new WeakMap,yn=new WeakMap,rc=new WeakMap,Cs=new WeakMap,ic=new WeakMap,Vr=new WeakMap,Na=new WeakMap,Yo=new WeakMap,sc=new WeakMap,Ko=new WeakMap,Hi=new WeakMap,mi=new WeakMap,Qo=new WeakMap,Gd=new WeakMap,Xd=new WeakMap,ac=new WeakMap,qd=new WeakMap,Bi=new WeakMap,Fa=new WeakMap,oc=new WeakMap,Oa=new WeakMap,ji=new WeakMap,ny=new WeakMap,za=new WeakMap,Yd=new WeakMap,$a=new WeakMap,Jo=new WeakMap,Kd=new WeakMap,Qd=new WeakMap,ln=new WeakMap,dt=new WeakMap,ks=new WeakMap,Zo=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,Ha=new WeakMap,Ui=new WeakMap,Rs=new WeakMap,ef=new WeakMap,Wr=new WeakMap,se=new WeakSet,om=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},mw=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,yn).values())if(n.hasTextLayer(e))return n;return null},c_=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=R(this,se,om).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(u(this,ji)||E(this,ji,new XM(this)),u(this,ji).show(n,i,this.direction==="ltr"))},h_=function(){var o,l,h;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ks)&&((o=u(this,ji))==null||o.hide(),E(this,ks,null),R(this,se,jn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,ks))return;const i=R(this,se,om).call(this,e).closest(".textLayer");if(!i){u(this,ks)&&((l=u(this,ji))==null||l.hide(),E(this,ks,null),R(this,se,jn).call(this,{hasSelectedText:!1}));return}if((h=u(this,ji))==null||h.hide(),E(this,ks,t),R(this,se,jn).call(this,{hasSelectedText:!0}),!(u(this,ln)!==He.HIGHLIGHT&&u(this,ln)!==He.NONE)&&(u(this,ln)===He.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,Oa,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=u(this,ln)===He.HIGHLIGHT?R(this,se,mw).call(this,i):null;d==null||d.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),m=v=>{v.type==="pointerup"&&v.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&R(this,se,lm).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:g}),window.addEventListener("blur",m,{signal:g})}},lm=function(e=""){u(this,ln)===He.HIGHLIGHT?this.highlightSelection(e):u(this,Gd)&&R(this,se,c_).call(this)},d_=function(){document.addEventListener("selectionchange",R(this,se,h_).bind(this),{signal:this._signal})},f_=function(){if(u(this,Fa))return;E(this,Fa,new AbortController);const e=this.combinedSignal(u(this,Fa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},p_=function(){var e;(e=u(this,Fa))==null||e.abort(),E(this,Fa,null)},yw=function(){if(u(this,$a))return;E(this,$a,new AbortController);const e=this.combinedSignal(u(this,$a));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},g_=function(){var e;(e=u(this,$a))==null||e.abort(),E(this,$a,null)},vw=function(){if(u(this,Na))return;E(this,Na,new AbortController);const e=this.combinedSignal(u(this,Na));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},ww=function(){var e;(e=u(this,Na))==null||e.abort(),E(this,Na,null)},m_=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},jn=function(e){Object.entries(e).some(([n,i])=>u(this,Zd)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Zd),e)}),u(this,ln)===He.HIGHLIGHT&&e.hasSelectedEditor===!1&&R(this,se,As).call(this,[[Ke.HIGHLIGHT_FREE,!0]]))},As=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},y_=async function(){if(!u(this,za)){E(this,za,!0);const e=[];for(const t of u(this,yn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,tn).values())t.enable()}},v_=function(){if(this.unselectAll(),u(this,za)){E(this,za,!1);for(const e of u(this,yn).values())e.disable();for(const e of u(this,tn).values())e.disable()}},bw=function(e){const t=u(this,yn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},w_=function(){let e=null;for(e of u(this,dt));return e},ud=function(){if(u(this,tn).size===0)return!0;if(u(this,tn).size===1)for(const e of u(this,tn).values())return e.isEmpty();return!1},Sw=function(e){for(const t of u(this,dt))t.unselect();u(this,dt).clear();for(const t of e)t.isEmpty()||(u(this,dt).add(t),t.select());R(this,se,jn).call(this,{hasSelectedEditor:this.hasSelection})},Le(Xu,"TRANSLATE_SMALL",1),Le(Xu,"TRANSLATE_BIG",10);let Jl=Xu;var un,Vi,yi,lc,Wi,wr,uc,Gi,ar,Ts,el,Xi,Ba,Ti,cd,um;const Un=class Un{constructor(e){k(this,Ti);k(this,un,null);k(this,Vi,!1);k(this,yi,null);k(this,lc,null);k(this,Wi,null);k(this,wr,null);k(this,uc,!1);k(this,Gi,null);k(this,ar,null);k(this,Ts,null);k(this,el,null);k(this,Xi,!1);E(this,ar,e),E(this,Xi,e._uiManager.useNewAltTextFlow),u(Un,Ba)||E(Un,Ba,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Un._l10n??(Un._l10n=e)}async render(){const e=E(this,yi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,lc,document.createElement("span"));e.append(t),u(this,Xi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Un,Ba).missing),t.setAttribute("data-l10n-id",u(Un,Ba)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,ar)._uiManager._signal;e.addEventListener("contextmenu",Li,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),u(this,ar)._uiManager.editAltText(u(this,ar)),u(this,Xi)&&u(this,ar)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Ti,cd)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(E(this,uc,!0),i(o))},{signal:n}),await R(this,Ti,um).call(this),e}finish(){u(this,yi)&&(u(this,yi).focus({focusVisible:u(this,uc)}),E(this,uc,!1))}isEmpty(){return u(this,Xi)?u(this,un)===null:!u(this,un)&&!u(this,Vi)}hasData(){return u(this,Xi)?u(this,un)!==null||!!u(this,Ts):this.isEmpty()}get guessedText(){return u(this,Ts)}async setGuessedText(e){u(this,un)===null&&(E(this,Ts,e),E(this,el,await Un._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),R(this,Ti,um).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Xi)||u(this,un)){(t=u(this,Gi))==null||t.remove(),E(this,Gi,null);return}if(!u(this,Gi)){const n=E(this,Gi,document.createElement("div"));n.className="noAltTextBadge",u(this,ar).div.append(n)}u(this,Gi).classList.toggle("hidden",!e)}serialize(e){let t=u(this,un);return!e&&u(this,Ts)===t&&(t=u(this,el)),{altText:t,decorative:u(this,Vi),guessedText:u(this,Ts),textWithDisclaimer:u(this,el)}}get data(){return{altText:u(this,un),decorative:u(this,Vi)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(E(this,Ts,n),E(this,el,i)),!(u(this,un)===e&&u(this,Vi)===t)&&(o||(E(this,un,e),E(this,Vi,t)),R(this,Ti,um).call(this))}toggle(e=!1){u(this,yi)&&(!e&&u(this,wr)&&(clearTimeout(u(this,wr)),E(this,wr,null)),u(this,yi).disabled=!e)}shown(){u(this,ar)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Ti,cd)}})}destroy(){var e,t;(e=u(this,yi))==null||e.remove(),E(this,yi,null),E(this,lc,null),E(this,Wi,null),(t=u(this,Gi))==null||t.remove(),E(this,Gi,null)}};un=new WeakMap,Vi=new WeakMap,yi=new WeakMap,lc=new WeakMap,Wi=new WeakMap,wr=new WeakMap,uc=new WeakMap,Gi=new WeakMap,ar=new WeakMap,Ts=new WeakMap,el=new WeakMap,Xi=new WeakMap,Ba=new WeakMap,Ti=new WeakSet,cd=function(){return u(this,un)&&"added"||u(this,un)===null&&this.guessedText&&"review"||"missing"},um=async function(){var i,o,l;const e=u(this,yi);if(!e)return;if(u(this,Xi)){if(e.classList.toggle("done",!!u(this,un)),e.setAttribute("data-l10n-id",u(Un,Ba)[u(this,Ti,cd)]),(i=u(this,lc))==null||i.setAttribute("data-l10n-id",u(Un,Ba)[`${u(this,Ti,cd)}-label`]),!u(this,un)){(o=u(this,Wi))==null||o.remove();return}}else{if(!u(this,un)&&!u(this,Vi)){e.classList.remove("done"),(l=u(this,Wi))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Wi);if(!t){E(this,Wi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,ar).id}`;const h=100,d=u(this,ar)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,wr)),E(this,wr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,wr,setTimeout(()=>{E(this,wr,null),u(this,Wi).classList.add("show"),u(this,ar)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;u(this,wr)&&(clearTimeout(u(this,wr)),E(this,wr,null)),(p=u(this,Wi))==null||p.classList.remove("show")},{signal:d})}u(this,Vi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,un)),t.parentNode||e.append(t);const n=u(this,ar).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},k(Un,Ba,null),Le(Un,"_l10n",null);let Wm=Un;var tf,tl,nf,rf,sf,af,of,cc,Ps,nl,ja,ta,b_,S_,Aw;const sb=class sb{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){k(this,ta);k(this,tf);k(this,tl,!1);k(this,nf,null);k(this,rf);k(this,sf);k(this,af);k(this,of);k(this,cc);k(this,Ps,null);k(this,nl);k(this,ja,null);E(this,tf,e),E(this,nf,n),E(this,rf,t),E(this,sf,i),E(this,af,o),E(this,of,l),E(this,nl,new AbortController),E(this,cc,AbortSignal.any([h,u(this,nl).signal])),e.addEventListener("touchstart",R(this,ta,b_).bind(this),{passive:!1,signal:u(this,cc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ye(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=u(this,nl))==null||e.abort(),E(this,nl,null)}};tf=new WeakMap,tl=new WeakMap,nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakMap,cc=new WeakMap,Ps=new WeakMap,nl=new WeakMap,ja=new WeakMap,ta=new WeakSet,b_=function(e){var i,o,l;if((i=u(this,rf))!=null&&i.call(this)||e.touches.length<2)return;if(!u(this,ja)){E(this,ja,new AbortController);const h=AbortSignal.any([u(this,cc),u(this,ja).signal]),d=u(this,tf),p={signal:h,passive:!1};d.addEventListener("touchmove",R(this,ta,S_).bind(this),p),d.addEventListener("touchend",R(this,ta,Aw).bind(this),p),d.addEventListener("touchcancel",R(this,ta,Aw).bind(this),p),(o=u(this,sf))==null||o.call(this)}if(Ir(e),e.touches.length!==2||(l=u(this,nf))!=null&&l.call(this)){E(this,Ps,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),E(this,Ps,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},S_=function(e){var I;if(!u(this,Ps)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:o}=t,{screenX:l,screenY:h}=n,d=u(this,Ps),{touch0X:p,touch0Y:g,touch1X:m,touch1Y:v}=d,b=m-p,S=v-g,A=l-i,x=h-o,_=Math.hypot(A,x)||1,P=Math.hypot(b,S)||1;if(!u(this,tl)&&Math.abs(P-_)<=sb.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=o,d.touch1X=l,d.touch1Y=h,e.preventDefault(),!u(this,tl)){E(this,tl,!0);return}const M=[(i+l)/2,(o+h)/2];(I=u(this,af))==null||I.call(this,M,P,_)},Aw=function(e){var t;u(this,ja).abort(),E(this,ja,null),(t=u(this,of))==null||t.call(this),u(this,Ps)&&(e.preventDefault(),E(this,Ps,null),E(this,tl,!1))};let Gm=sb;var rl,vi,Ct,hc,Ua,lf,il,vn,sl,Ls,Va,uf,al,br,cf,ol,Ms,qi,dc,fc,Gr,ll,hf,ry,Me,Ew,df,xw,cm,A_,E_,_w,hm,Cw,x_,__,C_,kw,k_,Rw,R_,T_,P_,Tw,hd;const We=class We{constructor(e){k(this,Me);k(this,rl,null);k(this,vi,null);k(this,Ct,null);k(this,hc,!1);k(this,Ua,null);k(this,lf,"");k(this,il,!1);k(this,vn,null);k(this,sl,null);k(this,Ls,null);k(this,Va,null);k(this,uf,"");k(this,al,!1);k(this,br,null);k(this,cf,!1);k(this,ol,!1);k(this,Ms,!1);k(this,qi,null);k(this,dc,0);k(this,fc,0);k(this,Gr,null);k(this,ll,null);Le(this,"_editToolbar",null);Le(this,"_initialOptions",Object.create(null));Le(this,"_initialData",null);Le(this,"_isVisible",!0);Le(this,"_uiManager",null);Le(this,"_focusEventsAllowed",!0);k(this,hf,!1);k(this,ry,We._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=e.x/h,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=We.prototype._resizeWithKeyboard,t=Jl.TRANSLATE_SMALL,n=Jl.TRANSLATE_BIG;return Ye(this,"_resizerKeyboardManager",new bp([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],We.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ye(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new KM({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(We._l10n??(We._l10n=e),We._l10nResizer||(We._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),We._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);We._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,hf)}set _isDraggable(e){var t;E(this,hf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,ry)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):R(this,Me,hd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,al)?E(this,al,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[o,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/o,this.y=(t+i)/l,this.fixAndSetPosition()}translate(e,t){R(this,Me,Ew).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,br)||E(this,br,[this.x,this.y,this.width,this.height]),R(this,Me,Ew).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,br)||E(this,br,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[d,p]=this.getBaseTranslation();l+=d,h+=p;const{style:g}=n;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,br)&&(u(this,br)[0]!==this.x||u(this,br)[1]!==this.y)}get _hasBeenResized(){return!!u(this,br)&&(u(this,br)[2]!==this.width||u(this,br)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=We,i=n/e,o=n/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:o,y:l,width:h,height:d}=this;if(h*=n,d*=i,o*=n,l*=i,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(n-h,o)),l=Math.max(0,Math.min(i-d,l));break;case 90:o=Math.max(0,Math.min(n-d,o)),l=Math.min(i,Math.max(h,l));break;case 180:o=Math.min(n,Math.max(h,o)),l=Math.min(i,Math.max(d,l));break;case 270:o=Math.min(n,Math.max(d,o)),l=Math.max(0,Math.min(i-h,l));break}this.x=o/=n,this.y=l/=i;const[p,g]=this.getBaseTranslation();o+=p,l+=g,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return R(n=We,df,xw).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return R(n=We,df,xw).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*e/n).toFixed(2)}%`,u(this,il)||(o.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),o=!u(this,il)&&t.endsWith("%");if(i&&o)return;const[l,h]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!u(this,il)&&!o&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,Ct))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,ol)?this._editToolbar:(this._editToolbar=new dw(this),this.div.append(this._editToolbar.render()),u(this,Ct)&&await this._editToolbar.addAltText(u(this,Ct)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,Ct))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,Ct)||(Wm.initialize(We._l10n),E(this,Ct,new Wm(this)),u(this,rl)&&(u(this,Ct).data=u(this,rl),E(this,rl,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,Ct))==null?void 0:e.data}set altTextData(e){u(this,Ct)&&(u(this,Ct).data=e)}get guessedAltText(){var e;return(e=u(this,Ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,Ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,Ct))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,Ct)&&!u(this,Ct).isEmpty()}hasAltTextData(){var e;return((e=u(this,Ct))==null?void 0:e.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,hc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),R(this,Me,Rw).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),Vm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,ll)||E(this,ll,new Gm({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,Me,x_).bind(this),onPinching:R(this,Me,__).bind(this),onPinchEnd:R(this,Me,C_).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(e){const{isMac:t}=Xn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,al,!0),this._isDraggable){R(this,Me,k_).call(this,e);return}R(this,Me,kw).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,qi)&&clearTimeout(u(this,qi)),E(this,qi,setTimeout(()=>{var e;E(this,qi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,p=e/i,g=t/i,m=this.x*o,v=this.y*l,b=this.width*o,S=this.height*l;switch(n){case 0:return[m+p+h,l-v-g-S+d,m+p+b+h,l-v-g+d];case 90:return[m+g+h,l-v+p+d,m+g+S+h,l-v+p+b+d];case 180:return[m-p-b+h,l-v+g+d,m-p+h,l-v+g+S+d];case 270:return[m-g-S+h,l-v-p-b+d,m-g+h,l-v-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,o,l]=e,h=o-n,d=l-i;switch(this.rotation){case 0:return[n,t-l,h,d];case 90:return[n,t-i,d,h];case 180:return[o,t-i,h,d];case 270:return[o,t-l,d,h];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){E(this,ol,!0)}disableEditMode(){E(this,ol,!1)}isInEditMode(){return u(this,ol)}shouldGetKeyboardEvents(){return u(this,Ms)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&i>0&&e<o&&n>0}rebuild(){R(this,Me,Rw).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){yt("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,E(i,rl,e.accessibilityData);const[o,l]=i.pageDimensions,[h,d,p,g]=i.getRectInCurrentCoords(e.rect,l);return i.x=h/o,i.y=d/l,i.width=p/o,i.height=g/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,Va))==null||e.abort(),E(this,Va,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,qi)&&(clearTimeout(u(this,qi)),E(this,qi,null)),R(this,Me,hd).call(this),this.removeEditToolbar(),u(this,Gr)){for(const n of u(this,Gr).values())clearTimeout(n);E(this,Gr,null)}this.parent=null,(t=u(this,ll))==null||t.destroy(),E(this,ll,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,Me,A_).call(this),u(this,vn).classList.remove("hidden"),Vm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,Ls,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,vn).children;if(!u(this,vi)){E(this,vi,Array.from(t));const l=R(this,Me,R_).bind(this),h=R(this,Me,T_).bind(this),d=this._uiManager._signal;for(const p of u(this,vi)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",R(this,Me,P_).bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",We._l10nResizer[g])}}const n=u(this,vi)[0];let i=0;for(const l of t){if(l===n)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(u(this,vi).length/4);if(o!==i){if(o<i)for(let h=0;h<i-o;h++)u(this,vn).append(u(this,vn).firstChild);else if(o>i)for(let h=0;h<o-i;h++)u(this,vn).firstChild.before(u(this,vn).lastChild);let l=0;for(const h of t){const p=u(this,vi)[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",We._l10nResizer[p])}}R(this,Me,Tw).call(this,0),E(this,Ms,!0),u(this,vn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ms)&&R(this,Me,Cw).call(this,u(this,uf),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,Me,hd).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,o;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,Ct))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,i,o;(e=u(this,vn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(o=u(this,Ct))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,cf)}set isEditing(e){E(this,cf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){E(this,il,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Gr)||E(this,Gr,new Map);const{action:n}=e;let i=u(this,Gr).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),u(this,Gr).delete(n),u(this,Gr).size===0&&E(this,Gr,null)},We._telemetryTimeout),u(this,Gr).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,hc,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,hc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};rl=new WeakMap,vi=new WeakMap,Ct=new WeakMap,hc=new WeakMap,Ua=new WeakMap,lf=new WeakMap,il=new WeakMap,vn=new WeakMap,sl=new WeakMap,Ls=new WeakMap,Va=new WeakMap,uf=new WeakMap,al=new WeakMap,br=new WeakMap,cf=new WeakMap,ol=new WeakMap,Ms=new WeakMap,qi=new WeakMap,dc=new WeakMap,fc=new WeakMap,Gr=new WeakMap,ll=new WeakMap,hf=new WeakMap,ry=new WeakMap,Me=new WeakSet,Ew=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},df=new WeakSet,xw=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},cm=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},A_=function(){if(u(this,vn))return;E(this,vn,document.createElement("div")),u(this,vn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");u(this,vn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",R(this,Me,E_).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Li,{signal:t}),i.tabIndex=-1}this.div.prepend(u(this,vn))},E_=function(e,t){var g;t.preventDefault();const{isMac:n}=Xn.platform;if(t.button!==0||t.ctrlKey&&n)return;(g=u(this,Ct))==null||g.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,E(this,sl,[t.screenX,t.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,Me,Cw).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ir,{passive:!1,signal:l}),window.addEventListener("contextmenu",Li,{signal:l}),E(this,Ls,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var m;o.abort(),this.parent.togglePointerEvents(!0),(m=u(this,Ct))==null||m.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=h,this.div.style.cursor=d,R(this,Me,hm).call(this)};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})},_w=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[o,l]=this.parentDimensions;this.setDims(o*n,l*i),this.fixAndSetPosition(),this._onResized()},hm=function(){if(!u(this,Ls))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=u(this,Ls);E(this,Ls,null);const o=this.x,l=this.y,h=this.width,d=this.height;o===e&&l===t&&h===n&&d===i||this.addCommands({cmd:R(this,Me,_w).bind(this,o,l,h,d),undo:R(this,Me,_w).bind(this,e,t,n,i),mustExec:!0})},Cw=function(e,t){const[n,i]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,p=We.MIN_SIZE/n,g=We.MIN_SIZE/i,m=R(this,Me,cm).call(this,this.rotation),v=(J,ie)=>[m[0]*J+m[2]*ie,m[1]*J+m[3]*ie],b=R(this,Me,cm).call(this,360-this.rotation),S=(J,ie)=>[b[0]*J+b[2]*ie,b[1]*J+b[3]*ie];let A,x,_=!1,P=!1;switch(e){case"topLeft":_=!0,A=(J,ie)=>[0,0],x=(J,ie)=>[J,ie];break;case"topMiddle":A=(J,ie)=>[J/2,0],x=(J,ie)=>[J/2,ie];break;case"topRight":_=!0,A=(J,ie)=>[J,0],x=(J,ie)=>[0,ie];break;case"middleRight":P=!0,A=(J,ie)=>[J,ie/2],x=(J,ie)=>[0,ie/2];break;case"bottomRight":_=!0,A=(J,ie)=>[J,ie],x=(J,ie)=>[0,0];break;case"bottomMiddle":A=(J,ie)=>[J/2,ie],x=(J,ie)=>[J/2,0];break;case"bottomLeft":_=!0,A=(J,ie)=>[0,ie],x=(J,ie)=>[J,0];break;case"middleLeft":P=!0,A=(J,ie)=>[0,ie/2],x=(J,ie)=>[J,ie/2];break}const M=A(h,d),I=x(h,d);let L=v(...I);const T=We._round(o+L[0]),N=We._round(l+L[1]);let G=1,q=1,ae,oe;if(t.fromKeyboard)({deltaX:ae,deltaY:oe}=t);else{const{screenX:J,screenY:ie}=t,[ee,fe]=u(this,sl);[ae,oe]=this.screenToPageTranslation(J-ee,ie-fe),u(this,sl)[0]=J,u(this,sl)[1]=ie}if([ae,oe]=S(ae/n,oe/i),_){const J=Math.hypot(h,d);G=q=Math.max(Math.min(Math.hypot(I[0]-M[0]-ae,I[1]-M[1]-oe)/J,1/h,1/d),p/h,g/d)}else P?G=Math.max(p,Math.min(1,Math.abs(I[0]-M[0]-ae)))/h:q=Math.max(g,Math.min(1,Math.abs(I[1]-M[1]-oe)))/d;const $e=We._round(h*G),Ue=We._round(d*q);L=v(...x($e,Ue));const Ie=T-L[0],nt=N-L[1];u(this,br)||E(this,br,[this.x,this.y,this.width,this.height]),this.width=$e,this.height=Ue,this.x=Ie,this.y=nt,this.setDims(n*$e,i*Ue),this.fixAndSetPosition(),this._onResizing()},x_=function(){var e;E(this,Ls,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,Ct))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},__=function(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=R(this,Me,cm).call(this,this.rotation),h=(T,N)=>[l[0]*T+l[2]*N,l[1]*T+l[3]*N],[d,p]=this.parentDimensions,g=this.x,m=this.y,v=this.width,b=this.height,S=We.MIN_SIZE/d,A=We.MIN_SIZE/p;o=Math.max(Math.min(o,1/v,1/b),S/v,A/b);const x=We._round(v*o),_=We._round(b*o);if(x===v&&_===b)return;u(this,br)||E(this,br,[g,m,v,b]);const P=h(v/2,b/2),M=We._round(g+P[0]),I=We._round(m+P[1]),L=h(x/2,_/2);this.x=M-L[0],this.y=I-L[1],this.width=x,this.height=_,this.setDims(d*x,p*_),this.fixAndSetPosition(),this._onResizing()},C_=function(){var e;(e=u(this,Ct))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),R(this,Me,hm).call(this)},kw=function(e){const{isMac:t}=Xn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},k_=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:o},h=p=>{i.abort(),E(this,Ua,null),E(this,al,!1),this._uiManager.endDragSession()||R(this,Me,kw).call(this,p),n&&this._onStopDragging()};t&&(E(this,dc,e.clientX),E(this,fc,e.clientY),E(this,Ua,e.pointerId),E(this,lf,e.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:m,pointerId:v}=p;if(v!==u(this,Ua)){Ir(p);return}const[b,S]=this.screenToPageTranslation(g-u(this,dc),m-u(this,fc));E(this,dc,g),E(this,fc,m),this._uiManager.dragSelectedEditors(b,S)},l),window.addEventListener("touchmove",Ir,l),window.addEventListener("pointerdown",p=>{p.pointerType===u(this,lf)&&(u(this,ll)||p.isPrimary)&&h(p),Ir(p)},l));const d=p=>{if(!u(this,Ua)||u(this,Ua)===p.pointerId){h(p);return}Ir(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},Rw=function(){if(u(this,Va)||!this.div)return;E(this,Va,new AbortController);const e=this._uiManager.combinedSignal(u(this,Va));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},R_=function(e){We._resizerKeyboardManager.exec(this,e)},T_=function(e){var t;u(this,Ms)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,vn)&&R(this,Me,hd).call(this)},P_=function(e){E(this,uf,u(this,Ms)?e:"")},Tw=function(e){if(u(this,vi))for(const t of u(this,vi))t.tabIndex=e},hd=function(){E(this,Ms,!1),R(this,Me,Tw).call(this,-1),R(this,Me,hm).call(this)},k(We,df),Le(We,"_l10n",null),Le(We,"_l10nResizer",null),Le(We,"_borderLineWidth",-1),Le(We,"_colorManager",new gw),Le(We,"_zIndex",1),Le(We,"_telemetryTimeout",1e3);let Ft=We;class KM extends Ft{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const NE=3285377520,Ur=4294901760,zi=65535;class L_{constructor(e){this.h1=e?e&4294967295:NE,this.h2=e?e&4294967295:NE}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let A=0,x=e.length;A<x;A++){const _=e.charCodeAt(A);_<=255?t[n++]=_:(t[n++]=_>>>8,t[n++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,o=n-i*4,l=new Uint32Array(t.buffer,0,i);let h=0,d=0,p=this.h1,g=this.h2;const m=3432918353,v=461845907,b=m&zi,S=v&zi;for(let A=0;A<i;A++)A&1?(h=l[A],h=h*m&Ur|h*b&zi,h=h<<15|h>>>17,h=h*v&Ur|h*S&zi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[A],d=d*m&Ur|d*b&zi,d=d<<15|d>>>17,d=d*v&Ur|d*S&zi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=t[i*4+2]<<16;case 2:h^=t[i*4+1]<<8;case 1:h^=t[i*4],h=h*m&Ur|h*b&zi,h=h<<15|h>>>17,h=h*v&Ur|h*S&zi,i&1?p^=h:g^=h}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ur|e*36045&zi,t=t*4283543511&Ur|((t<<16|e>>>16)*2950163797&Ur)>>>16,e^=t>>>1,e=e*444984403&Ur|e*60499&zi,t=t*3301882366&Ur|((t<<16|e>>>16)*3120437893&Ur)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Pw=Object.freeze({map:null,hash:"",transfer:void 0});var ul,cl,cn,iy,M_;class eb{constructor(){k(this,iy);k(this,ul,!1);k(this,cl,null);k(this,cn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,cn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,cn).get(e)}remove(e){if(u(this,cn).delete(e),u(this,cn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,cn).values())if(t instanceof Ft)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,cn).get(e);let i=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(i=!0,n[o]=l);else i=!0,u(this,cn).set(e,t);i&&R(this,iy,M_).call(this),t instanceof Ft&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,cn).has(e)}getAll(){return u(this,cn).size>0?q1(u(this,cn)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return u(this,cn).size}resetModified(){u(this,ul)&&(E(this,ul,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new I_(this)}get serializable(){if(u(this,cn).size===0)return Pw;const e=new Map,t=new L_,n=[],i=Object.create(null);let o=!1;for(const[l,h]of u(this,cn)){const d=h instanceof Ft?h.serialize(!1,i):h;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Pw}get editorStats(){let e=null;const t=new Map;for(const n of u(this,cn).values()){if(!(n instanceof Ft))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:o}=i;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[h,d]of Object.entries(i)){if(h==="type")continue;let p=l.get(h);p||(p=new Map,l.set(h,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){E(this,cl,null)}get modifiedIds(){if(u(this,cl))return u(this,cl);const e=[];for(const t of u(this,cn).values())!(t instanceof Ft)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return E(this,cl,{ids:new Set(e),hash:e.join(",")})}}ul=new WeakMap,cl=new WeakMap,cn=new WeakMap,iy=new WeakSet,M_=function(){u(this,ul)||(E(this,ul,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ff;class I_ extends eb{constructor(t){super();k(this,ff);const{map:n,hash:i,transfer:o}=t.serializable,l=structuredClone(n,o?{transfer:o}:null);E(this,ff,{map:l,hash:i,transfer:o})}get print(){yt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,ff)}get modifiedIds(){return Ye(this,"modifiedIds",{ids:new Set,hash:""})}}ff=new WeakMap;var pc;class QM{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,pc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,pc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,pc).has(e.loadedName))){if(Yt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:o}=e,l=new FontFace(n,i,o);this.addNativeFontFace(l);try{await l.load(),u(this,pc).add(n),t==null||t(e)}catch{Be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Be(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ye(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(zn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ye(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Yt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ye(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(I,L){return I.charCodeAt(L)<<24|I.charCodeAt(L+1)<<16|I.charCodeAt(L+2)<<8|I.charCodeAt(L+3)&255}function i(I,L,T,N){const G=I.substring(0,L),q=I.substring(L+T);return G+N+q}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function g(I,L){if(++p>30){Be("Load test font never loaded."),L();return}if(d.font="30px "+I,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(g.bind(null,I,L))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,m.length,m);const S=16,A=1482184792;let x=n(v,S);for(o=0,l=m.length-3;o<l;o+=4)x=x-A+n(m,o)|0;o<m.length&&(x=x-A+n(m+"XXX",o)|0),v=i(v,S,4,FM(x));const _=`url(data:font/opentype;base64,${btoa(v)});`,P=`@font-face {font-family:"${m}";src:${_}}`;this.insertRule(P);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const I of[e.loadedName,m]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=I,M.append(L)}this._document.body.append(M),g(m,()=>{M.remove(),t.complete()})}}pc=new WeakMap;class JM{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${jM(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(l){Be(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}}const jg={DATA:1,ERROR:2},Xt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function FE(){}function ir(a){if(a instanceof fo||a instanceof uw||a instanceof Od||a instanceof ME||a instanceof Um||a instanceof $0)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new fo(a.message);case"InvalidPDFException":return new uw(a.message);case"MissingPDFException":return new Od(a.message);case"PasswordException":return new ME(a.message,a.code);case"UnexpectedResponseException":return new Um(a.message,a.status);case"UnknownErrorException":return new $0(a.message,a.details)}return new $0(a.message,a.toString())}var gc,ti,D_,N_,F_,dm;class dd{constructor(e,t,n){k(this,ti);k(this,gc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",R(this,ti,D_).bind(this),{signal:u(this,gc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,i){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:e,streamId:o,data:t,desiredSize:p.desiredSize},i),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:Xt.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Yt(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:Xt.CANCEL,streamId:o,reason:ir(p)}),g.promise}},n)}destroy(){var e;(e=u(this,gc))==null||e.abort(),E(this,gc,null)}}gc=new WeakMap,ti=new WeakSet,D_=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){R(this,ti,F_).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===jg.DATA)i.resolve(e.data);else if(e.callback===jg.ERROR)i.reject(ir(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:i,callback:jg.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:i,callback:jg.ERROR,callbackId:e.callbackId,reason:ir(l)})});return}if(e.streamId){R(this,ti,N_).call(this,e);return}t(e.data)},N_=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,l=this,h=this.actionHandler[e.action],d={enqueue(p,g=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:Xt.ENQUEUE,streamId:t,chunk:p},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Xt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(p){Yt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Xt.ERROR,streamId:t,reason:ir(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(h,e.data,d).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Xt.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:i,stream:Xt.START_COMPLETE,streamId:t,reason:ir(p)})})},F_=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,l=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case Xt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(ir(e.reason));break;case Xt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(ir(e.reason));break;case Xt.PULL:if(!h){o.postMessage({sourceName:n,targetName:i,stream:Xt.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,Promise.try(h.onPull||FE).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Xt.PULL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:i,stream:Xt.PULL_COMPLETE,streamId:t,reason:ir(p)})});break;case Xt.ENQUEUE:if(Yt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Xt.CLOSE:if(Yt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),R(this,ti,dm).call(this,l,t);break;case Xt.ERROR:Yt(l,"error should have stream controller"),l.controller.error(ir(e.reason)),R(this,ti,dm).call(this,l,t);break;case Xt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(ir(e.reason)),R(this,ti,dm).call(this,l,t);break;case Xt.CANCEL:if(!h)break;const d=ir(e.reason);Promise.try(h.onCancel||FE,d).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Xt.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:i,stream:Xt.CANCEL_COMPLETE,streamId:t,reason:ir(p)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},dm=async function(e,t){var n,i,o;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var pf;class O_{constructor({enableHWA:e=!1}){k(this,pf,!1);E(this,pf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,pf)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){yt("Abstract method `_createCanvas` called.")}}pf=new WeakMap;class ZM extends O_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class z_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class $_ extends z_{async _fetch(e){const t=await Ny(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Dy(t)}}class H_{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,o){return"none"}destroy(e=!1){}}var hl,mc,Is,Ds,Dn,dl,fl,de,Ln,fd,Ou,fm,zu,B_,Lw,$u,pd,gd,Mw,md;class eI extends H_{constructor({docId:t,ownerDocument:n=globalThis.document}){super();k(this,de);k(this,hl);k(this,mc);k(this,Is);k(this,Ds);k(this,Dn);k(this,dl);k(this,fl,0);E(this,Ds,t),E(this,Dn,n)}addFilter(t){if(!t)return"none";let n=u(this,de,Ln).get(t);if(n)return n;const[i,o,l]=R(this,de,fm).call(this,t),h=t.length===1?i:`${i}${o}${l}`;if(n=u(this,de,Ln).get(h),n)return u(this,de,Ln).set(t,n),n;const d=`g_${u(this,Ds)}_transfer_map_${Bn(this,fl)._++}`,p=R(this,de,zu).call(this,d);u(this,de,Ln).set(t,p),u(this,de,Ln).set(h,p);const g=R(this,de,$u).call(this,d);return R(this,de,gd).call(this,i,o,l,g),p}addHCMFilter(t,n){var S;const i=`${t}-${n}`,o="base";let l=u(this,de,fd).get(o);if((l==null?void 0:l.key)===i||(l?((S=l.filter)==null||S.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},u(this,de,fd).set(o,l)),!t||!n))return l.url;const h=R(this,de,md).call(this,t);t=Ee.makeHexColor(...h);const d=R(this,de,md).call(this,n);if(n=Ee.makeHexColor(...d),u(this,de,Ou).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const p=new Array(256);for(let A=0;A<=255;A++){const x=A/255;p[A]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const g=p.join(","),m=`g_${u(this,Ds)}_hcm_filter`,v=l.filter=R(this,de,$u).call(this,m);R(this,de,gd).call(this,g,g,g,v),R(this,de,Lw).call(this,v);const b=(A,x)=>{const _=h[A]/255,P=d[A]/255,M=new Array(x+1);for(let I=0;I<=x;I++)M[I]=_+I/x*(P-_);return M.join(",")};return R(this,de,gd).call(this,b(0,5),b(1,5),b(2,5),v),l.url=R(this,de,zu).call(this,m),l.url}addAlphaFilter(t){let n=u(this,de,Ln).get(t);if(n)return n;const[i]=R(this,de,fm).call(this,[t]),o=`alpha_${i}`;if(n=u(this,de,Ln).get(o),n)return u(this,de,Ln).set(t,n),n;const l=`g_${u(this,Ds)}_alpha_map_${Bn(this,fl)._++}`,h=R(this,de,zu).call(this,l);u(this,de,Ln).set(t,h),u(this,de,Ln).set(o,h);const d=R(this,de,$u).call(this,l);return R(this,de,Mw).call(this,i,d),h}addLuminosityFilter(t){let n=u(this,de,Ln).get(t||"luminosity");if(n)return n;let i,o;if(t?([i]=R(this,de,fm).call(this,[t]),o=`luminosity_${i}`):o="luminosity",n=u(this,de,Ln).get(o),n)return u(this,de,Ln).set(t,n),n;const l=`g_${u(this,Ds)}_luminosity_map_${Bn(this,fl)._++}`,h=R(this,de,zu).call(this,l);u(this,de,Ln).set(t,h),u(this,de,Ln).set(o,h);const d=R(this,de,$u).call(this,l);return R(this,de,B_).call(this,d),t&&R(this,de,Mw).call(this,i,d),h}addHighlightHCMFilter(t,n,i,o,l){var P;const h=`${n}-${i}-${o}-${l}`;let d=u(this,de,fd).get(t);if((d==null?void 0:d.key)===h||(d?((P=d.filter)==null||P.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},u(this,de,fd).set(t,d)),!n||!i))return d.url;const[p,g]=[n,i].map(R(this,de,md).bind(this));let m=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[b,S]=[o,l].map(R(this,de,md).bind(this));v<m&&([m,v,b,S]=[v,m,S,b]),u(this,de,Ou).style.color="";const A=(M,I,L)=>{const T=new Array(256),N=(v-m)/L,G=M/255,q=(I-M)/(255*L);let ae=0;for(let oe=0;oe<=L;oe++){const $e=Math.round(m+oe*N),Ue=G+oe*q;for(let Ie=ae;Ie<=$e;Ie++)T[Ie]=Ue;ae=$e+1}for(let oe=ae;oe<256;oe++)T[oe]=T[ae-1];return T.join(",")},x=`g_${u(this,Ds)}_hcm_${t}_filter`,_=d.filter=R(this,de,$u).call(this,x);return R(this,de,Lw).call(this,_),R(this,de,gd).call(this,A(b[0],S[0],5),A(b[1],S[1],5),A(b[2],S[2],5),_),d.url=R(this,de,zu).call(this,x),d.url}destroy(t=!1){var n,i,o,l;t&&((n=u(this,dl))!=null&&n.size)||((i=u(this,Is))==null||i.parentNode.parentNode.remove(),E(this,Is,null),(o=u(this,mc))==null||o.clear(),E(this,mc,null),(l=u(this,dl))==null||l.clear(),E(this,dl,null),E(this,fl,0))}}hl=new WeakMap,mc=new WeakMap,Is=new WeakMap,Ds=new WeakMap,Dn=new WeakMap,dl=new WeakMap,fl=new WeakMap,de=new WeakSet,Ln=function(){return u(this,mc)||E(this,mc,new Map)},fd=function(){return u(this,dl)||E(this,dl,new Map)},Ou=function(){if(!u(this,Is)){const t=u(this,Dn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=u(this,Dn).createElementNS(Ss,"svg");i.setAttribute("width",0),i.setAttribute("height",0),E(this,Is,u(this,Dn).createElementNS(Ss,"defs")),t.append(i),i.append(u(this,Is)),u(this,Dn).body.append(t)}return u(this,Is)},fm=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let v=0;v<256;v++)g[v]=p[v]/255;const m=g.join(",");return[m,m,m]}const[n,i,o]=t,l=new Array(256),h=new Array(256),d=new Array(256);for(let p=0;p<256;p++)l[p]=n[p]/255,h[p]=i[p]/255,d[p]=o[p]/255;return[l.join(","),h.join(","),d.join(",")]},zu=function(t){if(u(this,hl)===void 0){E(this,hl,"");const n=u(this,Dn).URL;n!==u(this,Dn).baseURI&&(Fy(n)?Be('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,hl,n.split("#",1)[0]))}return`url(${u(this,hl)}#${t})`},B_=function(t){const n=u(this,Dn).createElementNS(Ss,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Lw=function(t){const n=u(this,Dn).createElementNS(Ss,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},$u=function(t){const n=u(this,Dn).createElementNS(Ss,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,de,Ou).append(n),n},pd=function(t,n,i){const o=u(this,Dn).createElementNS(Ss,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),t.append(o)},gd=function(t,n,i,o){const l=u(this,Dn).createElementNS(Ss,"feComponentTransfer");o.append(l),R(this,de,pd).call(this,l,"feFuncR",t),R(this,de,pd).call(this,l,"feFuncG",n),R(this,de,pd).call(this,l,"feFuncB",i)},Mw=function(t,n){const i=u(this,Dn).createElementNS(Ss,"feComponentTransfer");n.append(i),R(this,de,pd).call(this,i,"feFuncA",t)},md=function(t){return u(this,de,Ou).style.color=t,Z1(getComputedStyle(u(this,de,Ou)).getPropertyValue("color"))};class j_{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){yt("Abstract method `_fetch` called.")}}class U_ extends j_{async _fetch(e){const t=await Ny(e,"arraybuffer");return new Uint8Array(t)}}zn&&Be("Please use the `legacy` build in Node.js environments.");async function V_(a){const t=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(t)}class tI extends H_{}class nI extends O_{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class rI extends z_{async _fetch(e){return V_(e)}}class iI extends j_{async _fetch(e){return V_(e)}}const On={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Iw(a,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),a.clip(i)}class tb{getPattern(){yt("Abstract method `getPattern` called.")}}class sI extends tb{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let o;if(i===On.STROKE||i===On.FILL){const l=t.current.getClippedPathBoundingBox(i,Tt(e))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=t.cachedCanvases.getCanvas("pattern",h,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),n=Ee.transform(n,[1,0,0,1,l[0],l[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Iw(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=e.createPattern(p.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else Iw(e,this._bbox),o=this._createGradient(e);return o}}function j0(a,e,t,n,i,o,l,h){const d=e.coords,p=e.colors,g=a.data,m=a.width*4;let v;d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=o,o=l,l=v),d[n+1]>d[i+1]&&(v=n,n=i,i=v,v=l,l=h,h=v),d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=o,o=l,l=v);const b=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,A=(d[n]+e.offsetX)*e.scaleX,x=(d[n+1]+e.offsetY)*e.scaleY,_=(d[i]+e.offsetX)*e.scaleX,P=(d[i+1]+e.offsetY)*e.scaleY;if(S>=P)return;const M=p[o],I=p[o+1],L=p[o+2],T=p[l],N=p[l+1],G=p[l+2],q=p[h],ae=p[h+1],oe=p[h+2],$e=Math.round(S),Ue=Math.round(P);let Ie,nt,J,ie,ee,fe,re,$;for(let X=$e;X<=Ue;X++){if(X<x){const Ce=X<S?0:(S-X)/(S-x);Ie=b-(b-A)*Ce,nt=M-(M-T)*Ce,J=I-(I-N)*Ce,ie=L-(L-G)*Ce}else{let Ce;X>P?Ce=1:x===P?Ce=0:Ce=(x-X)/(x-P),Ie=A-(A-_)*Ce,nt=T-(T-q)*Ce,J=N-(N-ae)*Ce,ie=G-(G-oe)*Ce}let ce;X<S?ce=0:X>P?ce=1:ce=(S-X)/(S-P),ee=b-(b-_)*ce,fe=M-(M-q)*ce,re=I-(I-ae)*ce,$=L-(L-oe)*ce;const ke=Math.round(Math.min(Ie,ee)),Oe=Math.round(Math.max(Ie,ee));let _e=m*X+ke*4;for(let Ce=ke;Ce<=Oe;Ce++)ce=(Ie-Ce)/(Ie-ee),ce<0?ce=0:ce>1&&(ce=1),g[_e++]=nt-(nt-fe)*ce|0,g[_e++]=J-(J-re)*ce|0,g[_e++]=ie-(ie-$)*ce|0,g[_e++]=255}}function aI(a,e,t){const n=e.coords,i=e.colors;let o,l;switch(e.type){case"lattice":const h=e.verticesPerRow,d=Math.floor(n.length/h)-1,p=h-1;for(o=0;o<d;o++){let g=o*h;for(let m=0;m<p;m++,g++)j0(a,t,n[g],n[g+1],n[g+h],i[g],i[g+1],i[g+h]),j0(a,t,n[g+h+1],n[g+1],n[g+h],i[g+h+1],i[g+1],i[g+h])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)j0(a,t,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class oI extends tb{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),b=p/m,S=g/v,A={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/b,scaleY:1/S},x=m+2*2,_=v+2*2,P=n.getCanvas("mesh",x,_),M=P.context,I=M.createImageData(m,v);if(t){const T=I.data;for(let N=0,G=T.length;N<G;N+=4)T[N]=t[0],T[N+1]=t[1],T[N+2]=t[2],T[N+3]=255}for(const T of this._figures)aI(I,T,A);return M.putImageData(I,2,2),{canvas:P.canvas,offsetX:h-2*b,offsetY:d-2*S,scaleX:b,scaleY:S}}getPattern(e,t,n,i){Iw(e,this._bbox);let o;if(i===On.SHADING)o=Ee.singularValueDecompose2dScale(Tt(e));else if(o=Ee.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=Ee.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const l=this._createMeshCanvas(o,i===On.SHADING?null:this._background,t.cachedCanvases);return i!==On.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class lI extends tb{getPattern(){return"hotpink"}}function uI(a){switch(a[0]){case"RadialAxial":return new sI(a);case"Mesh":return new oI(a);case"Dummy":return new lI}throw new Error(`Unknown IR type: ${a[0]}`)}const OE={COLORED:1,UNCOLORED:2},sy=class sy{constructor(e,t,n,i,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:o,color:l,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),Iy("TilingType: "+o);const g=t[0],m=t[1],v=t[2],b=t[3],S=v-g,A=b-m,x=Ee.singularValueDecompose2dScale(this.matrix),_=Ee.singularValueDecompose2dScale(this.baseTransform),P=x[0]*_[0],M=x[1]*_[1];let I=S,L=A,T=!1,N=!1;const G=Math.ceil(d*P),q=Math.ceil(p*M),ae=Math.ceil(S*P),oe=Math.ceil(A*M);G>=ae?I=d:T=!0,q>=oe?L=p:N=!0;const $e=this.getSizeAndScale(I,this.ctx.canvas.width,P),Ue=this.getSizeAndScale(L,this.ctx.canvas.height,M),Ie=e.cachedCanvases.getCanvas("pattern",$e.size,Ue.size),nt=Ie.context,J=h.createCanvasGraphics(nt);if(J.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(J,i,l),nt.translate(-$e.scale*g,-Ue.scale*m),J.transform($e.scale,0,0,Ue.scale,0,0),nt.save(),this.clipBbox(J,g,m,v,b),J.baseTransform=Tt(J.ctx),J.executeOperatorList(n),J.endDrawing(),nt.restore(),T||N){const ie=Ie.canvas;T&&(I=d),N&&(L=p);const ee=this.getSizeAndScale(I,this.ctx.canvas.width,P),fe=this.getSizeAndScale(L,this.ctx.canvas.height,M),re=ee.size,$=fe.size,X=e.cachedCanvases.getCanvas("pattern-workaround",re,$),ce=X.context,ke=T?Math.floor(S/d):0,Oe=N?Math.floor(A/p):0;for(let _e=0;_e<=ke;_e++)for(let Ce=0;Ce<=Oe;Ce++)ce.drawImage(ie,re*_e,$*Ce,re,$,0,0,re,$);return{canvas:X.canvas,scaleX:ee.scale,scaleY:fe.scale,offsetX:g,offsetY:m}}return{canvas:Ie.canvas,scaleX:$e.scale,scaleY:Ue.scale,offsetX:g,offsetY:m}}getSizeAndScale(e,t,n){const i=Math.max(sy.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=i?o=i:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,i,o){const l=i-t,h=o-n;e.ctx.rect(t,n,l,h),e.current.updateRectMinMax(Tt(e.ctx),[t,n,i,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,o=e.current;switch(t){case OE.COLORED:const l=this.ctx;i.fillStyle=l.fillStyle,i.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case OE.UNCOLORED:const h=Ee.makeHexColor(n[0],n[1],n[2]);i.fillStyle=h,i.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new NM(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,i){let o=n;i!==On.SHADING&&(o=Ee.transform(o,t.baseTransform),this.matrix&&(o=Ee.transform(o,this.matrix)));const l=this.createPatternCanvas(t);let h=new DOMMatrix(o);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(h),d}};Le(sy,"MAX_PATTERN_SIZE",3e3);let Dw=sy;function cI({src:a,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=Xn.isLittleEndian?4278190080:255,[d,p]=l?[o,h]:[h,o],g=n>>3,m=n&7,v=a.length;t=new Uint32Array(t.buffer);let b=0;for(let S=0;S<i;S++){for(const x=e+g;e<x;e++){const _=e<v?a[e]:255;t[b++]=_&128?p:d,t[b++]=_&64?p:d,t[b++]=_&32?p:d,t[b++]=_&16?p:d,t[b++]=_&8?p:d,t[b++]=_&4?p:d,t[b++]=_&2?p:d,t[b++]=_&1?p:d}if(m===0)continue;const A=e<v?a[e++]:255;for(let x=0;x<m;x++)t[b++]=A&1<<7-x?p:d}return{srcPos:e,destPos:b}}const zE=16,$E=100,hI=15,HE=10,BE=1e3,ur=16;function dI(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},a.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},a.transform=function(n,i,o,l,h,d){e.transform(n,i,o,l,h,d),this.__originalTransform(n,i,o,l,h,d)},a.setTransform=function(n,i,o,l,h,d){e.setTransform(n,i,o,l,h,d),this.__originalSetTransform(n,i,o,l,h,d)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(n){e.rotate(n),this.__originalRotate(n)},a.clip=function(n){e.clip(n),this.__originalClip(n)},a.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},a.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},a.bezierCurveTo=function(t,n,i,o,l,h){e.bezierCurveTo(t,n,i,o,l,h),this.__originalBezierCurveTo(t,n,i,o,l,h)},a.rect=function(t,n,i,o){e.rect(t,n,i,o),this.__originalRect(t,n,i,o)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class fI{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ug(a,e,t,n,i,o,l,h,d,p){const[g,m,v,b,S,A]=Tt(a);if(m===0&&v===0){const P=l*g+S,M=Math.round(P),I=h*b+A,L=Math.round(I),T=(l+d)*g+S,N=Math.abs(Math.round(T)-M)||1,G=(h+p)*b+A,q=Math.abs(Math.round(G)-L)||1;return a.setTransform(Math.sign(g),0,0,Math.sign(b),M,L),a.drawImage(e,t,n,i,o,0,0,N,q),a.setTransform(g,m,v,b,S,A),[N,q]}if(g===0&&b===0){const P=h*v+S,M=Math.round(P),I=l*m+A,L=Math.round(I),T=(h+p)*v+S,N=Math.abs(Math.round(T)-M)||1,G=(l+d)*m+A,q=Math.abs(Math.round(G)-L)||1;return a.setTransform(0,Math.sign(m),Math.sign(v),0,M,L),a.drawImage(e,t,n,i,o,0,0,q,N),a.setTransform(g,m,v,b,S,A),[q,N]}a.drawImage(e,t,n,i,o,l,h,d,p);const x=Math.hypot(g,m),_=Math.hypot(v,b);return[x*d,_*p]}function pI(a){const{width:e,height:t}=a;if(e>BE||t>BE)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let l=new Uint8Array(o*(t+1)),h,d,p;const g=e+7&-8;let m=new Uint8Array(g*t),v=0;for(const _ of a.data){let P=128;for(;P>0;)m[v++]=_&P?0:255,P>>=1}let b=0;for(v=0,m[v]!==0&&(l[0]=1,++b),d=1;d<e;d++)m[v]!==m[v+1]&&(l[d]=m[v]?2:1,++b),v++;for(m[v]!==0&&(l[d]=2,++b),h=1;h<t;h++){v=h*g,p=h*o,m[v-g]!==m[v]&&(l[p]=m[v]?1:8,++b);let _=(m[v]?4:0)+(m[v-g]?8:0);for(d=1;d<e;d++)_=(_>>2)+(m[v+1]?4:0)+(m[v-g+1]?8:0),i[_]&&(l[p+d]=i[_],++b),v++;if(m[v-g]!==m[v]&&(l[p+d]=m[v]?2:4,++b),b>n)return null}for(v=g*(t-1),p=h*o,m[v]!==0&&(l[p]=8,++b),d=1;d<e;d++)m[v]!==m[v+1]&&(l[p+d]=m[v]?4:8,++b),v++;if(m[v]!==0&&(l[p+d]=4,++b),b>n)return null;const S=new Int32Array([0,o,-1,0,-o,0,0,0,1]),A=new Path2D;for(h=0;b&&h<=t;h++){let _=h*o;const P=_+e;for(;_<P&&!l[_];)_++;if(_===P)continue;A.moveTo(_%o,h);const M=_;let I=l[_];do{const L=S[I];do _+=L;while(!l[_]);const T=l[_];T!==5&&T!==10?(I=T,l[_]=0):(I=T&51*I>>4,l[_]&=I>>2|I<<2),A.lineTo(_%o,_/o|0),l[_]||--b}while(M!==_);--h}return m=null,l=null,function(_){_.save(),_.scale(1/e,-1/t),_.translate(0,-t),_.fill(A),_.beginPath(),_.restore()}}class jE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e_,this.textMatrixScale=1,this.fontMatrix=lw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Pn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Ee.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Ee.applyTransform(t,e),i=Ee.applyTransform(t.slice(2),e),o=Ee.applyTransform([t[0],t[3]],e),l=Ee.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],i[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],i[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],i[1],o[1],l[1])}updateScalingPathMinMax(e,t){Ee.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,o,l,h,d,p,g){const m=Ee.bezierBoundingBox(t,n,i,o,l,h,d,p,g);g||this.updateRectMinMax(e,m)}getPathBoundingBox(e=On.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===On.STROKE){t||yt("Stroke bounding box must include transform.");const i=Ee.singularValueDecompose2dScale(t),o=i[0]*this.lineWidth/2,l=i[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const e=Ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=On.FILL,t=null){return Ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function UE(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%ur,o=(t-i)/ur,l=i===0?o:o+1,h=a.createImageData(n,ur);let d=0,p;const g=e.data,m=h.data;let v,b,S,A;if(e.kind===rm.GRAYSCALE_1BPP){const x=g.byteLength,_=new Uint32Array(m.buffer,0,m.byteLength>>2),P=_.length,M=n+7>>3,I=4294967295,L=Xn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(S=v<o?ur:i,p=0,b=0;b<S;b++){const T=x-d;let N=0;const G=T>M?n:T*8-7,q=G&-8;let ae=0,oe=0;for(;N<q;N+=8)oe=g[d++],_[p++]=oe&128?I:L,_[p++]=oe&64?I:L,_[p++]=oe&32?I:L,_[p++]=oe&16?I:L,_[p++]=oe&8?I:L,_[p++]=oe&4?I:L,_[p++]=oe&2?I:L,_[p++]=oe&1?I:L;for(;N<G;N++)ae===0&&(oe=g[d++],ae=128),_[p++]=oe&ae?I:L,ae>>=1}for(;p<P;)_[p++]=0;a.putImageData(h,0,v*ur)}}else if(e.kind===rm.RGBA_32BPP){for(b=0,A=n*ur*4,v=0;v<o;v++)m.set(g.subarray(d,d+A)),d+=A,a.putImageData(h,0,b),b+=ur;v<l&&(A=n*i*4,m.set(g.subarray(d,d+A)),a.putImageData(h,0,b))}else if(e.kind===rm.RGB_24BPP)for(S=ur,A=n*S,v=0;v<l;v++){for(v>=o&&(S=i,A=n*S),p=0,b=A;b--;)m[p++]=g[d++],m[p++]=g[d++],m[p++]=g[d++],m[p++]=255;a.putImageData(h,0,v*ur)}else throw new Error(`bad image kind: ${e.kind}`)}function VE(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%ur,o=(t-i)/ur,l=i===0?o:o+1,h=a.createImageData(n,ur);let d=0;const p=e.data,g=h.data;for(let m=0;m<l;m++){const v=m<o?ur:i;({srcPos:d}=cI({src:p,srcPos:d,dest:g,width:n,height:v,nonBlackColor:0})),a.putImageData(h,0,m*ur)}}function id(a,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)a[n]!==void 0&&(e[n]=a[n]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function Vg(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0),!zn){const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}}function WE(a,e){if(e)return!0;const t=Ee.singularValueDecompose2dScale(a);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*po.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const gI=["butt","round","square"],mI=["miter","round","bevel"],yI={},GE={};var Mi,Nw,Fw,Ow;const ab=class ab{constructor(e,t,n,i,o,{optionalContentConfig:l,markedContentStack:h=null},d,p){k(this,Mi);this.ctx=e,this.current=new jE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new fI(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Tt(this.compositeCtx))}this.ctx.save(),Vg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Tt(this.ctx)}executeOperatorList(e,t,n,i){const o=e.argsArray,l=e.fnArray;let h=t||0;const d=o.length;if(d===h)return h;const p=d-h>HE&&typeof n=="function",g=p?Date.now()+hI:0;let m=0;const v=this.commonObjs,b=this.objs;let S;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,n),h;if(S=l[h],S!==pi.dependency)this[S].apply(this,o[h]);else for(const A of o[h]){const x=A.startsWith("g_")?v:b;if(!x.has(A))return x.get(A,n),h}if(h++,h===d)return h;if(p&&++m>HE){if(Date.now()>g)return n(),h;m=0}}}endDrawing(){R(this,Mi,Nw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),R(this,Mi,Fw).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),h=n,d=i,p="prescale1",g,m;for(;o>2&&h>1||l>2&&d>1;){let v=h,b=d;o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/v),l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/b),g=this.cachedCanvases.getCanvas(p,v,b),m=g.context,m.clearRect(0,0,v,b),m.drawImage(e,0,0,h,d,0,0,v,b),e=g.canvas,h=v,d=b,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,o=this.current.fillColor,l=this.current.patternFill,h=Tt(t);let d,p,g,m;if((e.bitmap||e.data)&&e.count>1){const G=e.bitmap||e.data.buffer;p=JSON.stringify(l?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(G),d||(d=new Map,this._cachedBitmapsMap.set(G,d));const q=d.get(p);if(q&&!l){const ae=Math.round(Math.min(h[0],h[2])+h[4]),oe=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:q,offsetX:ae,offsetY:oe}}g=q}g||(m=this.cachedCanvases.getCanvas("maskCanvas",n,i),VE(m.context,e));let v=Ee.transform(h,[1/n,0,0,-1/i,0,0]);v=Ee.transform(v,[1,0,0,1,0,-i]);const[b,S,A,x]=Ee.getAxialAlignedBoundingBox([0,0,n,i],v),_=Math.round(A-b)||1,P=Math.round(x-S)||1,M=this.cachedCanvases.getCanvas("fillCanvas",_,P),I=M.context,L=b,T=S;I.translate(-L,-T),I.transform(...v),g||(g=this._scaleImage(m.canvas,Oi(I)),g=g.img,d&&l&&d.set(p,g)),I.imageSmoothingEnabled=WE(Tt(I),e.interpolate),Ug(I,g,0,0,g.width,g.height,0,0,n,i),I.globalCompositeOperation="source-in";const N=Ee.transform(Oi(I),[1,0,0,1,-L,-T]);return I.fillStyle=l?o.getPattern(t,this,N,On.FILL):o,I.fillRect(0,0,n,i),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,M.canvas)),{canvas:M.canvas,offsetX:Math.round(L),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=gI[e]}setLineJoin(e){this.ctx.lineJoin=mI[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const o=this.ctx;o.setTransform(...Tt(this.suspendedCtx)),id(this.suspendedCtx,o),dI(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),id(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const o=i[0],l=i[1],h=i[2]-o,d=i[3]-l;h===0||d===0||(this.genericComposeSMask(t.context,n,h,d,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,o,l,h,d,p,g,m){let v=e.canvas,b=d-g,S=p-m;if(l){const x=Ee.makeHexColor(...l);if(b<0||S<0||b+n>v.width||S+i>v.height){const _=this.cachedCanvases.getCanvas("maskExtension",n,i),P=_.context;P.drawImage(v,-b,-S),P.globalCompositeOperation="destination-atop",P.fillStyle=x,P.fillRect(0,0,n,i),P.globalCompositeOperation="source-over",v=_.canvas,b=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(b,S,n,i),e.clip(_),e.globalCompositeOperation="destination-atop",e.fillStyle=x,e.fillRect(b,S,n,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?t.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(h));const A=new Path2D;A.rect(d,p,n,i),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(v,b,S,n,i,d,p,n,i),t.restore()}save(){this.inSMaskMode?(id(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),id(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,o,l){this.ctx.transform(e,t,n,i,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,o=this.current;let l=o.x,h=o.y,d,p;const g=Tt(i),m=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,v=m?n.slice(0):null;for(let b=0,S=0,A=e.length;b<A;b++)switch(e[b]|0){case pi.rectangle:l=t[S++],h=t[S++];const x=t[S++],_=t[S++],P=l+x,M=h+_;i.moveTo(l,h),x===0||_===0?i.lineTo(P,M):(i.lineTo(P,h),i.lineTo(P,M),i.lineTo(l,M)),m||o.updateRectMinMax(g,[l,h,P,M]),i.closePath();break;case pi.moveTo:l=t[S++],h=t[S++],i.moveTo(l,h),m||o.updatePathMinMax(g,l,h);break;case pi.lineTo:l=t[S++],h=t[S++],i.lineTo(l,h),m||o.updatePathMinMax(g,l,h);break;case pi.curveTo:d=l,p=h,l=t[S+4],h=t[S+5],i.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],l,h),o.updateCurvePathMinMax(g,d,p,t[S],t[S+1],t[S+2],t[S+3],l,h,v),S+=6;break;case pi.curveTo2:d=l,p=h,i.bezierCurveTo(l,h,t[S],t[S+1],t[S+2],t[S+3]),o.updateCurvePathMinMax(g,d,p,l,h,t[S],t[S+1],t[S+2],t[S+3],v),l=t[S+2],h=t[S+3],S+=4;break;case pi.curveTo3:d=l,p=h,l=t[S+2],h=t[S+3],i.bezierCurveTo(t[S],t[S+1],l,h,l,h),o.updateCurvePathMinMax(g,d,p,t[S],t[S+1],l,h,l,h,v),S+=4;break;case pi.closePath:i.closePath();break}m&&o.updateScalingPathMinMax(g,v),o.setCurrentPoint(l,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Oi(t),On.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let o=!1;i&&(t.save(),t.fillStyle=n.getPattern(t,this,Oi(t),On.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=yI}eoClip(){this.pendingClip=GE}beginText(){this.current.textMatrix=e_,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,i=t.getTransform().invertSelf();for(const{transform:o,x:l,y:h,fontSize:d,path:p}of e)n.addPath(p,new DOMMatrix(o).preMultiplySelf(i).translate(l,h).scale(d,-d));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||lw,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Be("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let h="normal";n.black?h="900":n.bold&&(h="bold");const d=n.italic?"italic":"normal";let p=t;t<zE?p=zE:t>$E&&(p=$E),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${h} ${p}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,o,l){this.current.textMatrix=[e,t,n,i,o,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i,o){const l=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,m=p&Pn.FILL_STROKE_MASK,v=!!(p&Pn.ADD_TO_PATH_FLAG),b=h.patternFill&&!d.missingFile,S=h.patternStroke&&!d.missingFile;let A;if((d.disableFontFace||v||b||S)&&(A=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||b||S){if(l.save(),l.translate(t,n),l.scale(g,-g),m===Pn.FILL||m===Pn.FILL_STROKE)if(i){const x=l.getTransform();l.setTransform(...i),l.fill(R(this,Mi,Ow).call(this,A,x,i))}else l.fill(A);if(m===Pn.STROKE||m===Pn.FILL_STROKE)if(o){const x=l.getTransform();l.setTransform(...o),l.stroke(R(this,Mi,Ow).call(this,A,x,o))}else l.lineWidth/=g,l.stroke(A);l.restore()}else(m===Pn.FILL||m===Pn.FILL_STROKE)&&l.fillText(e,t,n),(m===Pn.STROKE||m===Pn.FILL_STROKE)&&l.strokeText(e,t,n);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Tt(l),x:t,y:n,fontSize:g,path:A})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Ye(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const o=this.ctx,l=t.fontSizeScale,h=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,m=e.length,v=n.vertical,b=v?1:-1,S=n.defaultVMetrics,A=i*t.fontMatrix[0],x=t.textRenderingMode===Pn.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),p>0?o.scale(g,-1):o.scale(g,1);let _,P;if(t.patternFill){o.save();const N=t.fillColor.getPattern(o,this,Oi(o),On.FILL);_=Tt(o),o.restore(),o.fillStyle=N}if(t.patternStroke){o.save();const N=t.strokeColor.getPattern(o,this,Oi(o),On.STROKE);P=Tt(o),o.restore(),o.strokeStyle=N}let M=t.lineWidth;const I=t.textMatrixScale;if(I===0||M===0){const N=t.textRenderingMode&Pn.FILL_STROKE_MASK;(N===Pn.STROKE||N===Pn.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=I;if(l!==1&&(o.scale(l,l),M/=l),o.lineWidth=M,n.isInvalidPDFjsFont){const N=[];let G=0;for(const q of e)N.push(q.unicode),G+=q.width;o.fillText(N.join(""),0,0),t.x+=G*A*g,o.restore(),this.compose();return}let L=0,T;for(T=0;T<m;++T){const N=e[T];if(typeof N=="number"){L+=b*N*i/1e3;continue}let G=!1;const q=(N.isSpace?d:0)+h,ae=N.fontChar,oe=N.accent;let $e,Ue,Ie=N.width;if(v){const J=N.vmetric||S,ie=-(N.vmetric?J[1]:Ie*.5)*A,ee=J[2]*A;Ie=J?-J[0]:Ie,$e=ie/l,Ue=(L+ee)/l}else $e=L/l,Ue=0;if(n.remeasure&&Ie>0){const J=o.measureText(ae).width*1e3/i*l;if(Ie<J&&this.isFontSubpixelAAEnabled){const ie=Ie/J;G=!0,o.save(),o.scale(ie,1),$e/=ie}else Ie!==J&&($e+=(Ie-J)/2e3*i/l)}if(this.contentVisible&&(N.isInFont||n.missingFile)){if(x&&!oe)o.fillText(ae,$e,Ue);else if(this.paintChar(ae,$e,Ue,_,P),oe){const J=$e+i*oe.offset.x/l,ie=Ue-i*oe.offset.y/l;this.paintChar(oe.fontChar,J,ie,_,P)}}const nt=v?Ie*A-q*p:Ie*A+q*p;L+=nt,G&&o.restore()}v?t.y-=L:t.x+=L*g,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,o=n.fontSize,l=n.fontDirection,h=i.vertical?1:-1,d=n.charSpacing,p=n.wordSpacing,g=n.textHScale*l,m=n.fontMatrix||lw,v=e.length,b=n.textRenderingMode===Pn.INVISIBLE;let S,A,x,_;if(!(b||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(g,l),S=0;S<v;++S){if(A=e[S],typeof A=="number"){_=h*A*o/1e3,this.ctx.translate(_,0),n.x+=_*g;continue}const P=(A.isSpace?p:0)+d,M=i.charProcOperatorList[A.operatorListId];if(!M){Be(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),t.scale(o,o),t.transform(...m),this.executeOperatorList(M),this.restore()),x=Ee.applyTransform([A.width,0],m)[0]*o+P,t.translate(x,0),n.x+=x*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,o,l){this.ctx.rect(n,i,o-n,l-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],i=this.baseTransform||Tt(this.ctx),o={createCanvasGraphics:l=>new ab(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Dw(e,n,this.ctx,o,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=Ee.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=Ee.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=uI(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Oi(t),On.SHADING);const i=Oi(t);if(i){const{width:o,height:l}=t.canvas,[h,d,p,g]=Ee.getAxialAlignedBoundingBox([0,0,o,l],i);this.ctx.fillRect(h,d,p-h,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){yt("Should not call beginInlineImage")}beginImageData(){yt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Tt(this.ctx),t)){const n=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],n,i),this.current.updateRectMinMax(Tt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Iy("TODO: Support non-isolated groups."),e.knockout&&Be("Knockout groups not supported.");const n=Tt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Ee.getAxialAlignedBoundingBox(e.bbox,Tt(t));const o=[0,0,t.canvas.width,t.canvas.height];i=Ee.intersect(i,o)||[0,0,0,0];const l=Math.floor(i[0]),h=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-l,1),p=Math.max(Math.ceil(i[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(g,d,p),v=m.context;v.translate(-l,-h),v.transform(...n),e.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:l,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,h),t.save()),id(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Tt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const o=Ee.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,i,o){if(R(this,Mi,Nw).call(this),Vg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],h=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=h;const[d,p]=Ee.singularValueDecompose2dScale(Tt(this.ctx)),{viewportScale:g}=this,m=Math.ceil(l*this.outputScaleX*g),v=Math.ceil(h*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:b,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,h*p),Vg(this.ctx)}else Vg(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,h),this.ctx.clip(),this.ctx.beginPath()}this.current=new jE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),R(this,Mi,Fw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=pI(e)),i.compiled)){i.compiled(n);return}const o=this._createMaskCanvas(e),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,i=0,o,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const d=Tt(h);h.transform(t,n,i,o,0,0);const p=this._createMaskCanvas(e);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,m=l.length;g<m;g+=2){const v=Ee.transform(d,[t,n,i,o,l[g],l[g+1]]),[b,S]=Ee.applyTransform([0,0],v);h.drawImage(p.canvas,b,S)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const o of e){const{data:l,width:h,height:d,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",h,d),m=g.context;m.save();const v=this.getObject(l,o);VE(m,v),m.globalCompositeOperation="source-in",m.fillStyle=i?n.getPattern(m,this,Oi(t),On.FILL):n,m.fillRect(0,0,h,d),m.restore(),t.save(),t.transform(...p),t.scale(1,-1),Ug(t,g.canvas,0,0,h,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Be("Dependent image isn't ready yet");return}const l=o.width,h=o.height,d=[];for(let p=0,g=i.length;p<g;p+=2)d.push({transform:[t,0,0,n,i[p],i[p+1]],x:0,y:0,w:l,h});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,i),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!zn){const{filter:h}=i;h!=="none"&&h!==""&&(i.filter="none")}i.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;UE(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,Oi(i));i.imageSmoothingEnabled=WE(Tt(i),e.interpolate),Ug(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const o=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;UE(d,e),i=this.applyTransferMapsToCanvas(d)}for(const o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),Ug(n,i,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===GE?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Tt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:o}=this.ctx.getTransform();let l,h;if(n===0&&i===0){const d=Math.abs(t),p=Math.abs(o);if(d===p)if(e===0)l=h=1/d;else{const g=d*e;l=h=g<1?1/g:1}else if(e===0)l=1/d,h=1/p;else{const g=d*e,m=p*e;l=g<1?1/g:1,h=m<1?1/m:1}}else{const d=Math.abs(t*o-n*i),p=Math.hypot(t,n),g=Math.hypot(i,o);if(e===0)l=g/d,h=p/d;else{const m=e*d;l=g>m?g/m:1,h=p>m?p/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,o]=this.getScaleForStroking();if(t.lineWidth=n||1,i===1&&o===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(i,o),l.length>0){const h=Math.max(i,o);t.setLineDash(l.map(d=>d/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Mi=new WeakSet,Nw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Fw=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Ow=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Qu=ab;for(const a in pi)Qu.prototype[a]!==void 0&&(Qu.prototype[pi[a]]=Qu.prototype[a]);var gf,mf;class Qs{static get workerPort(){return u(this,gf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,gf,e)}static get workerSrc(){return u(this,mf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,mf,e)}}gf=new WeakMap,mf=new WeakMap,k(Qs,gf,null),k(Qs,mf,"");var pl,yf;class vI{constructor({parsedData:e,rawData:t}){k(this,pl);k(this,yf);E(this,pl,e),E(this,yf,t)}getRaw(){return u(this,yf)}get(e){return u(this,pl).get(e)??null}getAll(){return q1(u(this,pl))}has(e){return u(this,pl).has(e)}}pl=new WeakMap,yf=new WeakMap;const Hu=Symbol("INTERNAL");var vf,wf,bf,yc;class wI{constructor(e,{name:t,intent:n,usage:i,rbGroups:o}){k(this,vf,!1);k(this,wf,!1);k(this,bf,!1);k(this,yc,!0);E(this,vf,!!(e&Pr.DISPLAY)),E(this,wf,!!(e&Pr.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(u(this,bf))return u(this,yc);if(!u(this,yc))return!1;const{print:e,view:t}=this.usage;return u(this,vf)?(t==null?void 0:t.viewState)!=="OFF":u(this,wf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Hu&&yt("Internal method `_setVisible` called."),E(this,bf,n),E(this,yc,t)}}vf=new WeakMap,wf=new WeakMap,bf=new WeakMap,yc=new WeakMap;var Wa,ft,vc,wc,Sf,zw;class bI{constructor(e,t=Pr.DISPLAY){k(this,Sf);k(this,Wa,null);k(this,ft,new Map);k(this,vc,null);k(this,wc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,wc,e.order);for(const n of e.groups)u(this,ft).set(n.id,new wI(t,n));if(e.baseState==="OFF")for(const n of u(this,ft).values())n._setVisible(Hu,!1);for(const n of e.on)u(this,ft).get(n)._setVisible(Hu,!0);for(const n of e.off)u(this,ft).get(n)._setVisible(Hu,!1);E(this,vc,this.getHash())}}isVisible(e){if(u(this,ft).size===0)return!0;if(!e)return Iy("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,ft).has(e.id)?u(this,ft).get(e.id).visible:(Be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return R(this,Sf,zw).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,ft).has(t))return Be(`Optional content group not found: ${t}`),!0;if(u(this,ft).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,ft).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!u(this,ft).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,ft).has(t))return Be(`Optional content group not found: ${t}`),!0;if(!u(this,ft).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,ft).has(t))return Be(`Optional content group not found: ${t}`),!0;if(u(this,ft).get(t).visible)return!1}return!0}return Be(`Unknown optional content policy ${e.policy}.`),!0}return Be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var o;const i=u(this,ft).get(e);if(!i){Be(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const l of i.rbGroups)for(const h of l)h!==e&&((o=u(this,ft).get(h))==null||o._setVisible(Hu,!1,!0));i._setVisible(Hu,!!t,!0),E(this,Wa,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const o=u(this,ft).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}E(this,Wa,null)}get hasInitialVisibility(){return u(this,vc)===null||this.getHash()===u(this,vc)}getOrder(){return u(this,ft).size?u(this,wc)?u(this,wc).slice():[...u(this,ft).keys()]:null}getGroups(){return u(this,ft).size>0?q1(u(this,ft)):null}getGroup(e){return u(this,ft).get(e)||null}getHash(){if(u(this,Wa)!==null)return u(this,Wa);const e=new L_;for(const[t,n]of u(this,ft))e.update(`${t}:${n.visible}`);return E(this,Wa,e.hexdigest())}}Wa=new WeakMap,ft=new WeakMap,vc=new WeakMap,wc=new WeakMap,Sf=new WeakSet,zw=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const o=e[i];let l;if(Array.isArray(o))l=R(this,Sf,zw).call(this,o);else if(u(this,ft).has(o))l=u(this,ft).get(o).visible;else return Be(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class SI{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Yt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:l,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Yt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,o;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(o=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||o.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Yt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new AI(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new EI(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class AI{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Q1(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class EI{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xI(a){let e=!0,t=n("filename\\*","i").exec(a);if(t){t=t[1];let g=h(t);return g=unescape(g),g=d(g),g=p(g),o(g)}if(t=l(a),t){const g=p(t);return o(g)}if(t=n("filename","i").exec(a),t){t=t[1];let g=h(t);return g=p(g),o(g)}function n(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(g,{fatal:!0}),b=Dy(m);m=v.decode(b),e=!1}catch{}}return m}function o(g){return e&&/[\x80-\xff]/.test(g)&&(g=i("utf-8",g),e&&(g=i("iso-8859-1",g))),g}function l(g){const m=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(g))!==null;){let[,A,x,_]=v;if(A=parseInt(A,10),A in m){if(A===0)break;continue}m[A]=[x,_]}const S=[];for(let A=0;A<m.length&&A in m;++A){let[x,_]=m[A];_=h(_),x&&(_=unescape(_),A===0&&(_=d(_))),S.push(_)}return S.join("")}function h(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let v=0;v<m.length;++v){const b=m[v].indexOf('"');b!==-1&&(m[v]=m[v].slice(0,b),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function d(g){const m=g.indexOf("'");if(m===-1)return g;const v=g.slice(0,m),S=g.slice(m+1).replace(/^[^']*'/,"");return i(v,S)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,b,S){if(b==="q"||b==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,x){return String.fromCharCode(parseInt(x,16))}),i(v,S);try{S=atob(S)}catch{}return i(v,S)})}return""}function W_(a,e){const t=new Headers;if(!a||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function Oy(a){try{return new URL(a).origin}catch{}return null}function G_({responseHeaders:a,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||n||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function X_(a){const e=a.get("Content-Disposition");if(e){let t=xI(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Q1(t))return t}return null}function zy(a,e){return a===404||a===0&&e.startsWith("file:")?new Od('Missing PDF "'+e+'".'):new Um(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a)}function q_(a){return a===200||a===206}function Y_(a,e,t){return{method:"GET",headers:a,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function K_(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Be(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class XE{constructor(e){Le(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=W_(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Yt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _I(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new CI(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class _I{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,Y_(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Oy(o.url),!q_(o.status))throw zy(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=G_({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=X_(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:K_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class CI{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=i.url;fetch(l,Y_(o,this._withCredentials,this._abortController)).then(h=>{const d=Oy(h.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!q_(h.status))throw zy(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:K_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const U0=200,V0=206;function kI(a){const e=a.response;return typeof e!="string"?e:Dy(e).buffer}class RI{constructor({url:e,httpHeaders:t,withCredentials:n}){Le(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=W_(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=V0):i.expectedStatus=U0,t.responseType="arraybuffer",Yt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const o=i.status||U0;if(!(o===U0&&n.expectedStatus===V0)&&o!==n.expectedStatus){n.onError(i.status);return}const h=kI(i);if(o===V0){const d=i.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?n.onDone({begin:parseInt(p[1],10),chunk:h}):(Be('Missing or invalid "Content-Range" header.'),n.onError(0))}else h?n.onDone({begin:0,chunk:h}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class TI{constructor(e){this._source=e,this._manager=new RI(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Yt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PI(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new LI(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class PI{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Oy(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...p]=h.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=G_({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=X_(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=zy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class LI{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Oy((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=zy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const MI=/^[a-z][a-z0-9\-+.]+:/i;function II(a){if(MI.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}class DI{constructor(e){this.source=e,this.url=II(e.url),Yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Yt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new NI(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new FI(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class NI{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Od(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class FI{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const OI=1e5,rr=30,zI=.8;var ax,Ga,or,Af,Ef,gl,Ns,xf,_f,ml,bc,Sc,Xa,Ac,Cf,Ec,yl,kf,Rf,vl,wl,Tf,qa,xc,na,Q_,J_,$w,Nr,pm,Hw,Z_,eC;const en=class en{constructor({textContentSource:e,container:t,viewport:n}){k(this,na);k(this,Ga,Promise.withResolvers());k(this,or,null);k(this,Af,!1);k(this,Ef,!!((ax=globalThis.FontInspector)!=null&&ax.enabled));k(this,gl,null);k(this,Ns,null);k(this,xf,0);k(this,_f,0);k(this,ml,null);k(this,bc,null);k(this,Sc,0);k(this,Xa,0);k(this,Ac,Object.create(null));k(this,Cf,[]);k(this,Ec,null);k(this,yl,[]);k(this,kf,new WeakMap);k(this,Rf,null);var d;if(e instanceof ReadableStream)E(this,Ec,e);else if(typeof e=="object")E(this,Ec,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,or,E(this,bc,t)),E(this,Xa,n.scale*(globalThis.devicePixelRatio||1)),E(this,Sc,n.rotation),E(this,Ns,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:o,pageX:l,pageY:h}=n.rawDims;E(this,Rf,[1,0,0,-1,-l,h+o]),E(this,_f,i),E(this,xf,o),R(d=en,Nr,Z_).call(d),Ql(t,n),u(this,Ga).promise.finally(()=>{u(en,xc).delete(this),E(this,Ns,null),E(this,Ac,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Xn.platform;return Ye(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,ml).read().then(({value:t,done:n})=>{if(n){u(this,Ga).resolve();return}u(this,gl)??E(this,gl,t.lang),Object.assign(u(this,Ac),t.styles),R(this,na,Q_).call(this,t.items),e()},u(this,Ga).reject)};return E(this,ml,u(this,Ec).getReader()),u(en,xc).add(this),e(),u(this,Ga).promise}update({viewport:e,onBefore:t=null}){var o;const n=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==u(this,Sc)&&(t==null||t(),E(this,Sc,i),Ql(u(this,bc),{rotation:i})),n!==u(this,Xa)){t==null||t(),E(this,Xa,n);const l={div:null,properties:null,ctx:R(o=en,Nr,pm).call(o,u(this,gl))};for(const h of u(this,yl))l.properties=u(this,kf).get(h),l.div=h,R(this,na,$w).call(this,l)}}cancel(){var t;const e=new fo("TextLayer task cancelled.");(t=u(this,ml))==null||t.cancel(e).catch(()=>{}),E(this,ml,null),u(this,Ga).reject(e)}get textDivs(){return u(this,yl)}get textContentItemsStr(){return u(this,Cf)}static cleanup(){if(!(u(this,xc).size>0)){u(this,vl).clear();for(const{canvas:e}of u(this,wl).values())e.remove();u(this,wl).clear()}}};Ga=new WeakMap,or=new WeakMap,Af=new WeakMap,Ef=new WeakMap,gl=new WeakMap,Ns=new WeakMap,xf=new WeakMap,_f=new WeakMap,ml=new WeakMap,bc=new WeakMap,Sc=new WeakMap,Xa=new WeakMap,Ac=new WeakMap,Cf=new WeakMap,Ec=new WeakMap,yl=new WeakMap,kf=new WeakMap,Rf=new WeakMap,vl=new WeakMap,wl=new WeakMap,Tf=new WeakMap,qa=new WeakMap,xc=new WeakMap,na=new WeakSet,Q_=function(e){var i,o;if(u(this,Af))return;(o=u(this,Ns)).ctx??(o.ctx=R(i=en,Nr,pm).call(i,u(this,gl)));const t=u(this,yl),n=u(this,Cf);for(const l of e){if(t.length>OI){Be("Ignoring additional textDivs for performance reasons."),E(this,Af,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const h=u(this,or);E(this,or,document.createElement("span")),u(this,or).classList.add("markedContent"),l.id!==null&&u(this,or).setAttribute("id",`${l.id}`),h.append(u(this,or))}else l.type==="endMarkedContent"&&E(this,or,u(this,or).parentNode);continue}n.push(l.str),R(this,na,J_).call(this,l)}},J_=function(e){var A;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,yl).push(t);const i=Ee.transform(u(this,Rf),e.transform);let o=Math.atan2(i[1],i[0]);const l=u(this,Ac)[e.fontName];l.vertical&&(o+=Math.PI/2);let h=u(this,Ef)&&l.fontSubstitution||l.fontFamily;h=en.fontFamilyMap.get(h)||h;const d=Math.hypot(i[2],i[3]),p=d*R(A=en,Nr,eC).call(A,h,u(this,gl));let g,m;o===0?(g=i[4],m=i[5]-p):(g=i[4]+p*Math.sin(o),m=i[5]-p*Math.cos(o));const v="calc(var(--scale-factor)*",b=t.style;u(this,or)===u(this,bc)?(b.left=`${(100*g/u(this,_f)).toFixed(2)}%`,b.top=`${(100*m/u(this,xf)).toFixed(2)}%`):(b.left=`${v}${g.toFixed(2)}px)`,b.top=`${v}${m.toFixed(2)}px)`),b.fontSize=`${v}${(u(en,qa)*d).toFixed(2)}px)`,b.fontFamily=h,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Ef)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);x!==_&&Math.max(x,_)/Math.min(x,_)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?e.height:e.width),u(this,kf).set(t,n),u(this,Ns).div=t,u(this,Ns).properties=n,R(this,na,$w).call(this,u(this,Ns)),n.hasText&&u(this,or).append(t),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),u(this,or).append(x)}},$w=function(e){var h;const{div:t,properties:n,ctx:i}=e,{style:o}=t;let l="";if(u(en,qa)>1&&(l=`scale(${1/u(en,qa)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=o,{canvasWidth:p,fontSize:g}=n;R(h=en,Nr,Hw).call(h,i,g*u(this,Xa),d);const{width:m}=i.measureText(t.textContent);m>0&&(l=`scaleX(${p*u(this,Xa)/m}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)},Nr=new WeakSet,pm=function(e=null){let t=u(this,wl).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,wl).set(e,t),u(this,Tf).set(t,{size:0,family:""})}return t},Hw=function(e,t,n){const i=u(this,Tf).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},Z_=function(){if(u(this,qa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,qa,e.getBoundingClientRect().height),e.remove()},eC=function(e,t){const n=u(this,vl).get(e);if(n)return n;const i=R(this,Nr,pm).call(this,t);i.canvas.width=i.canvas.height=rr,R(this,Nr,Hw).call(this,i,rr,e);const o=i.measureText("");let l=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);if(l){const g=l/(l+h);return u(this,vl).set(e,g),i.canvas.width=i.canvas.height=0,g}i.strokeStyle="red",i.clearRect(0,0,rr,rr),i.strokeText("g",0,0);let d=i.getImageData(0,0,rr,rr).data;h=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){h=Math.ceil(g/4/rr);break}i.clearRect(0,0,rr,rr),i.strokeText("A",0,rr),d=i.getImageData(0,0,rr,rr).data,l=0;for(let g=0,m=d.length;g<m;g+=4)if(d[g]>0){l=rr-Math.floor(g/4/rr);break}i.canvas.width=i.canvas.height=0;const p=l?l/(l+h):zI;return u(this,vl).set(e,p),p},k(en,Nr),k(en,vl,new Map),k(en,wl,new Map),k(en,Tf,new WeakMap),k(en,qa,null),k(en,xc,new Set);let zd=en;class $d{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(o){var d;if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if($d.shouldBuildText(h))(d=o==null?void 0:o.attributes)!=null&&d.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const p of o.children)i(p)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const $I=65536,HI=100,BI=5e3,jI=zn?nI:ZM,UI=zn?rI:$_,VI=zn?tI:eI,WI=zn?iI:U_;function GI(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new Bw,{docId:t}=e,n=a.url?XI(a.url):null,i=a.data?qI(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,h=a.password??null,d=a.range instanceof tC?a.range:null,p=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:$I;let g=a.worker instanceof Ju?a.worker:null;const m=a.verbosity,v=typeof a.docBaseUrl=="string"&&!Fy(a.docBaseUrl)?a.docBaseUrl:null,b=typeof a.cMapUrl=="string"?a.cMapUrl:null,S=a.cMapPacked!==!1,A=a.CMapReaderFactory||UI,x=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,_=a.StandardFontDataFactory||WI,P=a.stopAtErrors!==!0,M=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,I=a.isEvalSupported!==!1,L=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!zn,T=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!zn&&(Xn.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,G=typeof a.disableFontFace=="boolean"?a.disableFontFace:zn,q=a.fontExtraProperties===!0,ae=a.enableXfa===!0,oe=a.ownerDocument||globalThis.document,$e=a.disableRange===!0,Ue=a.disableStream===!0,Ie=a.disableAutoFetch===!0,nt=a.pdfBug===!0,J=a.CanvasFactory||jI,ie=a.FilterFactory||VI,ee=a.enableHWA===!0,fe=d?d.length:a.length??NaN,re=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!zn&&!G,$=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:A===$_&&_===U_&&b&&x&&ld(b,document.baseURI)&&ld(x,document.baseURI),X=null;LM(m);const ce={canvasFactory:new J({ownerDocument:oe,enableHWA:ee}),filterFactory:new ie({docId:t,ownerDocument:oe}),cMapReaderFactory:$?null:new A({baseUrl:b,isCompressed:S}),standardFontDataFactory:$?null:new _({baseUrl:x})};if(!g){const _e={verbosity:m,port:Qs.workerPort};g=_e.port?Ju.fromPort(_e):new Ju(_e),e._worker=g}const ke={docId:t,apiVersion:"4.10.38",data:i,password:h,disableAutoFetch:Ie,rangeChunkSize:p,length:fe,docBaseUrl:v,enableXfa:ae,evaluatorOptions:{maxImageSize:M,disableFontFace:G,ignoreErrors:P,isEvalSupported:I,isOffscreenCanvasSupported:L,isImageDecoderSupported:T,canvasMaxAreaInBytes:N,fontExtraProperties:q,useSystemFonts:re,cMapUrl:$?b:null,standardFontDataUrl:$?x:null}},Oe={disableFontFace:G,fontExtraProperties:q,ownerDocument:oe,pdfBug:nt,styleElement:X,loadingParams:{disableAutoFetch:Ie,enableXfa:ae}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const _e=g.messageHandler.sendWithPromise("GetDocRequest",ke,i?[i.buffer]:null);let Ce;if(d)Ce=new SI(d,{disableRange:$e,disableStream:Ue});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Ge;if(zn)if(ld(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ge=XE}else Ge=DI;else Ge=ld(n)?XE:TI;Ce=new Ge({url:n,length:fe,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:$e,disableStream:Ue})}return _e.then(Ge=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const lt=new dd(t,Ge,g.port),rt=new JI(lt,e,Ce,Oe,ce);e._transport=rt,lt.send("Ready",null)})}).catch(e._capability.reject),e}function XI(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(zn&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function qI(a){if(zn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return Dy(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function qE(a){return typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0}var ay;const oy=class oy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Bn(oy,ay)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};ay=new WeakMap,k(oy,ay,0);let Bw=oy;class tC{constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class YI{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ye(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ya,Fs,Jr,Bu,gm;class KI{constructor(e,t,n,i=!1){k(this,Jr);k(this,Ya,null);k(this,Fs,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new DE:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new nC,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new wp({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ye(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:i=Ma.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:m=!1}){var I,L;(I=this._stats)==null||I.time("Overall");const v=this._transport.getRenderingIntent(n,i,g,m),{renderingIntent:b,cacheKey:S}=v;E(this,Fs,!1),R(this,Jr,gm).call(this),h||(h=this._transport.getOptionalContentConfig(b));let A=this._intentStates.get(S);A||(A=Object.create(null),this._intentStates.set(S,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const x=!!(b&Pr.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(v));const _=T=>{var N;A.renderTasks.delete(P),(this._maybeCleanupAfterRender||x)&&E(this,Fs,!0),R(this,Jr,Bu).call(this,!x),T?(P.capability.reject(T),this._abortOperatorList({intentState:A,reason:T instanceof Error?T:new Error(T)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Uw({callback:_,params:{canvasContext:e,viewport:t,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p});(A.renderTasks||(A.renderTasks=new Set)).add(P);const M=P.task;return Promise.all([A.displayReadyCapability.promise,h]).then(([T,N])=>{var G;if(this.destroyed){_();return}if((G=this._stats)==null||G.time("Rendering"),!(N.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:T,optionalContentConfig:N}),P.operatorListChanged()}).catch(_),M}getOperatorList({intent:e="display",annotationMode:t=Ma.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var p;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,i,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>$d.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function o(){l.read().then(function({value:d,done:p}){if(p){n(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},i)}const l=t.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),E(this,Fs,!1),R(this,Jr,gm).call(this),Promise.all(e)}cleanup(e=!1){E(this,Fs,!0);const t=R(this,Jr,Bu).call(this,!1);return e&&t&&this._stats&&(this._stats=new DE),t}_startRenderPage(e,t){var i,o;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&R(this,Jr,Bu).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},l).getReader(),p=this._intentStates.get(t);p.streamReader=d;const g=()=>{d.read().then(({value:m,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,p),g())},m=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();R(this,Jr,Bu).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(m);else if(p.opListReadCapability)p.opListReadCapability.reject(m);else throw m}})};g()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof K1){let i=HI;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new fo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Ya=new WeakMap,Fs=new WeakMap,Jr=new WeakSet,Bu=function(e=!1){if(R(this,Jr,gm).call(this),!u(this,Fs)||this.destroyed)return!1;if(e)return E(this,Ya,setTimeout(()=>{E(this,Ya,null),R(this,Jr,Bu).call(this,!1)},BI)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Fs,!1),!0},gm=function(){u(this,Ya)&&(clearTimeout(u(this,Ya)),E(this,Ya,null))};var Os,ly;class QI{constructor(){k(this,Os,new Map);k(this,ly,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,ly).then(()=>{for(const[i]of u(this,Os))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Be("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}u(this,Os).set(t,i)}removeEventListener(e,t){const n=u(this,Os).get(t);n==null||n(),u(this,Os).delete(t)}terminate(){for(const[,e]of u(this,Os))e==null||e();u(this,Os).clear()}}Os=new WeakMap,ly=new WeakMap;var uy,bl,Sl,_c,mm,Cc,ym;const Rt=class Rt{constructor({name:e=null,port:t=null,verbosity:n=MM()}={}){k(this,_c);var i;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=u(Rt,Sl))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(Rt,Sl)||E(Rt,Sl,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new dd("main","worker",e),this._messageHandler.on("ready",function(){}),R(this,_c,mm).call(this)}_initialize(){if(u(Rt,bl)||u(Rt,Cc,ym)){this._setupFakeWorker();return}let{workerSrc:e}=Rt;try{Rt._isSameOrigin(window.location.href,e)||(e=Rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new dd("main","worker",t),i=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){i();return}this._messageHandler=n,this._port=t,this._webWorker=t,R(this,_c,mm).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){i();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};l();return}catch{Iy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(Rt,bl)||(Be("Setting up fake worker."),E(Rt,bl,!0)),Rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new QI;this._port=t;const n=`fake${Bn(Rt,uy)._++}`,i=new dd(n+"_worker",n,t);e.setup(i,t),this._messageHandler=new dd(n,n+"_worker",t),R(this,_c,mm).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=u(Rt,Sl))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=u(this,Sl))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Rt(e)}static get workerSrc(){if(Qs.workerSrc)return Qs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ye(this,"_setupFakeWorkerGlobal",(async()=>u(this,Cc,ym)?u(this,Cc,ym):(await import(this.workerSrc)).WorkerMessageHandler)())}};uy=new WeakMap,bl=new WeakMap,Sl=new WeakMap,_c=new WeakSet,mm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Cc=new WeakSet,ym=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(Rt,Cc),k(Rt,uy,0),k(Rt,bl,!1),k(Rt,Sl),zn&&(E(Rt,bl,!0),Qs.workerSrc||(Qs.workerSrc="./pdf.worker.mjs")),Rt._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},Rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ju=Rt;var zs,Yi,kc,Rc,$s,Al,yd;class JI{constructor(e,t,n,i,o){k(this,Al);k(this,zs,new Map);k(this,Yi,new Map);k(this,kc,new Map);k(this,Rc,new Map);k(this,$s,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new nC,this.fontLoader=new QM({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ye(this,"annotationStorage",new eb)}getRenderingIntent(e,t=Ma.ENABLE,n=null,i=!1,o=!1){let l=Pr.DISPLAY,h=Pw;switch(e){case"any":l=Pr.ANY;break;case"display":break;case"print":l=Pr.PRINT;break;default:Be(`getRenderingIntent - invalid intent: ${e}`)}const d=l&Pr.PRINT&&n instanceof I_?n:this.annotationStorage;switch(t){case Ma.DISABLE:l+=Pr.ANNOTATIONS_DISABLE;break;case Ma.ENABLE:break;case Ma.ENABLE_FORMS:l+=Pr.ANNOTATIONS_FORMS;break;case Ma.ENABLE_STORAGE:l+=Pr.ANNOTATIONS_STORAGE,h=d.serializable;break;default:Be(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(l+=Pr.IS_EDITING),o&&(l+=Pr.OPLIST);const{ids:p,hash:g}=d.modifiedIds,m=[l,h.hash,g];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,$s))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of u(this,Yi).values())e.push(i._destroy());u(this,Yi).clear(),u(this,kc).clear(),u(this,Rc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,o;this.commonObjs.clear(),this.fontLoader.clear(),u(this,zs).clear(),this.filterFactory.destroy(),zd.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new fo("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Yt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){i.close();return}Yt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:l}=this._fullReader;return(!i||!o)&&(this._lastProgress&&((h=t.onProgress)==null||h.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,i)=>{Yt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){i.close();return}Yt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{o.cancel(l),i.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new YI(n,this))}),e.on("DocException",n=>{t._capability.reject(ir(n))}),e.on("PasswordRequest",n=>{E(this,$s,Promise.withResolvers());try{if(!t.onPassword)throw ir(n);const i=o=>{o instanceof Error?u(this,$s).reject(o):u(this,$s).resolve({password:o})};t.onPassword(i,n.code)}catch(i){u(this,$s).reject(i)}return u(this,$s).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,Yi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:h,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in o){const b=o.error;Be(`Error during font loading: ${b}`),this.commonObjs.resolve(n,b);break}const g=p&&((l=globalThis.FontInspector)!=null&&l.enabled)?(b,S)=>globalThis.FontInspector.fontAdded(b,S):null,m=new JM(o,{disableFontFace:h,fontExtraProperties:d,inspectFont:g});this.fontLoader.bind(m).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&m.data&&(m.data=null),this.commonObjs.resolve(n,m)});break;case"CopyLocalImage":const{imageRef:v}=o;Yt(v,"The imageRef must be defined.");for(const b of u(this,Yi).values())for(const[,S]of b.objs)if((S==null?void 0:S.ref)===v)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,o,l])=>{var d;if(this.destroyed)return;const h=u(this,Yi).get(i);if(!h.objs.has(n)){if(h._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(o){case"Image":h.objs.resolve(n,l),(l==null?void 0:l.dataLen)>kM&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,kc).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&u(this,Rc).set(o.refStr,e);const l=new KI(t,o,this,this._params.pdfBug);return u(this,Yi).set(t,l),l});return u(this,kc).set(t,i),i}getPageIndex(e){return qE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return R(this,Al,yd).call(this,"GetFieldObjects")}hasJSActions(){return R(this,Al,yd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return R(this,Al,yd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return R(this,Al,yd).call(this,"GetOptionalContentConfig").then(t=>new bI(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,zs).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var o,l;return{info:i[0],metadata:i[1]?new vI(i[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return u(this,zs).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Yi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,zs).clear(),this.filterFactory.destroy(!0),zd.cleanup()}}cachedPageNumber(e){if(!qE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Rc).get(t)??null}}zs=new WeakMap,Yi=new WeakMap,kc=new WeakMap,Rc=new WeakMap,$s=new WeakMap,Al=new WeakSet,yd=function(e,t=null){const n=u(this,zs).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return u(this,zs).set(e,i),i};const sd=Symbol("INITIAL_DATA");var Sr,Pf,jw;class nC{constructor(){k(this,Pf);k(this,Sr,Object.create(null))}get(e,t=null){if(t){const i=R(this,Pf,jw).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=u(this,Sr)[e];if(!n||n.data===sd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,Sr)[e];return!!t&&t.data!==sd}delete(e){const t=u(this,Sr)[e];return!t||t.data===sd?!1:(delete u(this,Sr)[e],!0)}resolve(e,t=null){const n=R(this,Pf,jw).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,Sr)){const{data:n}=u(this,Sr)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}E(this,Sr,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Sr)){const{data:t}=u(this,Sr)[e];t!==sd&&(yield[e,t])}}}Sr=new WeakMap,Pf=new WeakSet,jw=function(e){var t;return(t=u(this,Sr))[e]||(t[e]={...Promise.withResolvers(),data:sd})};var Ka;class ZI{constructor(e){k(this,Ka,null);E(this,Ka,e),this.onContinue=null}get promise(){return u(this,Ka).capability.promise}cancel(e=0){u(this,Ka).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,Ka).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,Ka);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Ka=new WeakMap;var Qa,El;const Uo=class Uo{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:m=!1,pageColors:v=null}){k(this,Qa,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ZI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,d;if(this.cancelled)return;if(this._canvas){if(u(Uo,El).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Uo,El).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:o,background:l}=this.params;this.gfx=new Qu(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:i,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,Qa)&&(window.cancelAnimationFrame(u(this,Qa)),E(this,Qa,null)),u(Uo,El).delete(this._canvas),this.callback(e||new K1(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,Qa,window.requestAnimationFrame(()=>{E(this,Qa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Uo,El).delete(this._canvas),this.callback())))}};Qa=new WeakMap,El=new WeakMap,k(Uo,El,new WeakSet);let Uw=Uo;const eD="4.10.38",tD="f9bea397f";function YE(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function ad(a){return Math.max(0,Math.min(255,255*a))}class KE{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ad(e),[e,e,e]}static G_HTML([e]){const t=YE(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(ad)}static RGB_HTML(e){return`#${e.map(YE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[ad(1-Math.min(1,e+i)),ad(1-Math.min(1,n+i)),ad(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,o=1-t,l=1-n,h=Math.min(i,o,l);return["CMYK",i,o,l,h]}}class nD{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){yt("Abstract method `_createSVG` called.")}}class nb extends nD{_createSVG(e){return document.createElementNS(Ss,e)}}class rC{static setupStorage(e,t,n,i,o){const l=i.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",h=>{i.setValue(t,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",h=>{i.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",h=>{i.setValue(t,{value:h.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const h of n.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:o}){const{attributes:l}=t,h=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}h&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){var m,v;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,o=e.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:o,linkService:n});const h=o!=="richText",d=e.div;if(d.append(l),e.viewport){const b=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=b}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(i.children.length===0){if(i.value){const b=document.createTextNode(i.value);l.append(b),h&&$d.shouldBuildText(i.name)&&p.push(b)}return{textDivs:p}}const g=[[i,-1,l]];for(;g.length>0;){const[b,S,A]=g.at(-1);if(S+1===b.children.length){g.pop();continue}const x=b.children[++g.at(-1)[1]];if(x===null)continue;const{name:_}=x;if(_==="#text"){const M=document.createTextNode(x.value);p.push(M),A.append(M);continue}const P=(m=x==null?void 0:x.attributes)!=null&&m.xmlns?document.createElementNS(x.attributes.xmlns,_):document.createElement(_);if(A.append(P),x.attributes&&this.setAttributes({html:P,element:x,storage:t,intent:o,linkService:n}),((v=x.children)==null?void 0:v.length)>0)g.push([x,-1,P]);else if(x.value){const M=document.createTextNode(x.value);h&&$d.shouldBuildText(_)&&p.push(M),P.append(M)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Sp=1e3,rD=9,Zl=new WeakSet;function co(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class iD{static create(e){switch(e.data.annotationType){case Zt.LINK:return new iC(e);case Zt.TEXT:return new sD(e);case Zt.WIDGET:switch(e.data.fieldType){case"Tx":return new aD(e);case"Btn":return e.data.radioButton?new oC(e):e.data.checkBox?new lD(e):new uD(e);case"Ch":return new cD(e);case"Sig":return new oD(e)}return new iu(e);case Zt.POPUP:return new Ww(e);case Zt.FREETEXT:return new dC(e);case Zt.LINE:return new dD(e);case Zt.SQUARE:return new fD(e);case Zt.CIRCLE:return new pD(e);case Zt.POLYLINE:return new fC(e);case Zt.CARET:return new mD(e);case Zt.INK:return new rb(e);case Zt.POLYGON:return new gD(e);case Zt.HIGHLIGHT:return new pC(e);case Zt.UNDERLINE:return new yD(e);case Zt.SQUIGGLY:return new vD(e);case Zt.STRIKEOUT:return new wD(e);case Zt.STAMP:return new gC(e);case Zt.FILEATTACHMENT:return new bD(e);default:return new Wt(e)}}}var xl,Tc,Pc,Lf,Vw;const ob=class ob{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){k(this,Lf);k(this,xl,null);k(this,Tc,!1);k(this,Pc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ob._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;u(this,xl)||E(this,xl,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&R(this,Lf,Vw).call(this,t),(n=u(this,Pc))==null||n.popup.updateEdited(e)}resetEdited(){var e;u(this,xl)&&(R(this,Lf,Vw).call(this,u(this,xl).rect),(e=u(this,Pc))==null||e.popup.resetEdited(),E(this,xl,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof iu||(o.tabIndex=Sp);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Ww){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,o),o}const{width:h,height:d}=co(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(A>0||x>0){const P=`calc(${A}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;l.borderRadius=P}else if(this instanceof oC){const P=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=P}switch(t.borderStyle.style){case rd.SOLID:l.borderStyle="solid";break;case rd.DASHED:l.borderStyle="dashed";break;case rd.BEVELED:Be("Unimplemented border style: beveled");break;case rd.INSET:Be("Unimplemented border style: inset");break;case rd.UNDERLINE:l.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(E(this,Tc,!0),l.borderColor=Ee.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):l.borderWidth=0}const p=Ee.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:m,pageX:v,pageY:b}=i.rawDims;l.left=`${100*(p[0]-v)/g}%`,l.top=`${100*(p[1]-b)/m}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(l.width=`${100*h/g}%`,l.height=`${100*d/m}%`):this.setRotation(S,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:l}=co(this.data.rect);let h,d;e%180===0?(h=100*o/n,d=100*l/i):(h=100*l/n,d=100*o/i),t.style.width=`${h}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const o=i.detail[t],l=o[0],h=o.slice(1);i.target.style[n]=KE[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:KE[`${l}_rgb`](h)})};return Ye(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const o=e[i]||n[i];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,o]of Object.entries(t)){const l=n[i];if(l){const h={detail:{[i]:o},target:e};l(h),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,o]=this.data.rect.map(A=>Math.fround(A));if(e.length===8){const[A,x,_,P]=e.subarray(2,6);if(i===A&&o===x&&t===_&&n===P)return}const{style:l}=this.container;let h;if(u(this,Tc)){const{borderColor:A,borderWidth:x}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=i-t,p=o-n,{svgFactory:g}=this,m=g.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const v=g.createElement("defs");m.append(v);const b=g.createElement("clipPath"),S=`clippath_${this.data.id}`;b.setAttribute("id",S),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let A=2,x=e.length;A<x;A+=8){const _=e[A],P=e[A+1],M=e[A+2],I=e[A+3],L=g.createElement("rect"),T=(M-t)/d,N=(o-P)/p,G=(_-M)/d,q=(P-I)/p;L.setAttribute("x",T),L.setAttribute("y",N),L.setAttribute("width",G),L.setAttribute("height",q),b.append(L),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${N}" width="${G}" height="${q}"/>`)}u(this,Tc)&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(m),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=E(this,Pc,new Ww({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:o,id:l,exportValues:h}of i){if(o===-1||l===t)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!Zl.has(p)){Be(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:p})}return n}for(const i of document.getElementsByName(e)){const{exportValue:o}=i,l=i.getAttribute("data-element-id");l!==t&&Zl.has(i)&&n.push({id:l,exportValue:o,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};xl=new WeakMap,Tc=new WeakMap,Pc=new WeakMap,Lf=new WeakSet,Vw=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;n==null||n.splice(0,4,...e);const{width:p,height:g}=co(e);t.left=`${100*(e[0]-h)/o}%`,t.top=`${100*(l-e[3]+d)/l}%`,i===0?(t.width=`${100*p/o}%`,t.height=`${100*g/l}%`):this.setRotation(i)};let Wt=ob;var Mr,zo,sC,aC;class iC extends Wt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});k(this,Mr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(i,t.action),o=!0):t.attachment?(R(this,Mr,sC).call(this,i,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(R(this,Mr,aC).call(this,i,t.setOCGState),o=!0):t.dest?(this._bindLink(i,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),o=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(i),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&R(this,Mr,zo).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),R(this,Mr,zo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=i.get(o);l&&(t[l]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),R(this,Mr,zo).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),R(this,Mr,zo).call(this),!this._fieldObjects){Be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var m;i==null||i();const{fields:o,refs:l,include:h}=n,d=[];if(o.length!==0||l.length!==0){const v=new Set(l);for(const b of o){const S=this._fieldObjects[b]||[];for(const{id:A}of S)v.add(A)}for(const b of Object.values(this._fieldObjects))for(const S of b)v.has(S.id)===h&&d.push(S)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const p=this.annotationStorage,g=[];for(const v of d){const{id:b}=v;switch(g.push(b),v.type){case"text":{const A=v.defaultValue||"";p.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=v.defaultValue===v.exportValues;p.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=v.defaultValue||"";p.setValue(b,{value:A});break}default:continue}const S=document.querySelector(`[data-element-id="${b}"]`);if(S){if(!Zl.has(S)){Be(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Mr=new WeakSet,zo=function(){this.container.setAttribute("data-internal-link","")},sC=function(t,n,i=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},R(this,Mr,zo).call(this)},aC=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),R(this,Mr,zo).call(this)};class sD extends Wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class iu extends Wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Xn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,o){n.includes("mouse")?e.addEventListener(n,l=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{var h;if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(l)}}))})}_setEventListeners(e,t,n,i){var o,l,h;for(const[d,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,i),p==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||rD,o=e.style;let l;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(p/(z0*i))||1,m=p/g;l=Math.min(i,d(m/z0))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(i,d(p/z0))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=Ee.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class aD extends iu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[i]:n})}render(){var i,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let h=l.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let p=l.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Zl.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Sp,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",v=>{e.setValue(t,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",v=>{const b=this.data.defaultFieldValue??"";n.value=g.userValue=b,g.formattedValue=null});let m=v=>{const{formattedValue:b}=g;b!=null&&(v.target.value=b),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",b=>{var A;if(g.focused)return;const{target:S}=b;g.userValue&&(S.value=g.userValue),g.lastCommittedValue=S.value,g.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const S={value(A){g.userValue=A.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),A.target.value=g.userValue},formattedValue(A){const{formattedValue:x}=A.detail;g.formattedValue=x,x!=null&&A.target!==document.activeElement&&(A.target.value=x),e.setValue(t,{formattedValue:x})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var M;const{charLimit:x}=A.detail,{target:_}=A;if(x===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",x);let P=g.userValue;!P||P.length<=x||(P=P.slice(0,x),_.value=g.userValue=P,e.setValue(t,{value:P}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(S,b)}),n.addEventListener("keydown",b=>{var x;g.commitKey=1;let S=-1;if(b.key==="Escape"?S=0:b.key==="Enter"&&!this.data.multiLine?S=2:b.key==="Tab"&&(g.commitKey=3),S===-1)return;const{value:A}=b.target;g.lastCommittedValue!==A&&(g.lastCommittedValue=A,g.userValue=A,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:S,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const v=m;m=null,n.addEventListener("blur",b=>{var A,x;if(!g.focused||!b.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(g.focused=!1);const{value:S}=b.target;g.userValue=S,g.lastCommittedValue!==S&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:g.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),v(b)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",b=>{var L;g.lastCommittedValue=null;const{data:S,target:A}=b,{value:x,selectionStart:_,selectionEnd:P}=A;let M=_,I=P;switch(b.inputType){case"deleteWordBackward":{const T=x.substring(0,_).match(/\w*[^\w]*$/);T&&(M-=T[0].length);break}case"deleteWordForward":{const T=x.substring(_).match(/^[^\w]*\w*/);T&&(I+=T[0].length);break}case"deleteContentBackward":_===P&&(M-=1);break;case"deleteContentForward":_===P&&(I+=1);break}b.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,change:S||"",willCommit:!1,selStart:M,selEnd:I}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${b}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class oD extends iu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class lD extends iu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Zl.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Sp,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,n)){const g=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const h=t.defaultFieldValue||"Off";l.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class oC extends iu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(Zl.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=Sp,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,n))e.setValue(p.id,{value:!1});e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const h=t.defaultFieldValue;l.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const g=l===p.detail.value;for(const m of this._getElementsByName(p.target.name)){const v=g&&m.id===n;m.domElement&&(m.domElement.checked=v),e.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class uD extends iC{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class cD extends iu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Zl.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Sp;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===m});for(const g of this.data.options){const m=document.createElement("option");m.textContent=g.displayValue,m.value=g.exportValue,n.value.includes(g.exportValue)&&(m.setAttribute("selected",!0),o=!1),i.append(m)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),i.prepend(g),l=()=>{g.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const h=g=>{const m=g?"value":"textContent",{options:v,multiple:b}=i;return b?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=h(!1);const p=g=>{const m=g.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",g=>{const m={value(v){l==null||l();const b=v.detail.value,S=new Set(Array.isArray(b)?b:[b]);for(const A of i.options)A.selected=S.has(A.value);e.setValue(t,{value:h(!0)}),d=h(!1)},multipleSelection(v){i.multiple=!0},remove(v){const b=i.options,S=v.detail.remove;b[S].selected=!1,i.remove(S),b.length>0&&Array.prototype.findIndex.call(b,x=>x.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:h(!0),items:p(v)}),d=h(!1)},clear(v){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=h(!1)},insert(v){const{index:b,displayValue:S,exportValue:A}=v.detail.insert,x=i.children[b],_=document.createElement("option");_.textContent=S,_.value=A,x?x.before(_):i.append(_),e.setValue(t,{value:h(!0),items:p(v)}),d=h(!1)},items(v){const{items:b}=v.detail;for(;i.length!==0;)i.remove(0);for(const S of b){const{displayValue:A,exportValue:x}=S,_=document.createElement("option");_.textContent=A,_.value=x,i.append(_)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:h(!0),items:p(v)}),d=h(!1)},indices(v){const b=new Set(v.detail.indices);for(const S of v.target.options)S.selected=b.has(S.index);e.setValue(t,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,g)}),i.addEventListener("input",g=>{var b;const m=h(!0),v=h(!1);e.setValue(t,{value:m}),g.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):i.addEventListener("input",function(g){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Ww extends Wt{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Wt._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new hD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Y1}${n}`).join(",")),this.container}}var Lc,cy,hy,Mc,_l,$t,Hs,Ic,Mf,If,Dc,Bs,wi,js,Df,Us,Nf,Cl,kl,mt,vm,Gw,lC,uC,cC,hC,wm,bm,Xw;class hD{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:p,parentRect:g,open:m}){k(this,mt);k(this,Lc,R(this,mt,cC).bind(this));k(this,cy,R(this,mt,Xw).bind(this));k(this,hy,R(this,mt,bm).bind(this));k(this,Mc,R(this,mt,wm).bind(this));k(this,_l,null);k(this,$t,null);k(this,Hs,null);k(this,Ic,null);k(this,Mf,null);k(this,If,null);k(this,Dc,null);k(this,Bs,!1);k(this,wi,null);k(this,js,null);k(this,Df,null);k(this,Us,null);k(this,Nf,null);k(this,Cl,null);k(this,kl,!1);var v;E(this,$t,e),E(this,Nf,i),E(this,Hs,l),E(this,Us,h),E(this,If,d),E(this,_l,t),E(this,Df,p),E(this,Dc,g),E(this,Mf,n),E(this,Ic,J1.toDateObject(o)),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",u(this,Mc)),b.addEventListener("mouseenter",u(this,hy)),b.addEventListener("mouseleave",u(this,cy)),b.classList.add("popupTriggerArea");for(const b of n)(v=b.container)==null||v.addEventListener("keydown",u(this,Lc));u(this,$t).hidden=!0,m&&R(this,mt,wm).call(this)}render(){if(u(this,wi))return;const e=E(this,wi,document.createElement("div"));if(e.className="popup",u(this,_l)){const o=e.style.outlineColor=Ee.makeHexColor(...u(this,_l));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=Ee.makeHexColor(...u(this,_l).map(h=>Math.floor(.7*(255-h)+h)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=u(this,Nf),e.append(t),u(this,Ic)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,Ic).valueOf()})),t.append(o)}const i=u(this,mt,vm);if(i)rC.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(u(this,Hs));e.append(o)}u(this,$t).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let o=0,l=i.length;o<l;++o){const h=i[o];n.append(document.createTextNode(h)),o<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;u(this,Cl)||E(this,Cl,{contentsObj:u(this,Hs),richText:u(this,Us)}),e&&E(this,js,null),t&&(E(this,Us,R(this,mt,uC).call(this,t)),E(this,Hs,null)),(n=u(this,wi))==null||n.remove(),E(this,wi,null)}resetEdited(){var e;u(this,Cl)&&({contentsObj:Bn(this,Hs)._,richText:Bn(this,Us)._}=u(this,Cl),E(this,Cl,null),(e=u(this,wi))==null||e.remove(),E(this,wi,null),E(this,js,null))}forceHide(){E(this,kl,this.isVisible),u(this,kl)&&(u(this,$t).hidden=!0)}maybeShow(){u(this,kl)&&(u(this,wi)||R(this,mt,bm).call(this),E(this,kl,!1),u(this,$t).hidden=!1)}get isVisible(){return u(this,$t).hidden===!1}}Lc=new WeakMap,cy=new WeakMap,hy=new WeakMap,Mc=new WeakMap,_l=new WeakMap,$t=new WeakMap,Hs=new WeakMap,Ic=new WeakMap,Mf=new WeakMap,If=new WeakMap,Dc=new WeakMap,Bs=new WeakMap,wi=new WeakMap,js=new WeakMap,Df=new WeakMap,Us=new WeakMap,Nf=new WeakMap,Cl=new WeakMap,kl=new WeakMap,mt=new WeakSet,vm=function(){const e=u(this,Us),t=u(this,Hs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Us).html||null},Gw=function(){var e,t,n;return((n=(t=(e=u(this,mt,vm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},lC=function(){var e,t,n;return((n=(t=(e=u(this,mt,vm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},uC=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:u(this,mt,lC),fontSize:u(this,mt,Gw)?`calc(${u(this,mt,Gw)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return n},cC=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Bs))&&R(this,mt,wm).call(this)},hC=function(){if(u(this,js)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:o}}}=u(this,If);let l=!!u(this,Dc),h=l?u(this,Dc):u(this,Df);for(const S of u(this,Mf))if(!h||Ee.intersect(S.data.rect,h)!==null){h=S.data.rect,l=!0;break}const d=Ee.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]),g=l?h[2]-h[0]+5:0,m=d[0]+g,v=d[1];E(this,js,[100*(m-i)/t,100*(v-o)/n]);const{style:b}=u(this,$t);b.left=`${u(this,js)[0]}%`,b.top=`${u(this,js)[1]}%`},wm=function(){E(this,Bs,!u(this,Bs)),u(this,Bs)?(R(this,mt,bm).call(this),u(this,$t).addEventListener("click",u(this,Mc)),u(this,$t).addEventListener("keydown",u(this,Lc))):(R(this,mt,Xw).call(this),u(this,$t).removeEventListener("click",u(this,Mc)),u(this,$t).removeEventListener("keydown",u(this,Lc)))},bm=function(){u(this,wi)||this.render(),this.isVisible?u(this,Bs)&&u(this,$t).classList.add("focused"):(R(this,mt,hC).call(this),u(this,$t).hidden=!1,u(this,$t).style.zIndex=parseInt(u(this,$t).style.zIndex)+1e3)},Xw=function(){u(this,$t).classList.remove("focused"),!(u(this,Bs)||!this.isVisible)&&(u(this,$t).hidden=!0,u(this,$t).style.zIndex=parseInt(u(this,$t).style.zIndex)-1e3)};class dC extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=He.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ff;class dD extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Ff,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:i}=co(t.rect),o=this.svgFactory.create(n,i,!0),l=E(this,Ff,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ff)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ff=new WeakMap;var Of;class fD extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Of,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:i}=co(t.rect),o=this.svgFactory.create(n,i,!0),l=t.borderStyle.width,h=E(this,Of,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",l/2),h.setAttribute("y",l/2),h.setAttribute("width",n-l),h.setAttribute("height",i-l),h.setAttribute("stroke-width",l||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Of)}addHighlightArea(){this.container.classList.add("highlightArea")}}Of=new WeakMap;var zf;class pD extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,zf,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:i}=co(t.rect),o=this.svgFactory.create(n,i,!0),l=t.borderStyle.width,h=E(this,zf,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",i/2),h.setAttribute("rx",n/2-l/2),h.setAttribute("ry",i/2-l/2),h.setAttribute("stroke-width",l||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,zf)}addHighlightArea(){this.container.classList.add("highlightArea")}}zf=new WeakMap;var $f;class fC extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,$f,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:o}}=this;if(!n)return this.container;const{width:l,height:h}=co(t),d=this.svgFactory.create(l,h,!0);let p=[];for(let m=0,v=n.length;m<v;m+=2){const b=n[m]-t[0],S=t[3]-n[m+1];p.push(`${b},${S}`)}p=p.join(" ");const g=E(this,$f,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,$f)}addHighlightArea(){this.container.classList.add("highlightArea")}}$f=new WeakMap;class gD extends fC{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mD extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Hf,Rl,Bf,qw;class rb extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Bf);k(this,Hf,null);k(this,Rl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?He.HIGHLIGHT:He.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:o,popupRef:l}}=this,{transform:h,width:d,height:p}=R(this,Bf,qw).call(this,n,t),g=this.svgFactory.create(d,p,!0),m=E(this,Hf,this.svgFactory.createElement("svg:g"));g.append(m),m.setAttribute("stroke-width",o.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",h);for(let v=0,b=i.length;v<b;v++){const S=this.svgFactory.createElement(this.svgElementName);u(this,Rl).push(S),S.setAttribute("points",i[v].join(",")),m.append(S)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:o}=t,l=u(this,Hf);if(n>=0&&l.setAttribute("stroke-width",n||1),i)for(let h=0,d=u(this,Rl).length;h<d;h++)u(this,Rl)[h].setAttribute("points",i[h].join(","));if(o){const{transform:h,width:d,height:p}=R(this,Bf,qw).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${d} ${p}`),l.setAttribute("transform",h)}}getElementsToTriggerPopup(){return u(this,Rl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hf=new WeakMap,Rl=new WeakMap,Bf=new WeakSet,qw=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class pC extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=He.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class yD extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class vD extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class wD extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class gC extends Wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=He.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var jf,Uf,Yw;class bD extends Wt{constructor(t){var i;super(t,{isRenderable:!0});k(this,Uf);k(this,jf,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",R(this,Uf,Yw).bind(this)),E(this,jf,i);const{isMac:o}=Xn.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&R(this,Uf,Yw).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return u(this,jf)}addHighlightArea(){this.container.classList.add("highlightArea")}}jf=new WeakMap,Uf=new WeakSet,Yw=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Vf,Tl,Pl,Wf,eu,mC,Kw;class SD{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:l,structTreeLayer:h}){k(this,eu);k(this,Vf,null);k(this,Tl,null);k(this,Pl,new Map);k(this,Wf,null);this.div=e,E(this,Vf,t),E(this,Tl,n),E(this,Wf,h||null),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return u(this,Pl).size>0}async render(e){var l;const{annotations:t}=e,n=this.div;Ql(n,this.viewport);const i=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new nb,annotationStorage:e.annotationStorage||new eb,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const d=h.annotationType===Zt.POPUP;if(d){const m=i.get(h.id);if(!m)continue;o.elements=m}else{const{width:m,height:v}=co(h.rect);if(m<=0||v<=0)continue}o.data=h;const p=iD.create(o);if(!p.isRenderable)continue;if(!d&&h.popupRef){const m=i.get(h.popupRef);m?m.push(p):i.set(h.popupRef,[p])}const g=p.render();h.hidden&&(g.style.visibility="hidden"),await R(this,eu,mC).call(this,g,h.id),p._isEditable&&(u(this,Pl).set(p.data.id,p),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(p))}R(this,eu,Kw).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Ql(t,{rotation:e.rotation}),R(this,eu,Kw).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Pl).values())}getEditableAnnotation(e){return u(this,Pl).get(e)}}Vf=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,Wf=new WeakMap,eu=new WeakSet,mC=async function(e,t){var l,h;const n=e.firstChild||e,i=n.id=`${Y1}${t}`,o=await((l=u(this,Wf))==null?void 0:l.getAriaAttributes(i));if(o)for(const[d,p]of o)n.setAttribute(d,p);this.div.append(e),(h=u(this,Vf))==null||h.moveElementInDOM(this.div,e,n,!1)},Kw=function(){if(!u(this,Tl))return;const e=this.div;for(const[t,n]of u(this,Tl)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n)}u(this,Tl).clear()};const Wg=/\r\n?|\n/g;var bi,Ar,Gf,Ll,Er,Kt,yC,vC,wC,Sm,ea,Am,Em,bC,Jw,SC;const St=class St extends Ft{constructor(t){super({...t,name:"freeTextEditor"});k(this,Kt);k(this,bi);k(this,Ar,"");k(this,Gf,`${this.id}-editor`);k(this,Ll,null);k(this,Er);E(this,bi,t.color||St._defaultColor||Ft._defaultLineColor),E(this,Er,t.fontSize||St._defaultFontSize)}static get _keyboardManager(){const t=St.prototype,n=l=>l.isEmpty(),i=Jl.TRANSLATE_SMALL,o=Jl.TRANSLATE_BIG;return Ye(this,"_keyboardManager",new bp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){Ft.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ke.FREETEXT_SIZE:St._defaultFontSize=n;break;case Ke.FREETEXT_COLOR:St._defaultColor=n;break}}updateParams(t,n){switch(t){case Ke.FREETEXT_SIZE:R(this,Kt,yC).call(this,n);break;case Ke.FREETEXT_COLOR:R(this,Kt,vC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.FREETEXT_SIZE,St._defaultFontSize],[Ke.FREETEXT_COLOR,St._defaultColor||Ft._defaultLineColor]]}get propertiesToUpdate(){return[[Ke.FREETEXT_SIZE,u(this,Er)],[Ke.FREETEXT_COLOR,u(this,bi)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-St._internalPadding*t,-(St._internalPadding+u(this,Er))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(He.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,Ll,new AbortController);const t=this._uiManager.combinedSignal(u(this,Ll));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Gf)),this._isDraggable=!0,(t=u(this,Ll))==null||t.abort(),E(this,Ll,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Ar),n=E(this,Ar,R(this,Kt,wC).call(this).trimEnd());if(t===n)return;const i=o=>{if(E(this,Ar,o),!o){this.remove();return}R(this,Kt,Em).call(this),this._uiManager.rebuild(this),R(this,Kt,Sm).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),R(this,Kt,Sm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){St._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Gf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,Er)}px * var(--scale-factor))`,i.color=u(this,bi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Vm(this,this.div,["dblclick","keydown"]),this.width){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[g,m]=this.pageDimensions,[v,b]=this.pageTranslation;let S,A;switch(this.rotation){case 0:S=t+(h[0]-v)/g,A=n+this.height-(h[1]-b)/m;break;case 90:S=t+(h[0]-v)/g,A=n-(h[1]-b)/m,[d,p]=[p,-d];break;case 180:S=t-this.width+(h[0]-v)/g,A=n-(h[1]-b)/m,[d,p]=[-d,-p];break;case 270:S=t+(h[0]-v-this.height*m)/g,A=n+(h[1]-b-this.width*g)/m,[d,p]=[-p,d];break}this.setAt(S*o,A*l,d,p)}else this.setAt(t*o,n*l,this.width*o,this.height*l);R(this,Kt,Em).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var S,A,x;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const o=R(S=St,ea,Jw).call(S,n.getData("text")||"").replaceAll(Wg,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const h=l.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:p}=h,g=[],m=[];if(d.nodeType===Node.TEXT_NODE){const _=d.parentElement;if(m.push(d.nodeValue.slice(p).replaceAll(Wg,"")),_!==this.editorDiv){let P=g;for(const M of this.editorDiv.childNodes){if(M===_){P=m;continue}P.push(R(A=St,ea,Am).call(A,M))}}g.push(d.nodeValue.slice(0,p).replaceAll(Wg,""))}else if(d===this.editorDiv){let _=g,P=0;for(const M of this.editorDiv.childNodes)P++===p&&(_=m),_.push(R(x=St,ea,Am).call(x,M))}E(this,Ar,`${g.join(`
`)}${o}${m.join(`
`)}`),R(this,Kt,Em).call(this);const v=new Range;let b=g.reduce((_,P)=>_+P.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const P=_.nodeValue.length;if(b<=P){v.setStart(_,b),v.setEnd(_,b);break}b-=P}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,i){var h;let o=null;if(t instanceof dC){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:g,rotation:m,id:v,popupRef:b},textContent:S,textPosition:A,parent:{page:{pageNumber:x}}}=t;if(!S||S.length===0)return null;o=t={annotationType:He.FREETEXT,color:Array.from(p),fontSize:d,value:S.join(`
`),position:A,pageIndex:x-1,rect:g.slice(0),rotation:m,id:v,deleted:!1,popupRef:b}}const l=await super.deserialize(t,n,i);return E(l,Er,t.fontSize),E(l,bi,Ee.makeHexColor(...t.color)),E(l,Ar,R(h=St,ea,Jw).call(h,t.value)),l.annotationElementId=t.id||null,l._initialData=o,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=St._internalPadding*this.parentScale,i=this.getRect(n,n),o=Ft._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,bi)),l={annotationType:He.FREETEXT,color:o,fontSize:u(this,Er),value:R(this,Kt,bC).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!R(this,Kt,SC).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${u(this,Er)}px * var(--scale-factor))`,i.color=u(this,bi),n.replaceChildren();for(const l of u(this,Ar).split(`
`)){const h=document.createElement("div");h.append(l?document.createTextNode(l):document.createElement("br")),n.append(h)}const o=St._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:u(this,Ar)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};bi=new WeakMap,Ar=new WeakMap,Gf=new WeakMap,Ll=new WeakMap,Er=new WeakMap,Kt=new WeakSet,yC=function(t){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-u(this,Er))*this.parentScale),E(this,Er,o),R(this,Kt,Sm).call(this)},i=u(this,Er);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},vC=function(t){const n=o=>{E(this,bi,this.editorDiv.style.color=o)},i=u(this,bi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},wC=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(R(i=St,ea,Am).call(i,o)),n=o);return t.join(`
`)},Sm=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,h=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=h,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},ea=new WeakSet,Am=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Wg,"")},Em=function(){if(this.editorDiv.replaceChildren(),!!u(this,Ar))for(const t of u(this,Ar).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},bC=function(){return u(this,Ar).replaceAll(" "," ")},Jw=function(t){return t.replaceAll(" "," ")},SC=function(t){const{value:n,fontSize:i,color:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((h,d)=>h!==o[d])||t.pageIndex!==l},k(St,ea),Le(St,"_freeTextDefaultContent",""),Le(St,"_internalPadding",0),Le(St,"_defaultColor",null),Le(St,"_defaultFontSize",10),Le(St,"_type","freetext"),Le(St,"_editorType",He.FREETEXT);let Qw=St;class me{toSVGPath(){yt("Abstract method `toSVGPath` must be implemented.")}get box(){yt("Abstract getter `box` must be implemented.")}serialize(e,t){yt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,o,l){l||(l=new Float32Array(e.length));for(let h=0,d=e.length;h<d;h+=2)l[h]=t+e[h]*i,l[h+1]=n+e[h+1]*o;return l}static _rescaleAndSwap(e,t,n,i,o,l){l||(l=new Float32Array(e.length));for(let h=0,d=e.length;h<d;h+=2)l[h]=t+e[h+1]*i,l[h+1]=n+e[h]*o;return l}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)i[o]=t+e[o],i[o+1]=n+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,o){switch(o){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,o,l){return[(e+5*n)/6,(t+5*i)/6,(5*n+o)/6,(5*i+l)/6,(n+o)/2,(i+l)/2]}}Le(me,"PRECISION",1e-4);var xr,Si,Nc,Fc,Ki,qe,Ml,Il,Xf,qf,Oc,zc,Ja,Yf,dy,fy,rn,vd,AC,EC,xC,_C,CC,kC;const _s=class _s{constructor({x:e,y:t},n,i,o,l,h=0){k(this,rn);k(this,xr);k(this,Si,[]);k(this,Nc);k(this,Fc);k(this,Ki,[]);k(this,qe,new Float32Array(18));k(this,Ml);k(this,Il);k(this,Xf);k(this,qf);k(this,Oc);k(this,zc);k(this,Ja,[]);E(this,xr,n),E(this,zc,o*i),E(this,Fc,l),u(this,qe).set([NaN,NaN,NaN,NaN,e,t],6),E(this,Nc,h),E(this,qf,u(_s,Yf)*i),E(this,Xf,u(_s,fy)*i),E(this,Oc,i),u(this,Ja).push(e,t)}isEmpty(){return isNaN(u(this,qe)[8])}add({x:e,y:t}){var q;E(this,Ml,e),E(this,Il,t);const[n,i,o,l]=u(this,xr);let[h,d,p,g]=u(this,qe).subarray(8,12);const m=e-p,v=t-g,b=Math.hypot(m,v);if(b<u(this,Xf))return!1;const S=b-u(this,qf),A=S/b,x=A*m,_=A*v;let P=h,M=d;h=p,d=g,p+=x,g+=_,(q=u(this,Ja))==null||q.push(e,t);const I=-_/S,L=x/S,T=I*u(this,zc),N=L*u(this,zc);return u(this,qe).set(u(this,qe).subarray(2,8),0),u(this,qe).set([p+T,g+N],4),u(this,qe).set(u(this,qe).subarray(14,18),12),u(this,qe).set([p-T,g-N],16),isNaN(u(this,qe)[6])?(u(this,Ki).length===0&&(u(this,qe).set([h+T,d+N],2),u(this,Ki).push(NaN,NaN,NaN,NaN,(h+T-n)/o,(d+N-i)/l),u(this,qe).set([h-T,d-N],14),u(this,Si).push(NaN,NaN,NaN,NaN,(h-T-n)/o,(d-N-i)/l)),u(this,qe).set([P,M,h,d,p,g],6),!this.isEmpty()):(u(this,qe).set([P,M,h,d,p,g],6),Math.abs(Math.atan2(M-d,P-h)-Math.atan2(_,x))<Math.PI/2?([h,d,p,g]=u(this,qe).subarray(2,6),u(this,Ki).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/o,((d+g)/2-i)/l),[h,d,P,M]=u(this,qe).subarray(14,18),u(this,Si).push(NaN,NaN,NaN,NaN,((P+h)/2-n)/o,((M+d)/2-i)/l),!0):([P,M,h,d,p,g]=u(this,qe).subarray(0,6),u(this,Ki).push(((P+5*h)/6-n)/o,((M+5*d)/6-i)/l,((5*h+p)/6-n)/o,((5*d+g)/6-i)/l,((h+p)/2-n)/o,((d+g)/2-i)/l),[p,g,h,d,P,M]=u(this,qe).subarray(12,18),u(this,Si).push(((P+5*h)/6-n)/o,((M+5*d)/6-i)/l,((5*h+p)/6-n)/o,((5*d+g)/6-i)/l,((h+p)/2-n)/o,((d+g)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ki),t=u(this,Si);if(isNaN(u(this,qe)[6])&&!this.isEmpty())return R(this,rn,AC).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);R(this,rn,xC).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return R(this,rn,EC).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,o,l){return new RC(e,t,n,i,o,l)}getOutlines(){var m;const e=u(this,Ki),t=u(this,Si),n=u(this,qe),[i,o,l,h]=u(this,xr),d=new Float32Array((((m=u(this,Ja))==null?void 0:m.length)??0)+2);for(let v=0,b=d.length-2;v<b;v+=2)d[v]=(u(this,Ja)[v]-i)/l,d[v+1]=(u(this,Ja)[v+1]-o)/h;if(d[d.length-2]=(u(this,Ml)-i)/l,d[d.length-1]=(u(this,Il)-o)/h,isNaN(n[6])&&!this.isEmpty())return R(this,rn,_C).call(this,d);const p=new Float32Array(u(this,Ki).length+24+u(this,Si).length);let g=e.length;for(let v=0;v<g;v+=2){if(isNaN(e[v])){p[v]=p[v+1]=NaN;continue}p[v]=e[v],p[v+1]=e[v+1]}g=R(this,rn,kC).call(this,p,g);for(let v=t.length-6;v>=6;v-=6)for(let b=0;b<6;b+=2){if(isNaN(t[v+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[v+b],p[g+1]=t[v+b+1],g+=2}return R(this,rn,CC).call(this,p,g),this.newFreeDrawOutline(p,d,u(this,xr),u(this,Oc),u(this,Nc),u(this,Fc))}};xr=new WeakMap,Si=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,Ki=new WeakMap,qe=new WeakMap,Ml=new WeakMap,Il=new WeakMap,Xf=new WeakMap,qf=new WeakMap,Oc=new WeakMap,zc=new WeakMap,Ja=new WeakMap,Yf=new WeakMap,dy=new WeakMap,fy=new WeakMap,rn=new WeakSet,vd=function(){const e=u(this,qe).subarray(4,6),t=u(this,qe).subarray(16,18),[n,i,o,l]=u(this,xr);return[(u(this,Ml)+(e[0]-t[0])/2-n)/o,(u(this,Il)+(e[1]-t[1])/2-i)/l,(u(this,Ml)+(t[0]-e[0])/2-n)/o,(u(this,Il)+(t[1]-e[1])/2-i)/l]},AC=function(){const[e,t,n,i]=u(this,xr),[o,l,h,d]=R(this,rn,vd).call(this);return`M${(u(this,qe)[2]-e)/n} ${(u(this,qe)[3]-t)/i} L${(u(this,qe)[4]-e)/n} ${(u(this,qe)[5]-t)/i} L${o} ${l} L${h} ${d} L${(u(this,qe)[16]-e)/n} ${(u(this,qe)[17]-t)/i} L${(u(this,qe)[14]-e)/n} ${(u(this,qe)[15]-t)/i} Z`},EC=function(e){const t=u(this,Si);e.push(`L${t[4]} ${t[5]} Z`)},xC=function(e){const[t,n,i,o]=u(this,xr),l=u(this,qe).subarray(4,6),h=u(this,qe).subarray(16,18),[d,p,g,m]=R(this,rn,vd).call(this);e.push(`L${(l[0]-t)/i} ${(l[1]-n)/o} L${d} ${p} L${g} ${m} L${(h[0]-t)/i} ${(h[1]-n)/o}`)},_C=function(e){const t=u(this,qe),[n,i,o,l]=u(this,xr),[h,d,p,g]=R(this,rn,vd).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-i)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-i)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-i)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-i)/l],0),this.newFreeDrawOutline(m,e,u(this,xr),u(this,Oc),u(this,Nc),u(this,Fc))},CC=function(e,t){const n=u(this,Si);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},kC=function(e,t){const n=u(this,qe).subarray(4,6),i=u(this,qe).subarray(16,18),[o,l,h,d]=u(this,xr),[p,g,m,v]=R(this,rn,vd).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(i[0]-o)/h,(i[1]-l)/d],t),t+=24},k(_s,Yf,8),k(_s,dy,2),k(_s,fy,u(_s,Yf)+u(_s,dy));let Xm=_s;var $c,Dl,Vs,Kf,_r,Qf,Vt,py,TC;class RC extends me{constructor(t,n,i,o,l,h){super();k(this,py);k(this,$c);k(this,Dl,new Float32Array(4));k(this,Vs);k(this,Kf);k(this,_r);k(this,Qf);k(this,Vt);E(this,Vt,t),E(this,_r,n),E(this,$c,i),E(this,Qf,o),E(this,Vs,l),E(this,Kf,h),this.lastPoint=[NaN,NaN],R(this,py,TC).call(this,h);const[d,p,g,m]=u(this,Dl);for(let v=0,b=t.length;v<b;v+=2)t[v]=(t[v]-d)/g,t[v+1]=(t[v+1]-p)/m;for(let v=0,b=n.length;v<b;v+=2)n[v]=(n[v]-d)/g,n[v+1]=(n[v+1]-p)/m}toSVGPath(){const t=[`M${u(this,Vt)[4]} ${u(this,Vt)[5]}`];for(let n=6,i=u(this,Vt).length;n<i;n+=6){if(isNaN(u(this,Vt)[n])){t.push(`L${u(this,Vt)[n+4]} ${u(this,Vt)[n+5]}`);continue}t.push(`C${u(this,Vt)[n]} ${u(this,Vt)[n+1]} ${u(this,Vt)[n+2]} ${u(this,Vt)[n+3]} ${u(this,Vt)[n+4]} ${u(this,Vt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,o],l){const h=i-t,d=o-n;let p,g;switch(l){case 0:p=me._rescale(u(this,Vt),t,o,h,-d),g=me._rescale(u(this,_r),t,o,h,-d);break;case 90:p=me._rescaleAndSwap(u(this,Vt),t,n,h,d),g=me._rescaleAndSwap(u(this,_r),t,n,h,d);break;case 180:p=me._rescale(u(this,Vt),i,n,-h,d),g=me._rescale(u(this,_r),i,n,-h,d);break;case 270:p=me._rescaleAndSwap(u(this,Vt),i,o,-h,-d),g=me._rescaleAndSwap(u(this,_r),i,o,-h,-d);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return u(this,Dl)}newOutliner(t,n,i,o,l,h=0){return new Xm(t,n,i,o,l,h)}getNewOutline(t,n){const[i,o,l,h]=u(this,Dl),[d,p,g,m]=u(this,$c),v=l*g,b=h*m,S=i*g+d,A=o*m+p,x=this.newOutliner({x:u(this,_r)[0]*v+S,y:u(this,_r)[1]*b+A},u(this,$c),u(this,Qf),t,u(this,Kf),n??u(this,Vs));for(let _=2;_<u(this,_r).length;_+=2)x.add({x:u(this,_r)[_]*v+S,y:u(this,_r)[_+1]*b+A});return x.getOutlines()}}$c=new WeakMap,Dl=new WeakMap,Vs=new WeakMap,Kf=new WeakMap,_r=new WeakMap,Qf=new WeakMap,Vt=new WeakMap,py=new WeakSet,TC=function(t){const n=u(this,Vt);let i=n[4],o=n[5],l=i,h=o,d=i,p=o,g=i,m=o;const v=t?Math.max:Math.min;for(let S=6,A=n.length;S<A;S+=6){if(isNaN(n[S]))l=Math.min(l,n[S+4]),h=Math.min(h,n[S+5]),d=Math.max(d,n[S+4]),p=Math.max(p,n[S+5]),m<n[S+5]?(g=n[S+4],m=n[S+5]):m===n[S+5]&&(g=v(g,n[S+4]));else{const x=Ee.bezierBoundingBox(i,o,...n.slice(S,S+6));l=Math.min(l,x[0]),h=Math.min(h,x[1]),d=Math.max(d,x[2]),p=Math.max(p,x[3]),m<x[3]?(g=x[2],m=x[3]):m===x[3]&&(g=v(g,x[2]))}i=n[S+4],o=n[S+5]}const b=u(this,Dl);b[0]=l-u(this,Vs),b[1]=h-u(this,Vs),b[2]=d-l+2*u(this,Vs),b[3]=p-h+2*u(this,Vs),this.lastPoint=[g,m]};var Jf,Zf,Za,Ai,Yn,PC,xm,LC,MC,e1;class Zw{constructor(e,t=0,n=0,i=!0){k(this,Yn);k(this,Jf);k(this,Zf);k(this,Za,[]);k(this,Ai,[]);let o=1/0,l=-1/0,h=1/0,d=-1/0;const p=10**-4;for(const{x,y:_,width:P,height:M}of e){const I=Math.floor((x-t)/p)*p,L=Math.ceil((x+P+t)/p)*p,T=Math.floor((_-t)/p)*p,N=Math.ceil((_+M+t)/p)*p,G=[I,T,N,!0],q=[L,T,N,!1];u(this,Za).push(G,q),o=Math.min(o,I),l=Math.max(l,L),h=Math.min(h,T),d=Math.max(d,N)}const g=l-o+2*n,m=d-h+2*n,v=o-n,b=h-n,S=u(this,Za).at(i?-1:-2),A=[S[0],S[2]];for(const x of u(this,Za)){const[_,P,M]=x;x[0]=(_-v)/g,x[1]=(P-b)/m,x[2]=(M-b)/m}E(this,Jf,new Float32Array([v,b,g,m])),E(this,Zf,A)}getOutlines(){u(this,Za).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,Za))t[3]?(e.push(...R(this,Yn,e1).call(this,t)),R(this,Yn,LC).call(this,t)):(R(this,Yn,MC).call(this,t),e.push(...R(this,Yn,e1).call(this,t)));return R(this,Yn,PC).call(this,e)}}Jf=new WeakMap,Zf=new WeakMap,Za=new WeakMap,Ai=new WeakMap,Yn=new WeakSet,PC=function(e){const t=[],n=new Set;for(const l of e){const[h,d,p]=l;t.push([h,d,l],[h,p,l])}t.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=t.length;l<h;l+=2){const d=t[l][2],p=t[l+1][2];d.push(p),p.push(d),n.add(d),n.add(p)}const i=[];let o;for(;n.size>0;){const l=n.values().next().value;let[h,d,p,g,m]=l;n.delete(l);let v=h,b=d;for(o=[h,p],i.push(o);;){let S;if(n.has(g))S=g;else if(n.has(m))S=m;else break;n.delete(S),[h,d,p,g,m]=S,v!==h&&(o.push(v,b,h,b===d?d:p),v=h),b=b===d?p:d}o.push(v,b)}return new AD(i,u(this,Jf),u(this,Zf))},xm=function(e){const t=u(this,Ai);let n=0,i=t.length-1;for(;n<=i;){const o=n+i>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:i=o-1}return i+1},LC=function([,e,t]){const n=R(this,Yn,xm).call(this,e);u(this,Ai).splice(n,0,[e,t])},MC=function([,e,t]){const n=R(this,Yn,xm).call(this,e);for(let i=n;i<u(this,Ai).length;i++){const[o,l]=u(this,Ai)[i];if(o!==e)break;if(o===e&&l===t){u(this,Ai).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[o,l]=u(this,Ai)[i];if(o!==e)break;if(o===e&&l===t){u(this,Ai).splice(i,1);return}}},e1=function(e){const[t,n,i]=e,o=[[t,n,i]],l=R(this,Yn,xm).call(this,i);for(let h=0;h<l;h++){const[d,p]=u(this,Ai)[h];for(let g=0,m=o.length;g<m;g++){const[,v,b]=o[g];if(!(p<=v||b<=d)){if(v>=d){if(b>p)o[g][1]=p;else{if(m===1)return[];o.splice(g,1),g--,m--}continue}o[g][2]=d,b>p&&o.push([t,p,b])}}}return o};var ep,Hc;class AD extends me{constructor(t,n,i){super();k(this,ep);k(this,Hc);E(this,Hc,t),E(this,ep,n),this.lastPoint=i}toSVGPath(){const t=[];for(const n of u(this,Hc)){let[i,o]=n;t.push(`M${i} ${o}`);for(let l=2;l<n.length;l+=2){const h=n[l],d=n[l+1];h===i?(t.push(`V${d}`),o=d):d===o&&(t.push(`H${h}`),i=h)}t.push("Z")}return t.join(" ")}serialize([t,n,i,o],l){const h=[],d=i-t,p=o-n;for(const g of u(this,Hc)){const m=new Array(g.length);for(let v=0;v<g.length;v+=2)m[v]=t+g[v]*d,m[v+1]=o-g[v+1]*p;h.push(m)}return h}get box(){return u(this,ep)}get classNamesForOutlining(){return["highlightOutline"]}}ep=new WeakMap,Hc=new WeakMap;class t1 extends Xm{newFreeDrawOutline(e,t,n,i,o,l){return new ED(e,t,n,i,o,l)}}class ED extends RC{newOutliner(e,t,n,i,o,l=0){return new t1(e,t,n,i,o,l)}}var Ei,Nl,Bc,nn,tp,jc,np,rp,eo,xi,Uc,ip,gt,n1,r1,i1,$o,IC,Pa;const sr=class sr{constructor({editor:e=null,uiManager:t=null}){k(this,gt);k(this,Ei,null);k(this,Nl,null);k(this,Bc);k(this,nn,null);k(this,tp,!1);k(this,jc,!1);k(this,np,null);k(this,rp);k(this,eo,null);k(this,xi,null);k(this,Uc);var n;e?(E(this,jc,!1),E(this,Uc,Ke.HIGHLIGHT_COLOR),E(this,np,e)):(E(this,jc,!0),E(this,Uc,Ke.HIGHLIGHT_DEFAULT_COLOR)),E(this,xi,(e==null?void 0:e._uiManager)||t),E(this,rp,u(this,xi)._eventBus),E(this,Bc,(e==null?void 0:e.color)||((n=u(this,xi))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(sr,ip)||E(sr,ip,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ye(this,"_keyboardManager",new bp([[["Escape","mac+Escape"],sr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],sr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],sr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],sr.prototype._moveToPrevious],[["Home","mac+Home"],sr.prototype._moveToBeginning],[["End","mac+End"],sr.prototype._moveToEnd]]))}renderButton(){const e=E(this,Ei,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,xi)._signal;e.addEventListener("click",R(this,gt,$o).bind(this),{signal:t}),e.addEventListener("keydown",R(this,gt,i1).bind(this),{signal:t});const n=E(this,Nl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,Bc),e.append(n),e}renderMainDropdown(){const e=E(this,nn,R(this,gt,n1).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,Ei)){R(this,gt,$o).call(this,e);return}const t=e.target.getAttribute("data-color");t&&R(this,gt,r1).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,gt,Pa)){R(this,gt,$o).call(this,e);return}if(e.target===u(this,Ei)){(t=u(this,nn).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,nn))==null?void 0:t.firstChild)||e.target===u(this,Ei)){u(this,gt,Pa)&&this._hideDropdownFromKeyboard();return}u(this,gt,Pa)||R(this,gt,$o).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,gt,Pa)){R(this,gt,$o).call(this,e);return}(t=u(this,nn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,gt,Pa)){R(this,gt,$o).call(this,e);return}(t=u(this,nn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,nn))==null||e.classList.add("hidden"),(t=u(this,eo))==null||t.abort(),E(this,eo,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,jc)){if(!u(this,gt,Pa)){(e=u(this,np))==null||e.unselect();return}this.hideDropdown(),u(this,Ei).focus({preventScroll:!0,focusVisible:u(this,tp)})}}updateColor(e){if(u(this,Nl)&&(u(this,Nl).style.backgroundColor=e),!u(this,nn))return;const t=u(this,xi).highlightColors.values();for(const n of u(this,nn).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,Ei))==null||e.remove(),E(this,Ei,null),E(this,Nl,null),(t=u(this,nn))==null||t.remove(),E(this,nn,null)}};Ei=new WeakMap,Nl=new WeakMap,Bc=new WeakMap,nn=new WeakMap,tp=new WeakMap,jc=new WeakMap,np=new WeakMap,rp=new WeakMap,eo=new WeakMap,xi=new WeakMap,Uc=new WeakMap,ip=new WeakMap,gt=new WeakSet,n1=function(){const e=document.createElement("div"),t=u(this,xi)._signal;e.addEventListener("contextmenu",Li,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of u(this,xi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",u(sr,ip)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=i,o.setAttribute("aria-selected",i===u(this,Bc)),o.addEventListener("click",R(this,gt,r1).bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",R(this,gt,i1).bind(this),{signal:t}),e},r1=function(e,t){t.stopPropagation(),u(this,rp).dispatch("switchannotationeditorparams",{source:this,type:u(this,Uc),value:e})},i1=function(e){sr._keyboardManager.exec(this,e)},$o=function(e){if(u(this,gt,Pa)){this.hideDropdown();return}if(E(this,tp,e.detail===0),u(this,eo)||(E(this,eo,new AbortController),window.addEventListener("pointerdown",R(this,gt,IC).bind(this),{signal:u(this,xi).combinedSignal(u(this,eo))})),u(this,nn)){u(this,nn).classList.remove("hidden");return}const t=E(this,nn,R(this,gt,n1).call(this));u(this,Ei).append(t)},IC=function(e){var t;(t=u(this,nn))!=null&&t.contains(e.target)||this.hideDropdown()},Pa=function(){return u(this,nn)&&!u(this,nn).classList.contains("hidden")},k(sr,ip,null);let qm=sr;var Vc,sp,Ws,Fl,Wc,lr,ap,op,Ol,Xr,Cr,wn,Gc,Gs,Nn,Xc,qr,lp,ze,s1,_m,DC,NC,FC,a1,Ho,Zr,ju,OC,Cm,wd,zC,$C,HC,BC,jC;const st=class st extends Ft{constructor(t){super({...t,name:"highlightEditor"});k(this,ze);k(this,Vc,null);k(this,sp,0);k(this,Ws);k(this,Fl,null);k(this,Wc,null);k(this,lr,null);k(this,ap,null);k(this,op,0);k(this,Ol,null);k(this,Xr,null);k(this,Cr,null);k(this,wn,!1);k(this,Gc,null);k(this,Gs);k(this,Nn,null);k(this,Xc,"");k(this,qr);k(this,lp,"");this.color=t.color||st._defaultColor,E(this,qr,t.thickness||st._defaultThickness),E(this,Gs,t.opacity||st._defaultOpacity),E(this,Ws,t.boxes||null),E(this,lp,t.methodOfCreation||""),E(this,Xc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(E(this,wn,!0),R(this,ze,_m).call(this,t),R(this,ze,Ho).call(this)):u(this,Ws)&&(E(this,Vc,t.anchorNode),E(this,sp,t.anchorOffset),E(this,ap,t.focusNode),E(this,op,t.focusOffset),R(this,ze,s1).call(this),R(this,ze,Ho).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=st.prototype;return Ye(this,"_keyboardManager",new bp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,wn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,qr),methodOfCreation:u(this,lp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;Ft.initialize(t,n),st._defaultColor||(st._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ke.HIGHLIGHT_DEFAULT_COLOR:st._defaultColor=n;break;case Ke.HIGHLIGHT_THICKNESS:st._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,Gc)}updateParams(t,n){switch(t){case Ke.HIGHLIGHT_COLOR:R(this,ze,DC).call(this,n);break;case Ke.HIGHLIGHT_THICKNESS:R(this,ze,NC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ke.HIGHLIGHT_DEFAULT_COLOR,st._defaultColor],[Ke.HIGHLIGHT_THICKNESS,st._defaultThickness]]}get propertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,this.color||st._defaultColor],[Ke.HIGHLIGHT_THICKNESS,u(this,qr)||st._defaultThickness],[Ke.HIGHLIGHT_FREE,u(this,wn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(E(this,Wc,new qm({editor:this})),t.addColorPicker(u(this,Wc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,ze,wd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,R(this,ze,wd).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){R(this,ze,a1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,ze,Ho).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?R(this,ze,a1).call(this):t&&(R(this,ze,Ho).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,l,h;const{drawLayer:n}=this.parent;let i;u(this,wn)?(t=(t-this.rotation+360)%360,i=R(o=st,Zr,ju).call(o,u(this,Xr).box,t)):i=R(l=st,Zr,ju).call(l,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,Cr),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(u(this,Nn),{bbox:R(h=st,Zr,ju).call(h,u(this,lr).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Xc)&&(t.setAttribute("aria-label",u(this,Xc)),t.setAttribute("role","mark")),u(this,wn)?t.classList.add("free"):this.div.addEventListener("keydown",R(this,ze,OC).bind(this),{signal:this._uiManager._signal});const n=E(this,Ol,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Fl);const[i,o]=this.parentDimensions;return this.setDims(this.width*i,this.height*o),Vm(this,u(this,Ol),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Nn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Nn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:R(this,ze,Cm).call(this,!0);break;case 1:case 3:R(this,ze,Cm).call(this,!1);break}}select(){var t;super.select(),u(this,Nn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Nn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Nn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Nn),{rootClass:{selected:!1}}),u(this,wn)||R(this,ze,Cm).call(this,!1))}get _mustFixPosition(){return!u(this,wn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Cr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Nn),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:o,y:l}){const{x:h,y:d,width:p,height:g}=i.getBoundingClientRect(),m=new AbortController,v=t.combinedSignal(m),b=S=>{m.abort(),R(this,Zr,BC).call(this,t,S)};window.addEventListener("blur",b,{signal:v}),window.addEventListener("pointerup",b,{signal:v}),window.addEventListener("pointerdown",Ir,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Li,{signal:v}),i.addEventListener("pointermove",R(this,Zr,HC).bind(this,t),{signal:v}),this._freeHighlight=new t1({x:o,y:l},[h,d,p,g],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var A,x,_,P;let o=null;if(t instanceof pC){const{data:{quadPoints:M,rect:I,rotation:L,id:T,color:N,opacity:G,popupRef:q},parent:{page:{pageNumber:ae}}}=t;o=t={annotationType:He.HIGHLIGHT,color:Array.from(N),opacity:G,quadPoints:M,boxes:null,pageIndex:ae-1,rect:I.slice(0),rotation:L,id:T,deleted:!1,popupRef:q}}else if(t instanceof rb){const{data:{inkLists:M,rect:I,rotation:L,id:T,color:N,borderStyle:{rawWidth:G},popupRef:q},parent:{page:{pageNumber:ae}}}=t;o=t={annotationType:He.HIGHLIGHT,color:Array.from(N),thickness:G,inkLists:M,boxes:null,pageIndex:ae-1,rect:I.slice(0),rotation:L,id:T,deleted:!1,popupRef:q}}const{color:l,quadPoints:h,inkLists:d,opacity:p}=t,g=await super.deserialize(t,n,i);g.color=Ee.makeHexColor(...l),E(g,Gs,p||1),d&&E(g,qr,t.thickness),g.annotationElementId=t.id||null,g._initialData=o;const[m,v]=g.pageDimensions,[b,S]=g.pageTranslation;if(h){const M=E(g,Ws,[]);for(let I=0;I<h.length;I+=8)M.push({x:(h[I]-b)/m,y:1-(h[I+1]-S)/v,width:(h[I+2]-h[I])/m,height:(h[I+1]-h[I+5])/v});R(A=g,ze,s1).call(A),R(x=g,ze,Ho).call(x),g.rotate(g.rotation)}else if(d){E(g,wn,!0);const M=d[0],I={x:M[0]-b,y:v-(M[1]-S)},L=new t1(I,[0,0,m,v],1,u(g,qr)/2,!0,.001);for(let G=0,q=M.length;G<q;G+=2)I.x=M[G]-b,I.y=v-(M[G+1]-S),L.add(I);const{id:T,clipPathId:N}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);R(_=g,ze,_m).call(_,{highlightOutlines:L.getOutlines(),highlightId:T,clipPathId:N}),R(P=g,ze,Ho).call(P)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=Ft._colorManager.convert(this.color),o={annotationType:He.HIGHLIGHT,color:i,opacity:u(this,Gs),thickness:u(this,qr),quadPoints:R(this,ze,zC).call(this),outlines:R(this,ze,$C).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:R(this,ze,wd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!R(this,ze,jC).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Vc=new WeakMap,sp=new WeakMap,Ws=new WeakMap,Fl=new WeakMap,Wc=new WeakMap,lr=new WeakMap,ap=new WeakMap,op=new WeakMap,Ol=new WeakMap,Xr=new WeakMap,Cr=new WeakMap,wn=new WeakMap,Gc=new WeakMap,Gs=new WeakMap,Nn=new WeakMap,Xc=new WeakMap,qr=new WeakMap,lp=new WeakMap,ze=new WeakSet,s1=function(){const t=new Zw(u(this,Ws),.001);E(this,Xr,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Xr).box;const n=new Zw(u(this,Ws),.0025,.001,this._uiManager.direction==="ltr");E(this,lr,n.getOutlines());const{lastPoint:i}=u(this,lr);E(this,Gc,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},_m=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var m,v;if(E(this,Xr,t),E(this,lr,t.getNewOutline(u(this,qr)/2+1.5,.0025)),n>=0)E(this,Cr,n),E(this,Fl,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),E(this,Nn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,lr).box,path:{d:u(this,lr).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Cr),{bbox:R(m=st,Zr,ju).call(m,u(this,Xr).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Nn),{bbox:R(v=st,Zr,ju).call(v,u(this,lr).box,b),path:{d:u(this,lr).toSVGPath()}})}const[l,h,d,p]=t.box;switch(this.rotation){case 0:this.x=l,this.y=h,this.width=d,this.height=p;break;case 90:{const[b,S]=this.parentDimensions;this.x=h,this.y=1-l,this.width=d*S/b,this.height=p*b/S;break}case 180:this.x=1-l,this.y=1-h,this.width=d,this.height=p;break;case 270:{const[b,S]=this.parentDimensions;this.x=1-h,this.y=l,this.width=d*S/b,this.height=p*b/S;break}}const{lastPoint:g}=u(this,lr);E(this,Gc,[(g[0]-l)/d,(g[1]-h)/p])},DC=function(t){const n=(l,h)=>{var d,p;this.color=l,E(this,Gs,h),(d=this.parent)==null||d.drawLayer.updateProperties(u(this,Cr),{root:{fill:l,"fill-opacity":h}}),(p=u(this,Wc))==null||p.updateColor(l)},i=this.color,o=u(this,Gs);this.addCommands({cmd:n.bind(this,t,st._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},NC=function(t){const n=u(this,qr),i=o=>{E(this,qr,o),R(this,ze,FC).call(this,o)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},FC=function(t){if(!u(this,wn))return;R(this,ze,_m).call(this,{highlightOutlines:u(this,Xr).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},a1=function(){u(this,Cr)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Cr)),E(this,Cr,null),this.parent.drawLayer.remove(u(this,Nn)),E(this,Nn,null))},Ho=function(t=this.parent){u(this,Cr)===null&&({id:Bn(this,Cr)._,clipPathId:Bn(this,Fl)._}=t.drawLayer.draw({bbox:u(this,Xr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Gs)},rootClass:{highlight:!0,free:u(this,wn)},path:{d:u(this,Xr).toSVGPath()}},!1,!0),E(this,Nn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,wn)},bbox:u(this,lr).box,path:{d:u(this,lr).toSVGPath()}},u(this,wn))),u(this,Ol)&&(u(this,Ol).style.clipPath=u(this,Fl)))},Zr=new WeakSet,ju=function([t,n,i,o],l){switch(l){case 90:return[1-n-o,t,o,i];case 180:return[1-t-i,1-n-o,i,o];case 270:return[n,1-t-i,o,i]}return[t,n,i,o]},OC=function(t){st._keyboardManager.exec(this,t)},Cm=function(t){if(!u(this,Vc))return;const n=window.getSelection();t?n.setPosition(u(this,Vc),u(this,sp)):n.setPosition(u(this,ap),u(this,op))},wd=function(){return u(this,wn)?this.rotation:0},zC=function(){if(u(this,wn))return null;const[t,n]=this.pageDimensions,[i,o]=this.pageTranslation,l=u(this,Ws),h=new Float32Array(l.length*8);let d=0;for(const{x:p,y:g,width:m,height:v}of l){const b=p*t+i,S=(1-g)*n+o;h[d]=h[d+4]=b,h[d+1]=h[d+3]=S,h[d+2]=h[d+6]=b+m*t,h[d+5]=h[d+7]=S-v*n,d+=8}return h},$C=function(t){return u(this,Xr).serialize(t,R(this,ze,wd).call(this))},HC=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},BC=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},jC=function(t){const{color:n}=this._initialData;return t.color.some((i,o)=>i!==n[o])},k(st,Zr),Le(st,"_defaultColor",null),Le(st,"_defaultOpacity",1),Le(st,"_defaultThickness",12),Le(st,"_type","highlight"),Le(st,"_editorType",He.HIGHLIGHT),Le(st,"_freeHighlightId",-1),Le(st,"_freeHighlight",null),Le(st,"_freeHighlightClipId","");let Ym=st;var zl;class xD{constructor(){k(this,zl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,zl)[e]=t}toSVGProperties(){const e=u(this,zl);return E(this,zl,Object.create(null)),{root:e}}reset(){E(this,zl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){yt("Not implemented")}}zl=new WeakMap;var kr,qc,hn,$l,Hl,to,no,ro,Bl,Ze,l1,u1,c1,bd,UC,km,Sd,Uu;const ye=class ye extends Ft{constructor(t){super(t);k(this,Ze);k(this,kr,null);k(this,qc);Le(this,"_drawId",null);E(this,qc,t.mustBeCommitted||!1),t.drawOutlines&&(R(this,Ze,l1).call(this,t),R(this,Ze,bd).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[o,l]of Object.entries(n))i.has(o)?Object.assign(t[o],l):t[o]=l;return t}static getDefaultDrawingOptions(t){yt("Not implemented")}static get typesMap(){yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(u(ye,hn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,o]of this.typesMap)t.push([i,n[o]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,o]of this.constructor.typesMap)t.push([i,n[o]]);return t}_updateProperty(t,n,i){const o=this._drawingOptions,l=o[n],h=d=>{var g;o.updateProperty(n,d);const p=u(this,kr).updateProperty(n,d);p&&R(this,Ze,Sd).call(this,p),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:h.bind(this,i),undo:h.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties(u(this,kr).getPathResizingSVGProperties(R(this,Ze,km).call(this)),{bbox:R(this,Ze,Uu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties(u(this,kr).getPathResizedSVGProperties(R(this,Ze,km).call(this)),{bbox:R(this,Ze,Uu).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:R(this,Ze,Uu).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties(u(this,kr).getPathTranslatedSVGProperties(R(this,Ze,km).call(this),this.parentDimensions),{bbox:R(this,Ze,Uu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,qc)&&(E(this,qc,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){R(this,Ze,c1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Ze,bd).call(this),R(this,Ze,Sd).call(this,u(this,kr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),R(this,Ze,c1).call(this)):t&&(this._uiManager.addShouldRescale(this),R(this,Ze,bd).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ye._mergeSVGProperties({bbox:R(this,Ze,Uu).call(this)},u(this,kr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,Ze,Sd).call(this,u(this,kr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,o]=this.parentDimensions;return this.setDims(this.width*i,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,i,o,l){yt("Not implemented")}static startDrawing(t,n,i,o){var x;const{target:l,offsetX:h,offsetY:d,pointerId:p,pointerType:g}=o;if(u(ye,no)&&u(ye,no)!==g)return;const{viewport:{rotation:m}}=t,{width:v,height:b}=l.getBoundingClientRect(),S=E(ye,$l,new AbortController),A=t.combinedSignal(S);if(u(ye,to)||E(ye,to,p),u(ye,no)??E(ye,no,g),window.addEventListener("pointerup",_=>{var P;u(ye,to)===_.pointerId?this._endDraw(_):(P=u(ye,ro))==null||P.delete(_.pointerId)},{signal:A}),window.addEventListener("pointercancel",_=>{var P;u(ye,to)===_.pointerId?this._currentParent.endDrawingSession():(P=u(ye,ro))==null||P.delete(_.pointerId)},{signal:A}),window.addEventListener("pointerdown",_=>{u(ye,no)===_.pointerType&&((u(ye,ro)||E(ye,ro,new Set)).add(_.pointerId),u(ye,hn).isCancellable()&&(u(ye,hn).removeLastElement(),u(ye,hn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Li,{signal:A}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),l.addEventListener("touchmove",_=>{_.timeStamp===u(ye,Bl)&&Ir(_)},{signal:A}),t.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),u(ye,hn)){t.drawLayer.updateProperties(this._currentDrawId,u(ye,hn).startNew(h,d,v,b,m));return}n.updateUIForDefaultProperties(this),E(ye,hn,this.createDrawerInstance(h,d,v,b,m)),E(ye,Hl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(ye,Hl).toSVGProperties(),u(ye,hn).defaultSVGProperties),!0,!1)}static _drawMove(t){var l;if(E(ye,Bl,-1),!u(ye,hn))return;const{offsetX:n,offsetY:i,pointerId:o}=t;if(u(ye,to)===o){if(((l=u(ye,ro))==null?void 0:l.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(ye,hn).add(n,i)),E(ye,Bl,t.timeStamp),Ir(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,E(ye,hn,null),E(ye,Hl,null),E(ye,no,null),E(ye,Bl,NaN)),u(ye,$l)&&(u(ye,$l).abort(),E(ye,$l,null),E(ye,to,NaN),E(ye,ro,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,u(ye,hn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=u(ye,hn),o=this._currentDrawId,l=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,i.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:Ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ke.DRAW_STEP),!u(ye,hn).isEmpty()){const{pageDimensions:[i,o],scale:l}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(ye,hn).getOutlines(i*l,o*l,l,this._INNER_MARGIN),drawingOptions:u(ye,Hl),mustBeCommitted:!t});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,o,l,h){yt("Not implemented")}static async deserialize(t,n,i){var m,v;const{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}=n.viewport,p=this.deserializeDraw(h,d,o,l,this._INNER_MARGIN,t),g=await super.deserialize(t,n,i);return g.createDrawingOptions(t),R(m=g,Ze,l1).call(m,{drawOutlines:p}),R(v=g,Ze,bd).call(v),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[n,i]=this.pageTranslation,[o,l]=this.pageDimensions;return u(this,kr).serialize([n,i,o,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};kr=new WeakMap,qc=new WeakMap,hn=new WeakMap,$l=new WeakMap,Hl=new WeakMap,to=new WeakMap,no=new WeakMap,ro=new WeakMap,Bl=new WeakMap,Ze=new WeakSet,l1=function({drawOutlines:t,drawId:n,drawingOptions:i}){E(this,kr,t),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=R(this,Ze,u1).call(this,t,this.parent),R(this,Ze,Sd).call(this,t.box)},u1=function(t,n){const{id:i}=n.drawLayer.draw(ye._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},c1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},bd=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,Ze,u1).call(this,u(this,kr),t)}},UC=function([t,n,i,o]){const{parentDimensions:[l,h],rotation:d}=this;switch(d){case 90:return[n,1-t,i*(h/l),o*(l/h)];case 180:return[1-t,1-n,i,o];case 270:return[1-n,t,i*(h/l),o*(l/h)];default:return[t,n,i,o]}},km=function(){const{x:t,y:n,width:i,height:o,parentDimensions:[l,h],rotation:d}=this;switch(d){case 90:return[1-n,t,i*(l/h),o*(h/l)];case 180:return[1-t,1-n,i,o];case 270:return[n,1-t,i*(l/h),o*(h/l)];default:return[t,n,i,o]}},Sd=function(t){if([this.x,this.y,this.width,this.height]=R(this,Ze,UC).call(this,t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Uu=function(){const{x:t,y:n,width:i,height:o,rotation:l,parentRotation:h,parentDimensions:[d,p]}=this;switch((l*4+h)/90){case 1:return[1-n-o,t,o,i];case 2:return[1-t-i,1-n-o,i,o];case 3:return[n,1-t-i,o,i];case 4:return[t,n-i*(d/p),o*(p/d),i*(d/p)];case 5:return[1-n,t,i*(d/p),o*(p/d)];case 6:return[1-t-o*(p/d),1-n,o*(p/d),i*(d/p)];case 7:return[n-i*(d/p),1-t-o*(p/d),i*(d/p),o*(p/d)];case 8:return[t-i,n-o,i,o];case 9:return[1-n,t-i,o,i];case 10:return[1-t,1-n,i,o];case 11:return[n-o,1-t,o,i];case 12:return[t-o*(p/d),n,o*(p/d),i*(d/p)];case 13:return[1-n-i*(d/p),t-o*(p/d),i*(d/p),o*(p/d)];case 14:return[1-t,1-n-i*(d/p),o*(p/d),i*(d/p)];case 15:return[n,1-t,i*(d/p),o*(p/d)];default:return[t,n,i,o]}},Le(ye,"_currentDrawId",-1),Le(ye,"_currentParent",null),k(ye,hn,null),k(ye,$l,null),k(ye,Hl,null),k(ye,to,NaN),k(ye,no,null),k(ye,ro,null),k(ye,Bl,NaN),Le(ye,"_INNER_MARGIN",3);let o1=ye;var Qi,dn,fn,jl,Yc,Vn,bn,Yr,Ul,Vl,Wl,Kc,Rm;class _D{constructor(e,t,n,i,o,l){k(this,Kc);k(this,Qi,new Float64Array(6));k(this,dn);k(this,fn);k(this,jl);k(this,Yc);k(this,Vn);k(this,bn,"");k(this,Yr,0);k(this,Ul,new Km);k(this,Vl);k(this,Wl);E(this,Vl,n),E(this,Wl,i),E(this,jl,o),E(this,Yc,l),[e,t]=R(this,Kc,Rm).call(this,e,t);const h=E(this,dn,[NaN,NaN,NaN,NaN,e,t]);E(this,Vn,[e,t]),E(this,fn,[{line:h,points:u(this,Vn)}]),u(this,Qi).set(h,0)}updateProperty(e,t){e==="stroke-width"&&E(this,Yc,t)}isEmpty(){return!u(this,fn)||u(this,fn).length===0}isCancellable(){return u(this,Vn).length<=10}add(e,t){[e,t]=R(this,Kc,Rm).call(this,e,t);const[n,i,o,l]=u(this,Qi).subarray(2,6),h=e-o,d=t-l;return Math.hypot(u(this,Vl)*h,u(this,Wl)*d)<=2?null:(u(this,Vn).push(e,t),isNaN(n)?(u(this,Qi).set([o,l,e,t],2),u(this,dn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Qi)[0])&&u(this,dn).splice(6,6),u(this,Qi).set([n,i,o,l,e,t],0),u(this,dn).push(...me.createBezierPoints(n,i,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,Vn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,o){E(this,Vl,n),E(this,Wl,i),E(this,jl,o),[e,t]=R(this,Kc,Rm).call(this,e,t);const l=E(this,dn,[NaN,NaN,NaN,NaN,e,t]);E(this,Vn,[e,t]);const h=u(this,fn).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),u(this,fn).push({line:l,points:u(this,Vn)}),u(this,Qi).set(l,0),E(this,Yr,0),this.toSVGPath(),null}getLastElement(){return u(this,fn).at(-1)}setLastElement(e){return u(this,fn)?(u(this,fn).push(e),E(this,dn,e.line),E(this,Vn,e.points),E(this,Yr,0),{path:{d:this.toSVGPath()}}):u(this,Ul).setLastElement(e)}removeLastElement(){if(!u(this,fn))return u(this,Ul).removeLastElement();u(this,fn).pop(),E(this,bn,"");for(let e=0,t=u(this,fn).length;e<t;e++){const{line:n,points:i}=u(this,fn)[e];E(this,dn,n),E(this,Vn,i),E(this,Yr,0),this.toSVGPath()}return{path:{d:u(this,bn)}}}toSVGPath(){const e=me.svgRound(u(this,dn)[4]),t=me.svgRound(u(this,dn)[5]);if(u(this,Vn).length===2)return E(this,bn,`${u(this,bn)} M ${e} ${t} Z`),u(this,bn);if(u(this,Vn).length<=6){const i=u(this,bn).lastIndexOf("M");E(this,bn,`${u(this,bn).slice(0,i)} M ${e} ${t}`),E(this,Yr,6)}if(u(this,Vn).length===4){const i=me.svgRound(u(this,dn)[10]),o=me.svgRound(u(this,dn)[11]);return E(this,bn,`${u(this,bn)} L ${i} ${o}`),E(this,Yr,12),u(this,bn)}const n=[];u(this,Yr)===0&&(n.push(`M ${e} ${t}`),E(this,Yr,6));for(let i=u(this,Yr),o=u(this,dn).length;i<o;i+=6){const[l,h,d,p,g,m]=u(this,dn).slice(i,i+6).map(me.svgRound);n.push(`C${l} ${h} ${d} ${p} ${g} ${m}`)}return E(this,bn,u(this,bn)+n.join(" ")),E(this,Yr,u(this,dn).length),u(this,bn)}getOutlines(e,t,n,i){const o=u(this,fn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),u(this,Ul).build(u(this,fn),e,t,n,u(this,jl),u(this,Yc),i),E(this,Qi,null),E(this,dn,null),E(this,fn,null),E(this,bn,null),u(this,Ul)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Qi=new WeakMap,dn=new WeakMap,fn=new WeakMap,jl=new WeakMap,Yc=new WeakMap,Vn=new WeakMap,bn=new WeakMap,Yr=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,Kc=new WeakSet,Rm=function(e,t){return me._normalizePoint(e,t,u(this,Vl),u(this,Wl),u(this,jl))};var Wn,up,cp,Rr,Ji,Zi,Qc,Jc,Zc,An,Es,VC,WC,GC;const lb=class lb extends me{constructor(){super(...arguments);k(this,An);k(this,Wn);k(this,up,0);k(this,cp);k(this,Rr);k(this,Ji);k(this,Zi);k(this,Qc);k(this,Jc);k(this,Zc)}build(t,n,i,o,l,h,d){E(this,Ji,n),E(this,Zi,i),E(this,Qc,o),E(this,Jc,l),E(this,Zc,h),E(this,cp,d??0),E(this,Rr,t),R(this,An,WC).call(this)}setLastElement(t){return u(this,Rr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Rr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,Rr)){if(t.push(`M${me.svgRound(n[4])} ${me.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${me.svgRound(n[10])} ${me.svgRound(n[11])}`);continue}for(let i=6,o=n.length;i<o;i+=6){const[l,h,d,p,g,m]=n.subarray(i,i+6).map(me.svgRound);t.push(`C${l} ${h} ${d} ${p} ${g} ${m}`)}}return t.join("")}serialize([t,n,i,o],l){const h=[],d=[],[p,g,m,v]=R(this,An,VC).call(this);let b,S,A,x,_,P,M,I,L;switch(u(this,Jc)){case 0:L=me._rescale,b=t,S=n+o,A=i,x=-o,_=t+p*i,P=n+(1-g-v)*o,M=t+(p+m)*i,I=n+(1-g)*o;break;case 90:L=me._rescaleAndSwap,b=t,S=n,A=i,x=o,_=t+g*i,P=n+p*o,M=t+(g+v)*i,I=n+(p+m)*o;break;case 180:L=me._rescale,b=t+i,S=n,A=-i,x=o,_=t+(1-p-m)*i,P=n+g*o,M=t+(1-p)*i,I=n+(g+v)*o;break;case 270:L=me._rescaleAndSwap,b=t+i,S=n+o,A=-i,x=-o,_=t+(1-g-v)*i,P=n+(1-p-m)*o,M=t+(1-g)*i,I=n+(1-p)*o;break}for(const{line:T,points:N}of u(this,Rr))h.push(L(T,b,S,A,x,l?new Array(T.length):null)),d.push(L(N,b,S,A,x,l?new Array(N.length):null));return{lines:h,points:d,rect:[_,P,M,I]}}static deserialize(t,n,i,o,l,{paths:{lines:h,points:d},rotation:p,thickness:g}){const m=[];let v,b,S,A,x;switch(p){case 0:x=me._rescale,v=-t/i,b=n/o+1,S=1/i,A=-1/o;break;case 90:x=me._rescaleAndSwap,v=-n/o,b=-t/i,S=1/o,A=1/i;break;case 180:x=me._rescale,v=t/i+1,b=-n/o,S=-1/i,A=1/o;break;case 270:x=me._rescaleAndSwap,v=n/o+1,b=t/i+1,S=-1/o,A=-1/i;break}if(!h){h=[];for(const P of d){const M=P.length;if(M===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,P[0],P[1]]));continue}if(M===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,P[0],P[1],NaN,NaN,NaN,NaN,P[2],P[3]]));continue}const I=new Float32Array(3*(M-2));h.push(I);let[L,T,N,G]=P.subarray(0,4);I.set([NaN,NaN,NaN,NaN,L,T],0);for(let q=4;q<M;q+=2){const ae=P[q],oe=P[q+1];I.set(me.createBezierPoints(L,T,N,G,ae,oe),(q-2)*3),[L,T,N,G]=[N,G,ae,oe]}}}for(let P=0,M=h.length;P<M;P++)m.push({line:x(h[P].map(I=>I??NaN),v,b,S,A),points:x(d[P].map(I=>I??NaN),v,b,S,A)});const _=new lb;return _.build(m,i,o,1,p,g,l),_}get box(){return u(this,Wn)}updateProperty(t,n){return t==="stroke-width"?R(this,An,GC).call(this,n):null}updateParentDimensions([t,n],i){const[o,l]=R(this,An,Es).call(this);E(this,Ji,t),E(this,Zi,n),E(this,Qc,i);const[h,d]=R(this,An,Es).call(this),p=h-o,g=d-l,m=u(this,Wn);return m[0]-=p,m[1]-=g,m[2]+=2*p,m[3]+=2*g,m}updateRotation(t){return E(this,up,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Wn).map(me.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,Wn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,Wn);let i=0,o=0,l=0,h=0,d=0,p=0;switch(u(this,up)){case 90:o=n/t,l=-t/n,d=t;break;case 180:i=-1,h=-1,d=t,p=n;break;case 270:o=-n/t,l=t/n,p=n;break;default:return""}return`matrix(${i} ${o} ${l} ${h} ${me.svgRound(d)} ${me.svgRound(p)})`}getPathResizingSVGProperties([t,n,i,o]){const[l,h]=R(this,An,Es).call(this),[d,p,g,m]=u(this,Wn);if(Math.abs(g-l)<=me.PRECISION||Math.abs(m-h)<=me.PRECISION){const x=t+i/2-(d+g/2),_=n+o/2-(p+m/2);return{path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${_})`}}}const v=(i-2*l)/(g-2*l),b=(o-2*h)/(m-2*h),S=g/i,A=m/o;return{path:{"transform-origin":`${me.svgRound(d)} ${me.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${A}) translate(${me.svgRound(l)} ${me.svgRound(h)}) scale(${v} ${b}) translate(${me.svgRound(-l)} ${me.svgRound(-h)})`}}}getPathResizedSVGProperties([t,n,i,o]){const[l,h]=R(this,An,Es).call(this),d=u(this,Wn),[p,g,m,v]=d;if(d[0]=t,d[1]=n,d[2]=i,d[3]=o,Math.abs(m-l)<=me.PRECISION||Math.abs(v-h)<=me.PRECISION){const _=t+i/2-(p+m/2),P=n+o/2-(g+v/2);for(const{line:M,points:I}of u(this,Rr))me._translate(M,_,P,M),me._translate(I,_,P,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*l)/(m-2*l),S=(o-2*h)/(v-2*h),A=-b*(p+l)+t+l,x=-S*(g+h)+n+h;if(b!==1||S!==1||A!==0||x!==0)for(const{line:_,points:P}of u(this,Rr))me._rescale(_,A,x,b,S,_),me._rescale(P,A,x,b,S,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[o,l]=i,h=u(this,Wn),d=t-h[0],p=n-h[1];if(u(this,Ji)===o&&u(this,Zi)===l)for(const{line:g,points:m}of u(this,Rr))me._translate(g,d,p,g),me._translate(m,d,p,m);else{const g=u(this,Ji)/o,m=u(this,Zi)/l;E(this,Ji,o),E(this,Zi,l);for(const{line:v,points:b}of u(this,Rr))me._rescale(v,d,p,g,m,v),me._rescale(b,d,p,g,m,b);h[2]*=g,h[3]*=m}return h[0]=t,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(t)} ${me.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,Wn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(t[0])} ${me.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Wn=new WeakMap,up=new WeakMap,cp=new WeakMap,Rr=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,An=new WeakSet,Es=function(t=u(this,Zc)){const n=u(this,cp)+t/2*u(this,Qc);return u(this,Jc)%180===0?[n/u(this,Ji),n/u(this,Zi)]:[n/u(this,Zi),n/u(this,Ji)]},VC=function(){const[t,n,i,o]=u(this,Wn),[l,h]=R(this,An,Es).call(this,0);return[t+l,n+h,i-2*l,o-2*h]},WC=function(){const t=E(this,Wn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of u(this,Rr)){if(o.length<=12){for(let d=4,p=o.length;d<p;d+=6){const[g,m]=o.subarray(d,d+2);t[0]=Math.min(t[0],g),t[1]=Math.min(t[1],m),t[2]=Math.max(t[2],g),t[3]=Math.max(t[3],m)}continue}let l=o[4],h=o[5];for(let d=6,p=o.length;d<p;d+=6){const[g,m,v,b,S,A]=o.subarray(d,d+6);Ee.bezierBoundingBox(l,h,g,m,v,b,S,A,t),l=S,h=A}}const[n,i]=R(this,An,Es).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},GC=function(t){const[n,i]=R(this,An,Es).call(this);E(this,Zc,t);const[o,l]=R(this,An,Es).call(this),[h,d]=[o-n,l-i],p=u(this,Wn);return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p};let Km=lb;var eh;const ub=class ub extends xD{constructor(t){super();k(this,eh);E(this,eh,t),super.updateProperties({fill:"none",stroke:Ft._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=u(this,eh).realScale),super.updateSVGProperty(t,n)}clone(){const t=new ub(u(this,eh));return t.updateAll(this),t}};eh=new WeakMap;let h1=ub;var gy,XC;const qu=class qu extends o1{constructor(t){super({...t,name:"inkEditor"});k(this,gy);this._willKeepAspectRatio=!0}static initialize(t,n){Ft.initialize(t,n),this._defaultDrawingOptions=new h1(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ye(this,"typesMap",new Map([[Ke.INK_THICKNESS,"stroke-width"],[Ke.INK_COLOR,"stroke"],[Ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,o,l){return new _D(t,n,i,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,o,l,h){return Km.deserialize(t,n,i,o,l,h)}static async deserialize(t,n,i){let o=null;if(t instanceof rb){const{data:{inkLists:h,rect:d,rotation:p,id:g,color:m,opacity:v,borderStyle:{rawWidth:b},popupRef:S},parent:{page:{pageNumber:A}}}=t;o=t={annotationType:He.INK,color:Array.from(m),thickness:b,opacity:v,paths:{points:h},boxes:null,pageIndex:A-1,rect:d.slice(0),rotation:p,id:g,deleted:!1,popupRef:S}}const l=await super.deserialize(t,n,i);return l.annotationElementId=t.id||null,l._initialData=o,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=qu.getDefaultDrawingOptions({stroke:Ee.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:o}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":h,"stroke-width":d}}=this,p={annotationType:He.INK,color:Ft._colorManager.convert(l),opacity:h,thickness:d,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?p:this.annotationElementId&&!R(this,gy,XC).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(t){const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};gy=new WeakSet,XC=function(t){const{color:n,thickness:i,opacity:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((h,d)=>h!==n[d])||t.thickness!==i||t.opacity!==o||t.pageIndex!==l},Le(qu,"_type","ink"),Le(qu,"_editorType",He.INK),Le(qu,"_defaultDrawingOptions",null);let d1=qu;var Dt,Sn,io,Xs,so,th,es,ts,Tr,nh,tt,Ad,Ed,Tm,p1,Pm,g1,Lm,qC;const kd=class kd extends Ft{constructor(t){super({...t,name:"stampEditor"});k(this,tt);k(this,Dt,null);k(this,Sn,null);k(this,io,null);k(this,Xs,null);k(this,so,null);k(this,th,"");k(this,es,null);k(this,ts,null);k(this,Tr,!1);k(this,nh,!1);E(this,Xs,t.bitmapUrl),E(this,so,t.bitmapFile)}static initialize(t,n){Ft.initialize(t,n)}static get supportedTypes(){return Ye(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Ye(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(He.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:h}=t||this.copyCanvas(null,null,!0).imageData,d=await i.guess({name:"altText",request:{data:o,width:l,height:h,channels:o.length/(l*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t;u(this,Sn)&&(E(this,Dt,null),this._uiManager.imageManager.deleteId(u(this,Sn)),(t=u(this,es))==null||t.remove(),E(this,es,null),u(this,ts)&&(clearTimeout(u(this,ts)),E(this,ts,null))),super.remove()}rebuild(){if(!this.parent){u(this,Sn)&&R(this,tt,Tm).call(this);return}super.rebuild(),this.div!==null&&(u(this,Sn)&&u(this,es)===null&&R(this,tt,Tm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,io)||u(this,Dt)||u(this,Xs)||u(this,so)||u(this,Sn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,Dt)?R(this,tt,p1).call(this):R(this,tt,Tm).call(this),this.width&&!this.annotationElementId){const[i,o]=this.parentDimensions;this.setAt(t*i,n*o,this.width*i,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,ts)!==null&&clearTimeout(u(this,ts)),E(this,ts,setTimeout(()=>{E(this,ts,null),R(this,tt,g1).call(this)},200))}copyCanvas(t,n,i=!1){var b;t||(t=224);const{width:o,height:l}=u(this,Dt),h=new hw;let d=u(this,Dt),p=o,g=l,m=null;if(n){if(o>n||l>n){const G=Math.min(n/o,n/l);p=Math.floor(o*G),g=Math.floor(l*G)}m=document.createElement("canvas");const S=m.width=Math.ceil(p*h.sx),A=m.height=Math.ceil(g*h.sy);u(this,Tr)||(d=R(this,tt,Pm).call(this,S,A));const x=m.getContext("2d");x.filter=this._uiManager.hcmFilter;let _="white",P="#cfcfd8";this._uiManager.hcmFilter!=="none"?P="black":(b=window.matchMedia)!=null&&b.call(window,"(prefers-color-scheme: dark)").matches&&(_="#8f8f9d",P="#42414d");const M=15,I=M*h.sx,L=M*h.sy,T=new OffscreenCanvas(I*2,L*2),N=T.getContext("2d");N.fillStyle=_,N.fillRect(0,0,I*2,L*2),N.fillStyle=P,N.fillRect(0,0,I,L),N.fillRect(I,L,I,L),x.fillStyle=x.createPattern(T,"repeat"),x.fillRect(0,0,S,A),x.drawImage(d,0,0,d.width,d.height,0,0,S,A)}let v=null;if(i){let S,A;if(h.symmetric&&d.width<t&&d.height<t)S=d.width,A=d.height;else if(d=u(this,Dt),o>t||l>t){const P=Math.min(t/o,t/l);S=Math.floor(o*P),A=Math.floor(l*P),u(this,Tr)||(d=R(this,tt,Pm).call(this,S,A))}const _=new OffscreenCanvas(S,A).getContext("2d",{willReadFrequently:!0});_.drawImage(d,0,0,d.width,d.height,0,0,S,A),v={width:S,height:A,data:_.getImageData(0,0,S,A).data}}return{canvas:m,width:p,height:g,imageData:v}}getImageForAltText(){return u(this,es)}static async deserialize(t,n,i){var A;let o=null;if(t instanceof gC){const{data:{rect:x,rotation:_,id:P,structParent:M,popupRef:I},container:L,parent:{page:{pageNumber:T}}}=t,N=L.querySelector("canvas"),G=i.imageManager.getFromCanvas(L.id,N);N.remove();const q=((A=await n._structTree.getAriaAttributes(`${Y1}${P}`))==null?void 0:A.get("aria-label"))||"";o=t={annotationType:He.STAMP,bitmapId:G.id,bitmap:G.bitmap,pageIndex:T-1,rect:x.slice(0),rotation:_,id:P,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:M,popupRef:I}}const l=await super.deserialize(t,n,i),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:m,accessibilityData:v}=t;g&&i.imageManager.isValidId(g)?(E(l,Sn,g),d&&E(l,Dt,d)):E(l,Xs,p),E(l,Tr,m);const[b,S]=l.pageDimensions;return l.width=(h[2]-h[0])/b,l.height=(h[3]-h[1])/S,l.annotationElementId=t.id||null,v&&(l.altTextData=v),l._initialData=o,E(l,nh,!!o),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:He.STAMP,bitmapId:u(this,Sn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Tr),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=R(this,tt,Lm).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=R(this,tt,qC).call(this,i);if(d.isSame)return null;d.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const h=u(this,Tr)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(u(this,Sn)))n.stamps.set(u(this,Sn),{area:h,serialized:i}),i.bitmap=R(this,tt,Lm).call(this,!1);else if(u(this,Tr)){const d=n.stamps.get(u(this,Sn));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=R(this,tt,Lm).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Dt=new WeakMap,Sn=new WeakMap,io=new WeakMap,Xs=new WeakMap,so=new WeakMap,th=new WeakMap,es=new WeakMap,ts=new WeakMap,Tr=new WeakMap,nh=new WeakMap,tt=new WeakSet,Ad=function(t,n=!1){if(!t){this.remove();return}E(this,Dt,t.bitmap),n||(E(this,Sn,t.id),E(this,Tr,t.isSvg)),t.file&&E(this,th,t.file.name),R(this,tt,p1).call(this)},Ed=function(){if(E(this,io,null),this._uiManager.enableWaiting(!1),!!u(this,es)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Dt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Dt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Tm=function(){if(u(this,Sn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Sn)).then(i=>R(this,tt,Ad).call(this,i,!0)).finally(()=>R(this,tt,Ed).call(this));return}if(u(this,Xs)){const i=u(this,Xs);E(this,Xs,null),this._uiManager.enableWaiting(!0),E(this,io,this._uiManager.imageManager.getFromUrl(i).then(o=>R(this,tt,Ad).call(this,o)).finally(()=>R(this,tt,Ed).call(this)));return}if(u(this,so)){const i=u(this,so);E(this,so,null),this._uiManager.enableWaiting(!0),E(this,io,this._uiManager.imageManager.getFromFile(i).then(o=>R(this,tt,Ad).call(this,o)).finally(()=>R(this,tt,Ed).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=kd.supportedTypesStr;const n=this._uiManager._signal;E(this,io,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,tt,Ad).call(this,o)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>R(this,tt,Ed).call(this))),t.click()},p1=function(){var m;const{div:t}=this;let{width:n,height:i}=u(this,Dt);const[o,l]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,i=this.height*l;else if(n>h*o||i>h*l){const v=Math.min(h*o/n,h*l/i);n*=v,i*=v}const[d,p]=this.parentDimensions;this.setDims(n*d/o,i*p/l),this._uiManager.enableWaiting(!1);const g=E(this,es,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/o,this.height=i/l,(m=this._initialOptions)!=null&&m.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),R(this,tt,g1).call(this),u(this,nh)||(this.parent.addUndoableEditor(this),E(this,nh,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,th)&&g.setAttribute("aria-label",u(this,th))},Pm=function(t,n){const{width:i,height:o}=u(this,Dt);let l=i,h=o,d=u(this,Dt);for(;l>2*t||h>2*n;){const p=l,g=h;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const m=new OffscreenCanvas(l,h);m.getContext("2d").drawImage(d,0,0,p,g,0,0,l,h),d=m.transferToImageBitmap()}return d},g1=function(){const[t,n]=this.parentDimensions,{width:i,height:o}=this,l=new hw,h=Math.ceil(i*t*l.sx),d=Math.ceil(o*n*l.sy),p=u(this,es);if(!p||p.width===h&&p.height===d)return;p.width=h,p.height=d;const g=u(this,Tr)?u(this,Dt):R(this,tt,Pm).call(this,h,d),m=p.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(g,0,0,g.width,g.height,0,0,h,d)},Lm=function(t){if(t){if(u(this,Tr)){const o=this._uiManager.imageManager.getSvgUrl(u(this,Sn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,Dt),n.getContext("2d").drawImage(u(this,Dt),0,0),n.toDataURL()}if(u(this,Tr)){const[n,i]=this.pageDimensions,o=Math.round(this.width*n*po.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*po.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,l);return h.getContext("2d").drawImage(u(this,Dt),0,0,u(this,Dt).width,u(this,Dt).height,0,0,o,l),h.transferToImageBitmap()}return structuredClone(u(this,Dt))},qC=function(t){var h;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,o=t.pageIndex===n,l=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},Le(kd,"_type","stamp"),Le(kd,"_editorType",He.STAMP);let f1=kd;var Gl,rh,ns,ao,qs,Kr,oo,ih,Xl,_i,Ys,Fn,Ks,Ae,lo,Pt,YC,$i,y1,v1,Mm;const fi=class fi{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:p,l10n:g}){k(this,Pt);k(this,Gl);k(this,rh,!1);k(this,ns,null);k(this,ao,null);k(this,qs,null);k(this,Kr,new Map);k(this,oo,!1);k(this,ih,!1);k(this,Xl,!1);k(this,_i,null);k(this,Ys,null);k(this,Fn,null);k(this,Ks,null);k(this,Ae);const m=[...u(fi,lo).values()];if(!fi._initialized){fi._initialized=!0;for(const v of m)v.initialize(g,e)}e.registerEditorTypes(m),E(this,Ae,e),this.pageIndex=t,this.div=n,E(this,Gl,o),E(this,ns,l),this.viewport=p,E(this,Fn,d),this.drawLayer=h,this._structTree=i,u(this,Ae).addLayer(this)}get isEmpty(){return u(this,Kr).size===0}get isInvisible(){return this.isEmpty&&u(this,Ae).getMode()===He.NONE}updateToolbar(e){u(this,Ae).updateToolbar(e)}updateMode(e=u(this,Ae).getMode()){switch(R(this,Pt,Mm).call(this),e){case He.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case He.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case He.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(fi,lo).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,Fn))==null?void 0:t.div)}setEditingState(e){u(this,Ae).setEditingState(e)}addCommands(e){u(this,Ae).addCommands(e)}cleanUndoStack(e){u(this,Ae).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,ns))==null||t.div.classList.toggle("disabled",!e)}async enable(){E(this,Xl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of u(this,Kr).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,Ae).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!u(this,ns)){E(this,Xl,!1);return}const t=u(this,ns).getEditableAnnotations();for(const n of t){if(n.hide(),u(this,Ae).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}E(this,Xl,!1)}disable(){var i;E(this,ih,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of u(this,Kr).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(i=this.getEditableAnnotation(o.annotationElementId))==null||i.show(),o.remove()}if(u(this,ns)){const o=u(this,ns).getEditableAnnotations();for(const l of o){const{id:h}=l.data;if(u(this,Ae).isDeletedAnnotationElement(h))continue;let d=t.get(h);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=e.get(h),d&&(u(this,Ae).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}R(this,Pt,Mm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of u(fi,lo).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,ih,!1)}getEditableAnnotation(e){var t;return((t=u(this,ns))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,Ae).getActive()!==e&&u(this,Ae).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,Fn))!=null&&e.div&&!u(this,Ks)){E(this,Ks,new AbortController);const t=u(this,Ae).combinedSignal(u(this,Ks));u(this,Fn).div.addEventListener("pointerdown",R(this,Pt,YC).bind(this),{signal:t}),u(this,Fn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,Fn))!=null&&e.div&&u(this,Ks)&&(u(this,Ks).abort(),E(this,Ks,null),u(this,Fn).div.classList.remove("highlighting"))}enableClick(){if(u(this,ao))return;E(this,ao,new AbortController);const e=u(this,Ae).combinedSignal(u(this,ao));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,ao))==null||e.abort(),E(this,ao,null)}attach(e){u(this,Kr).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,Ae).isDeletedAnnotationElement(t)&&u(this,Ae).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Kr).delete(e.id),(t=u(this,Gl))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,ih)&&e.annotationElementId&&u(this,Ae).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,Ae).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,Ae).addDeletedAnnotationElement(e.annotationElementId),Ft.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,Ae).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Xl)),u(this,Ae).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,qs)&&(e._focusEventsAllowed=!1,E(this,qs,setTimeout(()=>{E(this,qs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,Ae)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,Gl))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,Ae).getId()}combinedSignal(e){return u(this,Ae).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,Pt,$i))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,Ae).updateToolbar(e),u(this,Ae).updateMode(e);const{offsetX:n,offsetY:i}=R(this,Pt,v1).call(this),o=this.getNextId(),l=R(this,Pt,y1).call(this,{parent:this,id:o,x:n,y:i,uiManager:u(this,Ae),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=u(fi,lo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,Ae)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),o=R(this,Pt,y1).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:u(this,Ae),isCentered:t,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(R(this,Pt,v1).call(this),!0)}setSelected(e){u(this,Ae).setSelected(e)}toggleSelected(e){u(this,Ae).toggleSelected(e)}unselect(e){u(this,Ae).unselect(e)}pointerup(e){var n;const{isMac:t}=Xn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,oo)&&(E(this,oo,!1),!((n=u(this,Pt,$i))!=null&&n.isDrawer&&u(this,Pt,$i).supportMultipleDrawings))){if(!u(this,rh)){E(this,rh,!0);return}if(u(this,Ae).getMode()===He.STAMP){u(this,Ae).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(u(this,Ae).getMode()===He.HIGHLIGHT&&this.enableTextSelection(),u(this,oo)){E(this,oo,!1);return}const{isMac:t}=Xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(E(this,oo,!0),(i=u(this,Pt,$i))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=u(this,Ae).getActive();E(this,rh,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),u(this,_i)){u(this,Pt,$i).startDrawing(this,u(this,Ae),!1,e);return}u(this,Ae).setCurrentDrawingSession(this),E(this,_i,new AbortController);const t=u(this,Ae).combinedSignal(u(this,_i));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(E(this,Ys,null),this.commitOrRemove())},{signal:t}),u(this,Pt,$i).startDrawing(this,u(this,Ae),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&E(this,Ys,t);return}u(this,Ys)&&setTimeout(()=>{var t;(t=u(this,Ys))==null||t.focus(),E(this,Ys,null)},0)}endDrawingSession(e=!1){return u(this,_i)?(u(this,Ae).setCurrentDrawingSession(null),u(this,_i).abort(),E(this,_i,null),E(this,Ys,null),u(this,Pt,$i).endDrawing(e)):null}findNewParent(e,t,n){const i=u(this,Ae).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return u(this,_i)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,_i)&&u(this,Pt,$i).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,Ae).getActive())==null?void 0:e.parent)===this&&(u(this,Ae).commitOrRemove(),u(this,Ae).setActiveEditor(null)),u(this,qs)&&(clearTimeout(u(this,qs)),E(this,qs,null));for(const n of u(this,Kr).values())(t=u(this,Gl))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Kr).clear(),u(this,Ae).removeLayer(this)}render({viewport:e}){this.viewport=e,Ql(this.div,e);for(const t of u(this,Ae).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,Ae).commitOrRemove(),R(this,Pt,Mm).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ql(this.div,{rotation:n}),t!==n)for(const i of u(this,Kr).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,Ae).viewParameters.realScale}};Gl=new WeakMap,rh=new WeakMap,ns=new WeakMap,ao=new WeakMap,qs=new WeakMap,Kr=new WeakMap,oo=new WeakMap,ih=new WeakMap,Xl=new WeakMap,_i=new WeakMap,Ys=new WeakMap,Fn=new WeakMap,Ks=new WeakMap,Ae=new WeakMap,lo=new WeakMap,Pt=new WeakSet,YC=function(e){u(this,Ae).unselectAll();const{target:t}=e;if(t===u(this,Fn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,Fn).div.contains(t)){const{isMac:n}=Xn.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,Ae).showAllEditors("highlight",!0,!0),u(this,Fn).div.classList.add("free"),this.toggleDrawing(),Ym.startHighlighting(this,u(this,Ae).direction==="ltr",{target:u(this,Fn).div,x:e.x,y:e.y}),u(this,Fn).div.addEventListener("pointerup",()=>{u(this,Fn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Ae)._signal}),e.preventDefault()}},$i=function(){return u(fi,lo).get(u(this,Ae).getMode())},y1=function(e){const t=u(this,Pt,$i);return t?new t.prototype.constructor(e):null},v1=function(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),o=Math.max(0,e),l=Math.max(0,t),h=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+i),p=(o+h)/2-e,g=(l+d)/2-t,[m,v]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:m,offsetY:v}},Mm=function(){for(const e of u(this,Kr).values())e.isEmpty()&&e.remove()},Le(fi,"_initialized",!1),k(fi,lo,new Map([Qw,d1,f1,Ym].map(e=>[e._editorType,e])));let m1=fi;var Ci,hp,Gn,ql,my,KC,ls,b1,QC,S1;const Mn=class Mn{constructor({pageIndex:e}){k(this,ls);k(this,Ci,null);k(this,hp,0);k(this,Gn,new Map);k(this,ql,new Map);this.pageIndex=e}setParent(e){if(!u(this,Ci)){E(this,Ci,e);return}if(u(this,Ci)!==e){if(u(this,Gn).size>0)for(const t of u(this,Gn).values())t.remove(),e.append(t);E(this,Ci,e)}}static get _svgFactory(){return Ye(this,"_svgFactory",new nb)}draw(e,t=!1,n=!1){const i=Bn(this,hp)._++,o=R(this,ls,b1).call(this),l=Mn._svgFactory.createElement("defs");o.append(l);const h=Mn._svgFactory.createElement("path");l.append(h);const d=`path_p${this.pageIndex}_${i}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,ql).set(i,h);const p=n?R(this,ls,QC).call(this,l,d):null,g=Mn._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,e),u(this,Gn).set(i,o),{id:i,clipPathId:`url(#${p})`}}drawOutline(e,t){const n=Bn(this,hp)._++,i=R(this,ls,b1).call(this),o=Mn._svgFactory.createElement("defs");i.append(o);const l=Mn._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const m=Mn._svgFactory.createElement("mask");o.append(m),d=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const v=Mn._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=Mn._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${h}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const p=Mn._svgFactory.createElement("use");i.append(p),p.setAttribute("href",`#${h}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return i.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(i,e),u(this,Gn).set(n,i),n}finalizeDraw(e,t){u(this,ql).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:i,rootClass:o,path:l}=t,h=typeof e=="number"?u(this,Gn).get(e):e;if(h){if(n&&R(this,ls,S1).call(this,h,n),i&&R(d=Mn,my,KC).call(d,h,i),o){const{classList:p}=h;for(const[g,m]of Object.entries(o))p.toggle(g,m)}if(l){const g=h.firstChild.firstChild;R(this,ls,S1).call(this,g,l)}}}updateParent(e,t){if(t===this)return;const n=u(this,Gn).get(e);n&&(u(t,Ci).append(n),u(this,Gn).delete(e),u(t,Gn).set(e,n))}remove(e){u(this,ql).delete(e),u(this,Ci)!==null&&(u(this,Gn).get(e).remove(),u(this,Gn).delete(e))}destroy(){E(this,Ci,null);for(const e of u(this,Gn).values())e.remove();u(this,Gn).clear(),u(this,ql).clear()}};Ci=new WeakMap,hp=new WeakMap,Gn=new WeakMap,ql=new WeakMap,my=new WeakSet,KC=function(e,[t,n,i,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*i}%`,l.height=`${100*o}%`},ls=new WeakSet,b1=function(){const e=Mn._svgFactory.create(1,1,!0);return u(this,Ci).append(e),e.setAttribute("aria-hidden",!0),e},QC=function(e,t){const n=Mn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Mn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i},S1=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},k(Mn,my);let w1=Mn;globalThis.pdfjsTestingUtils={HighlightOutliner:Zw};Ne.AbortException;Ne.AnnotationEditorLayer;Ne.AnnotationEditorParamsType;Ne.AnnotationEditorType;Ne.AnnotationEditorUIManager;Ne.AnnotationLayer;Ne.AnnotationMode;Ne.ColorPicker;Ne.DOMSVGFactory;Ne.DrawLayer;Ne.FeatureTest;var CD=Ne.GlobalWorkerOptions;Ne.ImageKind;Ne.InvalidPDFException;Ne.MissingPDFException;Ne.OPS;Ne.OutputScale;Ne.PDFDataRangeTransport;Ne.PDFDateString;Ne.PDFWorker;Ne.PasswordResponses;Ne.PermissionFlag;Ne.PixelsPerInch;Ne.RenderingCancelledException;Ne.TextLayer;Ne.TouchManager;Ne.UnexpectedResponseException;Ne.Util;Ne.VerbosityLevel;Ne.XfaLayer;Ne.build;Ne.createValidAbsoluteUrl;Ne.fetchData;var kD=Ne.getDocument;Ne.getFilenameFromUrl;Ne.getPdfFilenameFromUrl;Ne.getXfaPageViewport;Ne.isDataScheme;Ne.isPdfFile;Ne.noContextMenu;Ne.normalizeUnicode;Ne.setLayerDimensions;Ne.shadow;Ne.stopEvent;Ne.version;const RD="/document-work-demo/assets/pdf.worker.min-yatZIOMy.mjs";CD.workerSrc=RD;var TD={name:"hq3fga",styles:"width:100%;border-radius:10px;background-color:rgba(0, 0, 0, 0)"};const PD=({fileUrl:a})=>{const e=B.useRef(null),t=B.useRef(null);return B.useEffect(()=>{(async()=>{if(!e.current)return;const o=await(await kD(a).promise).getPage(1),l=o.getViewport({scale:1.5}),h=e.current,d=h.getContext("2d");if(d){h.width=l.width,h.height=l.height,t.current&&t.current.cancel();const p={canvasContext:d,viewport:l};t.current=o.render(p);try{await t.current.promise}catch(g){g.name!=="RenderingCancelledException"&&console.error("PDF render error:",g)}}})()},[a]),ne("canvas",{css:TD,ref:e})};var LD={name:"1qwhcvj",styles:`html{font-family:"IBM Plex Mono",'Courier New',Courier,monospace;overflow:hidden;}body{min-height:100vh;margin:0;}#root{height:100%;width:100%;min-height:inherit;}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}a{text-decoration:none;color:initial;}span{font-family:'Golos';}button{border:0;padding:0;cursor:pointer;}*::-webkit-scrollbar{width:12px;}*::-webkit-scrollbar-track{background-color:transparent;}*::-webkit-scrollbar-thumb{border:4px solid transparent;border-radius:6px;background-color:rgba(0 0 0 / 0.1);background-clip:content-box;min-height:60px;}`};const MD=()=>ne(Hx,{styles:LD}),ID="/document-work-demo/assets/GolosText-Regular-BsVpnooN.ttf",DD="/document-work-demo/assets/GolosText-Medium-DQARW2El.ttf",ND="/document-work-demo/assets/GolosText-Bold-DxQkZKmw.ttf",FD=()=>ne(Hx,{styles:Bx("@font-face{font-family:'Golos';src:local('Golos Regular'),url(",ID,");font-weight:400;}@font-face{font-family:'Golos';src:local('Golos Medium'),url(",DD,");font-weight:500;}@font-face{font-family:'Golos';src:local('Golos Bold'),url(",ND,");font-weight:700;}","")}),W0=a=>{const{children:e,to:t,...n}=a;return ne(OD,{to:t,children:e})},OD=je(j1,{target:"e46gdaf0"})({name:"12yhkti",styles:"font-family:'Golos';margin:auto 0;padding:0 4px;height:42px;display:flex;justify-content:center;align-items:center;text-decoration:none;border-bottom:2px solid transparent;transition:border-bottom 0.05s;font-size:1rem;&.active{border-bottom:2px solid black;}&:hover{border-bottom:2px solid rgba(0, 0, 0, 0.5);transition:border-bottom 0.1s;&.active{border-bottom:2px solid black;}}"}),zD=()=>Ot($D,{children:[ne(HD,{children:"выбрать файл"}),ne(BD,{type:"file",accept:".doc,.docx,.pdf,image/*",multiple:!0})]}),$D=je("label",{target:"e1dx97qs2"})({name:"6cl4w7",styles:"cursor:pointer;background:linear-gradient(to right, #63a455f6, #63a455b3);;display:inline-block;padding:13px 47px;border-radius:7px;&:hover{outline:2px solid black;}"}),HD=je("span",{target:"e1dx97qs1"})({name:"m4kab3",styles:"font-family:Golos;text-align:center;font-size:1.125rem;font-weight:450"}),BD=je("input",{target:"e1dx97qs0"})({name:"eivff4",styles:"display:none"}),jD=a=>{const{children:e,...t}=a;return ne(UD,{...t,children:e})},UD=je("div",{target:"ebgggqw0"})({name:"16pthee",styles:"color:rgb(119, 119, 119);cursor:pointer;margin:auto 0;width:100%;height:35px;padding:0px 17px;border:0;border-radius:15px;background-color:rgba(190, 187, 187, 0.67);outline:0;font-size:1rem;text-align:center;line-height:35px"}),G0=a=>{const{children:e,to:t,...n}=a;return ne(VD,{to:t,onClick:()=>Py(),children:e})},VD=je(j1,{target:"el5qv380"})({name:"18501et",styles:"font-family:'Golos';height:50px;display:flex;justify-content:center;align-items:center;font-size:1rem;&.active{background-color:rgb(150, 150, 150);}&:hover{}"}),JC=a=>{const{children:e,forwardedRef:t,...n}=a;return ne(WD,{ref:t,...n,children:e})},Qm=a=>{const{children:e,...t}=a;return ne(GD,{...t,children:e})},Zu=a=>{const{children:e,...t}=a;return ne(XD,{...t,children:e})},WD=je("div",{target:"egu192q2"})({name:"m6bxyp",styles:"flex:1;display:flex;justify-content:center;gap:16px"}),GD=je("div",{target:"egu192q1"})({name:"1t73m0y",styles:"width:100%;display:flex;flex-direction:column;min-width:230px;max-width:500px;gap:16px"}),XD=je("div",{target:"egu192q0"})({name:"w0l1xy",styles:"display:flex;flex-direction:column;min-width:230px;max-width:500px;border-radius:10px;padding:5px 20px;background-color:rgba(214, 214, 214, 0.3)"}),qD=a=>{const{children:e,...t}=a;return ne(YD,{...t,children:e})},YD=je("form",{target:"e1spouw40"})({name:"jj93mt",styles:"display:flex;flex-direction:column;padding-block-end:10px"}),KD=a=>{const{children:e,...t}=a;return ne(QD,{...t})},QD=je("input",{target:"e5kutar0"})({name:"4keh6u",styles:"font-family:Golos;font-size:1rem;height:35px;border:0;border-radius:0.4rem;:focus{outline:2px solidrgba(0, 0, 0, 0.5);}padding-inline:10px"}),ZC=je("nav",{target:"ehusy250"})({name:"gmcrkm",styles:"display:flex;margin-block:5px;margin-inline:auto;gap:10px"}),JD=a=>ne(t2,{children:a.children}),ZD=a=>ne(n2,{children:a.children}),e2=a=>ne(r2,{children:a.children}),t2=je("span",{target:"e1g1wk6b3"})({name:"105d1gi",styles:"padding-block:20px;font-size:1.3rem;font-weight:600"}),n2=je("span",{target:"e1g1wk6b1"})({name:"1sl6pej",styles:"font-size:1rem;font-weight:500;padding-block:6px"}),r2=je("span",{target:"e1g1wk6b0"})({name:"nwddzo",styles:"font-weight:400;font-size:0.9rem;color:rgb(63, 63, 63);padding-block:6px;padding-inline:1px"}),Gg=a=>{const{children:e,...t}=a;return ne(i2,{children:e})},i2=je("button",{target:"e19ddmvz0"})({name:"c34qa1",styles:"border-radius:10px;border:1px solid;background:linear-gradient(rgba(179, 233, 226, 0.06),rgba(169, 233, 224, 0.14))"}),s2=()=>Ot(a2,{children:[ne(o2,{children:ne(zD,{})}),Ot(l2,{children:[ne(Gg,{}),ne(Gg,{}),ne(Gg,{}),ne(Gg,{})]})]}),a2=je("main",{target:"e14ywu562"})({name:"0",styles:""}),o2=je("div",{target:"e14ywu561"})({name:"14bbowz",styles:"height:500px;display:flex;justify-content:center;align-items:center"}),l2=je("div",{target:"e14ywu560"})({name:"ury46p",styles:"padding:0 40px;height:250px;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:2rem"}),u2=()=>Ot(Sy,{children:[ne(FD,{}),ne(MD,{}),ne(c2,{children:ne(Om,{})})]}),c2=je("div",{target:"e4pjokc0"})({name:"18io8mv",styles:"display:grid;grid-template-rows:1fr;min-height:inherit"}),h2=()=>{const a=Ix();return B.useEffect(()=>{a("/home")}),null};var X0={exports:{}},q0={},Y0={exports:{}},K0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function d2(){if(QE)return K0;QE=1;var a=dp();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=a.useState,i=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function h(m,v){var b=v(),S=n({inst:{value:b,getSnapshot:v}}),A=S[0].inst,x=S[1];return o(function(){A.value=b,A.getSnapshot=v,d(A)&&x({inst:A})},[m,b,v]),i(function(){return d(A)&&x({inst:A}),m(function(){d(A)&&x({inst:A})})},[m]),l(b),b}function d(m){var v=m.getSnapshot;m=m.value;try{var b=v();return!t(m,b)}catch{return!0}}function p(m,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return K0.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:g,K0}var JE;function ek(){return JE||(JE=1,Y0.exports=d2()),Y0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function f2(){if(ZE)return q0;ZE=1;var a=dp(),e=ek();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=a.useRef,l=a.useEffect,h=a.useMemo,d=a.useDebugValue;return q0.useSyncExternalStoreWithSelector=function(p,g,m,v,b){var S=o(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=h(function(){function _(T){if(!P){if(P=!0,M=T,T=v(T),b!==void 0&&A.hasValue){var N=A.value;if(b(N,T))return I=N}return I=T}if(N=I,n(M,T))return N;var G=v(T);return b!==void 0&&b(N,G)?(M=T,N):(M=T,I=G)}var P=!1,M,I,L=m===void 0?null:m;return[function(){return _(g())},L===null?void 0:function(){return _(L())}]},[g,m,v,b]);var x=i(p,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=x},[x]),d(x),x},q0}var ex;function p2(){return ex||(ex=1,X0.exports=f2()),X0.exports}var g2=p2();const m2=A1(g2);var y2=ek();const v2=A1(y2);function w2(a,e){const t=zg.unit(a);let n={};t?n={unit:a}:"@@unitShape"in a?typeof a["@@unitShape"]=="function"?n=a["@@unitShape"]():tx("expect @@unitShape to be a function"):n=a;const i=Array.isArray(n),o=ss.useRef({stale:1,justSubscribed:0,scope:e}),[l,h,d,p,g]=ss.useMemo(()=>{o.current.stale=1;const S=Array.isArray(n)?[]:{},A=[],x=[],_=[],P=[];for(const M in n){if(!{}.hasOwnProperty.call(n,M))continue;const I=n[M];zg.unit(I)||tx(`expect useUnit ${t?"argument":`value in key "${M}"`} to be a unit`),zg.event(I)||zg.effect(I)?(S[M]=e?qL(I,{scope:e}):I,_.push(M),P.push(I)):(S[M]=null,A.push(M),x.push(I))}return[S,A,x,_,P]},[o,e,...Object.keys(n),...Object.values(n)]),m=ss.useRef({value:l,storeKeys:h,eventKeys:p,eventValues:g}),v=ss.useCallback(S=>{const A=o.current;return A.justSubscribed=1,YL({unit:d,fn:()=>{A.stale||(A.stale=1,S())},scope:e,batch:1})},[d,e,m,o]),b=ss.useCallback(()=>{const S=m.current,A=o.current;let x,_=0;const P=S.value,M=S.storeKeys,I=S.eventKeys,L=S.eventValues,T=e!==A.scope;if(A.stale||A.justSubscribed||T){_=!A.justSubscribed||T,x=i?[...l]:{...l},M.length===h.length&&I.length===p.length||(_=1);for(let N=0;N<h.length;N++){const G=A2(d[N],e),q=h[N];_||(_=M.includes(q)?P[q]!==G:1),x[q]=G}for(let N=0;N<p.length;N++){const G=g[N],q=p[N];_||(_=I.includes(q)?L[I.indexOf(q)]!==G:1)}}return _&&(S.value=x),S.storeKeys=h,S.eventKeys=p,S.eventValues=g,A.stale=0,A.justSubscribed=!_,A.scope=e,t?S.value.unit:S.value},[v,d,g,e,m,o]);return S2(v,b,b)}function b2(a){return ss.useContext(tk)}function su(a,e){return w2(a,b2())}const tx=a=>{throw Error(a)};typeof window<"u"?ss.useLayoutEffect:ss.useEffect;const{useSyncExternalStore:S2}=v2,{useSyncExternalStoreWithSelector:lN}=m2,A2=(a,e)=>e?e.getState(a):a.getState(),tk=ss.createContext(null),{Provider:uN}=tk,E2={options:{viewFile:!0}},x2=Kl(),uh=zm(E2).on(x2,(a,e)=>e),Ap=()=>{var i,o;const a=B.useRef(null),[e,t]=B.useState({width:((i=a.current)==null?void 0:i.clientWidth)||0,height:((o=a.current)==null?void 0:o.clientHeight)||0}),n=()=>{t({width:a.current.clientWidth,height:a.current.clientHeight})};return B.useEffect(()=>{if(!a.current)return;const l=()=>{a.current&&n()},h=new ResizeObserver(l);return h.observe(a.current),()=>{h.disconnect()}},[e]),{size:e,blockRef:a}},_2=()=>{const a=su(uh),{size:e,blockRef:t}=Ap(),{options:n}=a;return Ot(JC,{forwardedRef:t,children:[e.width>=670&&Ot(Qm,{children:[ne(Zu,{}),ne(Zu,{})]}),ne(Qm,{children:ne(Zu,{})})]})},C2=()=>{const a=su(uh),{blockRef:e}=Ap(),{options:t}=a;return Ot(k2,{ref:e,children:[ne(_2,{}),!t.viewFile&&ne(Zx,{})]})},k2=je("main",{target:"eimy1nx0"})({name:"wxqr6p",styles:"display:flex;gap:16px;margin:20px"}),R2=[{id:"1",name:"Имя",nameTag:"name"},{id:"2",name:"Фамилия",nameTag:"surname"},{id:"3",name:"Место работы",nameTag:"place-work",description:"Адрес или название компании"}],T2=()=>Ot(Zu,{children:[ne(JD,{children:"Заполение шаблона"}),R2.map(a=>Ot(qD,{children:[ne(ZD,{children:a.name}),ne(KD,{}),a.description&&ne(e2,{children:a.description})]},a.id))]}),nx=a=>{const{children:e,...t}=a;return ne(P2,{...t,children:e})},P2=je("button",{target:"elhdiam0"})({name:"19kx97y",styles:"font-family:Golos;font-weight:500;color: #ffffff;height:36px;padding-inline:7px;border-radius:6px"});var L2={name:"ik3d9v",styles:"background-color:rgba(230, 23, 12, 0.77)"},M2={name:"q5od2z",styles:"background-color:rgba(11, 125, 231, 0.77)"};const rx=a=>ne(Zu,{children:Ot(ZC,{children:[ne(nx,{css:L2,children:"Получить PDF"}),ne(nx,{css:M2,children:"Получить DOCX"})]})}),ix=a=>ne(Zu,{children:ne(ZC,{})}),I2=()=>{const a=su(uh),{size:e,blockRef:t}=Ap(),{options:n}=a;return Ot(JC,{forwardedRef:t,children:[Ot(Qm,{children:[n.viewFile&&ne(T2,{}),e.width<670&&Ot(Sy,{children:[!n.viewFile&&ne(ix,{}),n.viewFile&&ne(rx,{})]})]}),e.width>=670&&Ot(Qm,{children:[!n.viewFile&&ne(ix,{}),n.viewFile&&ne(rx,{})]})]})},D2=()=>{const a=su(uh),{blockRef:e}=Ap(),{options:t}=a;return Ot(N2,{ref:e,children:[ne(I2,{}),!t.viewFile&&ne(Zx,{})]})},N2=je("main",{target:"ef2cibt0"})({name:"wxqr6p",styles:"display:flex;gap:16px;margin:20px"}),nk=()=>ne(F2,{children:ne(PD,{fileUrl:"/document-work-web/document_output.pdf"})}),F2=je("div",{target:"ecqo5ab0"})({name:"ekjlro",styles:"flex:1;height:100vh;padding:7% 10%;overflow-y:auto"}),O2=a=>{const{minFirst:e=100,minSecond:t=100,defaultSize:n=300,split:i="vertical"}=a,o=i==="vertical",[l,h]=B.useState(n),d=B.useRef(null),[p,g]=B.useState(!1),[m,v]=B.useState(0),b=A=>{if(!d.current)return;const x=o?d.current.clientWidth:d.current.clientHeight,_=x-t;g(x<e+t),v(x-(e+t)),h(Math.max(e,Math.min(_,A)))},S=A=>{A.preventDefault();const x=P=>{b(o?P.clientX:P.clientY)},_=()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",_)};return B.useEffect(()=>{if(!d.current)return;const A=()=>{d.current&&b(l)},x=new ResizeObserver(A);return x.observe(d.current),()=>{x.disconnect()}},[l]),{size:l,containerRef:d,handleMouseDown:S,isOverflow:p,editWidth:m}},z2=()=>{const[a,e]=B.useState({width:window.innerWidth,height:window.innerHeight});return B.useEffect(()=>{const t=()=>e({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",t),window.addEventListener("resize",t)},[]),a},$2=()=>{const a=su(uh),e=z2(),{options:t}=a,{size:n,handleMouseDown:i,containerRef:o,isOverflow:l,editWidth:h}=O2({minFirst:400,minSecond:840,defaultSize:e.width-840});return ne(Sy,{children:t.viewFile?Ot(H2,{ref:o,children:[ne(B2,{size:n,isOverflow:l,children:ne(Om,{})}),h>=200&&ne(j2,{onMouseDown:i}),!l&&ne(U2,{children:ne(nk,{})})]}):ne(Om,{})})},H2=je("div",{target:"e1lwbjqm3"})({name:"81iucw",styles:"display:flex;width:100vw;height:100vh"}),B2=je("div",{target:"e1lwbjqm2"})(({size:a,isOverflow:e})=>({width:`${a}px`,flex:`${e?"1":"none"}`}),""),j2=je("div",{target:"e1lwbjqm1"})({name:"lvoyqv",styles:"width:10px;cursor:ew-resize;background-color:rgba(214, 214, 214, 0.55);transition:background-color 0.2s;:hover{background-color:rgba(201, 201, 201, 0.55);}"}),U2=je("div",{target:"e1lwbjqm0"})({name:"x2q5fs",styles:"flex:1;background-color:rgba(214, 214, 214, 0.55)"}),V2=()=>{su(uh);const{size:a,blockRef:e}=Ap();return Ot(W2,{ref:e,children:[a.width<620&&ne(_M,{}),ne(G2,{}),a.width>=620&&Ot(X2,{children:[ne(W0,{to:"/home",children:"Главная"}),ne(W0,{to:"/editor",children:"Редактор"}),ne(W0,{to:"/pattern",children:"Шаблоны"})]}),ne(q2,{children:ne(jD,{children:"Поиск..."})}),ne(Y2,{})]})},W2=je("header",{target:"e1fz8zr34"})({name:"1c658bd",styles:"width:100%;font-family:Golos;display:flex;height:77px;font-size:1.025rem;font-weight:500"}),G2=je("div",{target:"e1fz8zr33"})({name:"hme19x",styles:"flex:0 0 25%"}),X2=je("nav",{target:"e1fz8zr32"})({name:"dci740",styles:"flex:0 0 50%;display:flex;justify-content:center;gap:30px"}),q2=je("div",{target:"e1fz8zr31"})({name:"1an1y0w",styles:"flex:0 0 12%;display:flex"}),Y2=je("div",{target:"e1fz8zr30"})({name:"0",styles:""}),K2=a=>{const{...e}=a;return Ot(Q2,{...e,children:["@MishaProQWERTY ",new Date().getFullYear()]})},Q2=je("footer",{target:"e1fgqp250"})({name:"fq6npp",styles:"padding-inline:20px;padding-block:15px;font-size:0.875"}),J2=()=>Ot(eN,{children:[ne(tN,{children:Ot(nN,{children:[ne(G0,{to:"/home",children:"Главная"}),ne(G0,{to:"/editor",children:"Редактор"}),ne(G0,{to:"/pattern",children:"Шаблоны"})]})}),ne(rN,{onClick:()=>Py()})]}),Z2=HL`
    from {
        width: 0;
    }
    to {
        width: 72vw;
    }
`,eN=je("div",{target:"ek6fmze3"})({position:"fixed",width:"100vw",height:"100vh",display:"flex",animation:`${Z2} 0.2s ease-out`},""),tN=je("div",{target:"ek6fmze2"})({name:"myd96e",styles:"width:450px;background-color:rgba(214, 214, 214, 0.98)"}),nN=je("nav",{target:"ek6fmze1"})({name:"121q7o",styles:"flex:0 0 50%;display:flex;flex-direction:column"}),rN=je("div",{target:"ek6fmze0"})({name:"6e06l4",styles:"flex:1;:hover{background-color:rgba(214, 214, 214, 0.35);}"}),sx=()=>{const a=su(xM);return Ot(Sy,{children:[a&&ne(J2,{}),Ot(iN,{children:[ne(V2,{}),ne(Om,{}),ne(K2,{})]})]})},iN=je("div",{target:"ef8j15r0"})({name:"a7s9pu",styles:"display:grid;grid-template-rows:auto 1fr auto;height:100vh;overflow-y:auto"}),sN=kL([{path:"/",element:ne(u2,{}),children:[{index:!0,element:ne(h2,{})},{element:ne($2,{}),children:[{element:ne(sx,{}),children:[{path:"/home",element:ne(s2,{})},{path:"/editor",element:ne(C2,{})},{path:"/pattern",element:ne(D2,{})}]}]},{element:ne(sx,{}),children:[{path:"/document",element:ne(nk,{})}]}]}],{basename:"/document-work-demo"}),aN=zT.createRoot(document.getElementById("root"));aN.render(ne(B.StrictMode,{children:ne($L,{router:sN})}));
